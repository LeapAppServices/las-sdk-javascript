{"version":3,"sources":["webpack:///webpack/bootstrap a814c2a0cc47563e02f8","webpack:///./lib/ML.js","webpack:///./~/whatwg-fetch/fetch.js","webpack:///./~/node-uuid/uuid.js","webpack:///./~/underscore/underscore.js","webpack:///./lib/version.js","webpack:///./lib/promise.js","webpack:///./~/process/browser.js","webpack:///./~/localStorage/lib/localStorage.js","webpack:///./lib/store.js","webpack:///./~/tiny-cookie/tiny-cookie.js","webpack:///./lib/detector.js","webpack:///./~/web-detector/lib/web-detector.js","webpack:///./~/web-detector/~/es5-shim/es5-shim.js","webpack:///./~/web-detector/lib/detector.js","webpack:///./~/web-detector/lib/web-rules.js","webpack:///./lib/utils.js","webpack:///./lib/error.js","webpack:///./lib/event.js","webpack:///./lib/geopoint.js","webpack:///./lib/op.js","webpack:///./lib/relation.js","webpack:///./lib/file.js","webpack:///./lib/object.js","webpack:///./lib/cloudcode.js","webpack:///./lib/view.js","webpack:///./lib/user.js","webpack:///./lib/query.js","webpack:///./lib/analytics.js"],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;ACtCA;;;;;;;;;AASA,QAAO,EAAP,GAAY,OAAO,OAAP,GAAiB,EAA7B;AACA,QAAO,IAAP,GAAc,oBAAQ,CAAR,CAAd;AACA,IAAG,CAAH,GAAO,oBAAQ,CAAR,CAAP;AACA,IAAG,OAAH,GAAa,oBAAQ,CAAR,CAAb;;AAEA,IAAG,OAAH,GAAa,oBAAQ,CAAR,CAAb;AACA,IAAG,YAAH,GAAkB,oBAAQ,EAAR,CAAlB;AACA,IAAG,KAAH,GAAW,oBAAQ,EAAR,GAAX;;AAEA,IAAG,WAAH,GAAiB,YAAU;AACzB,MAAG,SAAH,GAAe,yBAAf;AACD,EAFD;;AAIA,IAAG,WAAH,GAAiB,YAAU;AACzB,MAAG,SAAH,GAAe,0BAAf;AACD,EAFD;;AAIA,IAAG,WAAH;;AAEA,IAAG,eAAH,GAAqB,IAArB;;AAEA;AACA,qBAAQ,EAAR,EAAsB,EAAtB;AACA,qBAAQ,EAAR,EAAmB,EAAnB;AACA,qBAAQ,EAAR,EAAmB,EAAnB;AACA,qBAAQ,EAAR,EAAmB,EAAnB;AACA,qBAAQ,EAAR,EAAsB,EAAtB;AACA,qBAAQ,EAAR,EAAgB,EAAhB;AACA,qBAAQ,EAAR,EAAsB,EAAtB;AACA,qBAAQ,EAAR,EAAkB,EAAlB;AACA,qBAAQ,EAAR,EAAoB,EAApB;AACA,qBAAQ,EAAR,EAAuB,EAAvB;AACA,qBAAQ,EAAR,EAAkB,EAAlB;AACA,qBAAQ,EAAR,EAAkB,EAAlB;AACA,qBAAQ,EAAR,EAAmB,EAAnB;AACA,qBAAQ,EAAR,EAAuB,EAAvB;;AAEA,IAAG,EAAH,GAAQ,EAAR,C;;;;;;;;AC9CA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;;AAEA;AACA;AACA,yCAAwC,mBAAmB;AAC3D;AACA;;AAEA;AACA;AACA,mCAAkC,oBAAoB;AACtD;AACA;;AAEA;AACA;AACA,yCAAwC,4BAA4B;AACpE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD,UAAS;AACT;AACA,UAAS;AACT,+EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA,wCAAuC,0BAA0B;AACjE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,gCAA+B,0BAA0B,eAAe;AACxE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAO;;AAEP;AACA,MAAK;AACL;AACA;AACA,EAAC;;;;;;;;;AChbD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,QAAQ;AAChC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAsC,EAAE;AACxC,qBAAoB;AACpB;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sCAAqC;AACrC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAsB,SAAS;AAC/B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,mDAAuB,aAAa;;;AAGpC,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;;;;;ACtPD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB,gBAAgB;AACzC;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,YAAY;AAClD;AACA;AACA,MAAK;AACL;AACA,wCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,8BAA8B;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,gBAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAoD;AACpD,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,2CAA0C;AAC1C,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6DAA4D,YAAY;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA8C,YAAY;AAC1D;AACA;AACA,sBAAqB,gBAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA6C,YAAY;AACzD;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,8BAA8B;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,0BAA0B;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAqB,cAAc;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO,eAAe;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAqB,eAAe;AACpC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA,0BAAyB,gBAAgB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0CAAyC,YAAY;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0CAAyC,YAAY;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,6CAA4C,mBAAmB;AAC/D;AACA;AACA,0CAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe;AACf,eAAc;AACd,eAAc;AACd,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP,sBAAqB;AACrB;;AAEA;AACA;AACA,MAAK;AACL,kBAAiB;;AAEjB;AACA,mDAAkD,EAAE,iBAAiB;;AAErE;AACA,yBAAwB,8BAA8B;AACtD,4BAA2B;;AAE3B;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mDAAkD,iBAAiB;;AAEnE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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A9B,EAAqC,OAArC;AACD;AACD;AACA;AACA,cAAO,QAAQ,KAAR,CAAc,KAAd,CAAP;AACD,MAtBM,CAAP;AAuBD,IAzQ4D;;AA2Q7D;;;;;;;;AAQA,kBAAe,uBAAS,YAAT,EAAuB;AACpC,YAAO,KAAK,IAAL,CAAU,YAAW;AAC1B,cAAO,aAAa,SAAb,EAAwB,IAAxB,CAAP;AACD,MAFM,EAEJ,UAAS,KAAT,EAAgB;AACjB,cAAO,aAAa,IAAb,EAAmB,KAAnB,CAAP;AACD,MAJM,CAAP;AAKD;;AAzR4D,EAA/D;;AA6RA;;;;;AAKA,SAAQ,SAAR,CAAkB,OAAlB,GAA4B,QAAQ,SAAR,CAAkB,MAA9C;;AAEA;;;;;AAKA,SAAQ,SAAR,CAAkB,GAAlB,GAAwB,QAAQ,SAAR,CAAkB,IAA1C,C;;;;;;;AC9kBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;A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,MAAP;AACD;AACF;AACD,cAAO,KAAK,QAAL,CAAc,EAAd,CAAiB,WAAjB,KAAiC,IAAjC,GAAwC,SAAxC,GAAoD,KAAK,QAAL,CAAc,EAAd,CAAiB,WAA5E;AACD,MAxB6B;AAyB9B,oBAAe,yBAAY;AACzB,cAAO,OAAO,KAAP,GAAe,GAAf,GAAqB,OAAO,MAAnC;AACD,MA3B6B;AA4B9B,kBAAa,uBAAY;AACvB,cAAO,CAAC,UAAU,QAAV,IAAsB,UAAU,YAAjC,EAA+C,KAA/C,CAAqD,UAArD,EAAiE,CAAjE,CAAP;AACD;AA9B6B,IAAhC;AAiCD,EAvCD,C;;;;;;ACJA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sB;;;;;;AC7GA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,2KAA2K,MAAM,iCAAiC,qDAAqD,qEAAqE,mEAAmE,EAAE,SAAS,6CAA6C,EAAE,YAAY,cAAc,uBAAuB,EAAE,yDAAyD,MAAM,2BAA2B,cAAc,EAAE,qBAAqB,aAAa,EAAE,YAAY,cAAc,EAAE,EAAE,mHAAmH,cAAc,cAAc,EAAE,gEAAgE,cAAc,EAAE,sBAAsB,iCAAiC,EAAE,2BAA2B,cAAc,EAAE,sCAAsC,sDAAsD;;AAExlC,aAAY,mIAAmI,MAAM,uBAAuB,aAAa,EAAE,YAAY,cAAc,EAAE,EAAE,iCAAiC,oCAAoC,iCAAiC,cAAc,EAAE,oFAAoF;AACna,cAAa,4IAA4I,MAAM,sBAAsB,aAAa,EAAE,YAAY,cAAc,EAAE,EAAE,kCAAkC,sCAAsC,iCAAiC,aAAa,EAAE,iCAAiC,cAAc,EAAE,wFAAwF;AACne;;AAEA;AACA;AACA;AACA;AACA,2CAA0C,gCAAgC;AAC1E,6BAA4B,cAAc;AAC1C;AACA,MAAK,YAAY;AACjB;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD,QAAQ;AACzD;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,IAAG;AACH;AACA,kDAAiD,QAAQ;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kDAAiD,gBAAgB;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,wBAAuB,iBAAiB;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gGAA+F,sCAAsC,EAAE;;AAEvI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sDAAqD;AACrD,sEAAqE;AACrE;AACA;AACA,yDAAwD;AACxD,+EAA8E;AAC9E;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,2BAA0B,mBAAmB;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA,eAAc,YAAY;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,mCAAkC,iBAAiB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,uBAAsB;AACtB;AACA,MAAK,YAAY;AACjB;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,MAAK,YAAY;AACjB;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,MAAK,YAAY;AACjB;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAwB,mBAAmB;AAC3C,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,cAAc;AACtD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,sEAAqE,2CAA2C;AAChH;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA2B,mBAAmB;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC,2CAA0C,aAAa;AACvD,cAAa;AACb,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gEAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,uCAAsC,wBAAwB;AAC9D;AACA;AACA;;AAEA;AACA;AACA,mBAAkB,EAAE,SAAS,EAAE;AAC/B;AACA,uBAAsB,EAAE;AACxB,uBAAsB,EAAE;AACxB;AACA,wBAAuB,EAAE;AACzB,wBAAuB,EAAE;AACzB;AACA,4BAA2B,EAAE;AAC7B,iCAAgC,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA,2BAA0B,EAAE;AAC5B,4BAA2B,EAAE;AAC7B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,6CAA4C;AAC5C;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,mBAAmB;;AAEvD;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA,oCAAmC,uBAAuB;;AAE1D;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA4E;AAC5E;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,0BAA0B;AACrE;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,+DAA8D,WAAW;AACzE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;;;;;AClgED;;AAEA,iCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,kDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,cAAa,OAAO;AACpB,eAAc;;;AAGd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA,gBAAe,OAAO;AACtB,iBAAgB;;AAEhB,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,EAAC;;AAED,2B;;;;;;AC5NA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,gFAA+E,IAAI;AACnF,EAAC;AACD;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,IAAG;AACH;AACA,gCAA+B,GAAG;AAClC;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,qDAAoD,GAAG;AACvD,EAAC;AACD;AACA,eAAc,gBAAgB;AAC9B,EAAC;;AAED;AACA,YAAW,OAAO;AAClB,aAAY,yBAAyB;AACrC;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,IAAG,aAAa;AAChB;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,aAAa;AAChB;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,aAAa;AAChB;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,eAAc,gBAAgB;AAC9B,EAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;ACxTA;;AAEA,KAAI,IAAI,oBAAQ,CAAR,CAAR;;AAEA;;;AAGA,QAAO,OAAP,GAAiB,UAAU,EAAV,EAAc;AAC7B;;;;;;;;AAQA;AACA,OAAI,OAAO,CAAP,KAAc,WAAlB,EAA+B;AAC7B,QAAG,CAAH,GAAO,CAAP;AACD;;AAED;AACA;;AAEA;AACA,OAAI,mBAAmB,SAAnB,gBAAmB,GAAY,CAClC,CADD;;AA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","file":"ML.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a814c2a0cc47563e02f8\n **/","/*!\n * LeapCloud JavaScript SDK\n * Built: Mon Jun 03 2013 13:45:00\n * https://maxleap.com\n *\n * Copyright 2015 leap.as, Inc.\n * The Leap Cloud JavaScript SDK is freely distributable under the MIT license.\n */\n\nglobal.ML = module.exports = {};\nglobal.uuid = require('node-uuid');\nML._ = require('underscore');\nML.VERSION = require('./version');\n\nML.Promise = require('./promise');\nML.localStorage = require('localStorage');\nML.store = require('./store')();\n\nML.useCNServer = function(){\n  ML.serverURL = 'https://api.maxleap.cn/';\n};\n\nML.useENServer = function(){\n  ML.serverURL = 'https://api.maxleap.com/';\n};\n\nML.useCNServer();\n\nML.analyticsEnable = true;\n\n// The module order is important.\nrequire('./detector')(ML);\nrequire('./utils')(ML);\nrequire('./error')(ML);\nrequire('./event')(ML);\nrequire('./geopoint')(ML);\nrequire('./op')(ML);\nrequire('./relation')(ML);\nrequire('./file')(ML);\nrequire('./object')(ML);\nrequire('./cloudcode')(ML);\nrequire('./view')(ML);\nrequire('./user')(ML);\nrequire('./query')(ML);\nrequire('./analytics')(ML);\n\nML.ML = ML;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/ML.js\n **/","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/whatwg-fetch/fetch.js\n ** module id = 3\n ** module chunks = 0\n **/","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n(function() {\n  var _global = this;\n\n  // Unique ID creation requires a high quality random # generator.  We feature\n  // detect to determine the best RNG source, normalizing to a function that\n  // returns 128-bits of randomness, since that's what's usually required\n  var _rng;\n\n  // Node.js crypto-based RNG - http://nodejs.org/docs/v0.6.2/api/crypto.html\n  //\n  // Moderately fast, high quality\n  if (typeof(_global.require) == 'function') {\n    try {\n      var _rb = _global.require('crypto').randomBytes;\n      _rng = _rb && function() {return _rb(16);};\n    } catch(e) {}\n  }\n\n  if (!_rng && _global.crypto && crypto.getRandomValues) {\n    // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n    //\n    // Moderately fast, high quality\n    var _rnds8 = new Uint8Array(16);\n    _rng = function whatwgRNG() {\n      crypto.getRandomValues(_rnds8);\n      return _rnds8;\n    };\n  }\n\n  if (!_rng) {\n    // Math.random()-based (RNG)\n    //\n    // If all else fails, use Math.random().  It's fast, but is of unspecified\n    // quality.\n    var  _rnds = new Array(16);\n    _rng = function() {\n      for (var i = 0, r; i < 16; i++) {\n        if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n        _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n      }\n\n      return _rnds;\n    };\n  }\n\n  // Buffer class to use\n  var BufferClass = typeof(_global.Buffer) == 'function' ? _global.Buffer : Array;\n\n  // Maps for number <-> hex string conversion\n  var _byteToHex = [];\n  var _hexToByte = {};\n  for (var i = 0; i < 256; i++) {\n    _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n    _hexToByte[_byteToHex[i]] = i;\n  }\n\n  // **`parse()` - Parse a UUID into it's component bytes**\n  function parse(s, buf, offset) {\n    var i = (buf && offset) || 0, ii = 0;\n\n    buf = buf || [];\n    s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n      if (ii < 16) { // Don't overflow!\n        buf[i + ii++] = _hexToByte[oct];\n      }\n    });\n\n    // Zero out remaining bytes if string was short\n    while (ii < 16) {\n      buf[i + ii++] = 0;\n    }\n\n    return buf;\n  }\n\n  // **`unparse()` - Convert UUID byte array (ala parse()) into a string**\n  function unparse(buf, offset) {\n    var i = offset || 0, bth = _byteToHex;\n    return  bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]];\n  }\n\n  // **`v1()` - Generate time-based UUID**\n  //\n  // Inspired by https://github.com/LiosK/UUID.js\n  // and http://docs.python.org/library/uuid.html\n\n  // random #'s we need to init node and clockseq\n  var _seedBytes = _rng();\n\n  // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n  var _nodeId = [\n    _seedBytes[0] | 0x01,\n    _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n  ];\n\n  // Per 4.2.2, randomize (14 bit) clockseq\n  var _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n  // Previous uuid creation time\n  var _lastMSecs = 0, _lastNSecs = 0;\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v1(options, buf, offset) {\n    var i = buf && offset || 0;\n    var b = buf || [];\n\n    options = options || {};\n\n    var clockseq = options.clockseq != null ? options.clockseq : _clockseq;\n\n    // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n    var msecs = options.msecs != null ? options.msecs : new Date().getTime();\n\n    // Per 4.2.1.2, use count of uuid's generated during the current clock\n    // cycle to simulate higher resolution clock\n    var nsecs = options.nsecs != null ? options.nsecs : _lastNSecs + 1;\n\n    // Time since last uuid creation (in msecs)\n    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n    // Per 4.2.1.2, Bump clockseq on clock regression\n    if (dt < 0 && options.clockseq == null) {\n      clockseq = clockseq + 1 & 0x3fff;\n    }\n\n    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n    // time interval\n    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs == null) {\n      nsecs = 0;\n    }\n\n    // Per 4.2.1.2 Throw error if too many uuids are requested\n    if (nsecs >= 10000) {\n      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n    }\n\n    _lastMSecs = msecs;\n    _lastNSecs = nsecs;\n    _clockseq = clockseq;\n\n    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n    msecs += 12219292800000;\n\n    // `time_low`\n    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    b[i++] = tl >>> 24 & 0xff;\n    b[i++] = tl >>> 16 & 0xff;\n    b[i++] = tl >>> 8 & 0xff;\n    b[i++] = tl & 0xff;\n\n    // `time_mid`\n    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n    b[i++] = tmh >>> 8 & 0xff;\n    b[i++] = tmh & 0xff;\n\n    // `time_high_and_version`\n    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n    b[i++] = tmh >>> 16 & 0xff;\n\n    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n    b[i++] = clockseq >>> 8 | 0x80;\n\n    // `clock_seq_low`\n    b[i++] = clockseq & 0xff;\n\n    // `node`\n    var node = options.node || _nodeId;\n    for (var n = 0; n < 6; n++) {\n      b[i + n] = node[n];\n    }\n\n    return buf ? buf : unparse(b);\n  }\n\n  // **`v4()` - Generate random UUID**\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v4(options, buf, offset) {\n    // Deprecated - 'format' argument, as supported in v1.2\n    var i = buf && offset || 0;\n\n    if (typeof(options) == 'string') {\n      buf = options == 'binary' ? new BufferClass(16) : null;\n      options = null;\n    }\n    options = options || {};\n\n    var rnds = options.random || (options.rng || _rng)();\n\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n    // Copy bytes to buffer, if provided\n    if (buf) {\n      for (var ii = 0; ii < 16; ii++) {\n        buf[i + ii] = rnds[ii];\n      }\n    }\n\n    return buf || unparse(rnds);\n  }\n\n  // Export public API\n  var uuid = v4;\n  uuid.v1 = v1;\n  uuid.v4 = v4;\n  uuid.parse = parse;\n  uuid.unparse = unparse;\n  uuid.BufferClass = BufferClass;\n\n  if (typeof(module) != 'undefined' && module.exports) {\n    // Publish as node.js module\n    module.exports = uuid;\n  } else  if (typeof define === 'function' && define.amd) {\n    // Publish as AMD module\n    define(function() {return uuid;});\n \n\n  } else {\n    // Publish as global (in browsers)\n    var _previousRoot = _global.uuid;\n\n    // **`noConflict()` - (browser only) to reset global 'uuid' var**\n    uuid.noConflict = function() {\n      _global.uuid = _previousRoot;\n      return uuid;\n    };\n\n    _global.uuid = uuid;\n  }\n}).call(this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/node-uuid/uuid.js\n ** module id = 6\n ** module chunks = 0\n **/","//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result — either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/underscore/underscore.js\n ** module id = 7\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = \"v2.0.4\";\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/version.js\n **/","'use strict';\nvar _ = require('underscore');\n\nvar Promise = module.exports = function Promise(fn) {\n  /**\n   * A Promise is returned by async methods as a hook to provide callbacks to be\n   * called when the async task is fulfilled.\n   *\n   * <p>Typical usage would be like:<pre>\n   *    query.find().then(function(results) {\n   *      results[0].set(\"foo\", \"bar\");\n   *      return results[0].saveAsync();\n   *    }).then(function(result) {\n   *      console.log(\"Updated \" + result.id);\n   *    });\n   * </pre></p>\n   * <p>Another example:<pre>\n   *    var promise = new ML.Promise(function(resolve, reject) {\n   *      resolve(42);\n   *    });\n   *    promise.then(function(value){\n   *      console.log(value);\n   *    }).catch(function(error){\n   *      console.error(error);\n   *    });\n   * </pre></p>\n   * @param {Function} fn An optional function with two arguments resolve\n   *                   and reject.The first argument fulfills the promise,\n   *                   the second argument rejects it. We can call these\n    *                  functions, once our operation is completed.\n   * @see ML.Promise.prototype.then\n   * @class\n   */\n    this._resolved = false;\n    this._rejected = false;\n    this._resolvedCallbacks = [];\n    this._rejectedCallbacks = [];\n\n    this.doResolve(fn);\n};\n\nvar _isNullOrUndefined = function _isNullOrUndefined(x) {\n  return _.isNull(x) || _.isUndefined(x);\n};\n\nvar _isNode = false;\n\nif (typeof(process) !== \"undefined\" &&\n    process.versions &&\n    process.versions.node) {\n      _isNode = true;\n}\n\n_.extend(Promise, /** @lends ML.Promise */ {\n\n  _isPromisesAPlusCompliant: !_isNode,\n  _debugError: false,\n\n  setPromisesAPlusCompliant: function(isCompliant) {\n    Promise._isPromisesAPlusCompliant = isCompliant;\n  },\n\n  setDebugError: function(enable) {\n    Promise._debugError = enable;\n  },\n\n  /**\n   * Returns true iff the given object fulfils the Promise interface.\n   * @return {Boolean}\n   */\n  is: function(promise) {\n    return promise && promise.then && _.isFunction(promise.then);\n  },\n\n  /**\n   * Returns a new promise that is resolved with a given value.\n   * @return {ML.Promise} the new promise.\n   */\n  as: function() {\n    var promise = new Promise();\n    promise.resolve.apply(promise, arguments);\n    return promise;\n  },\n\n  /**\n   * Returns a new promise that is rejected with a given error.\n   * @return {ML.Promise} the new promise.\n   */\n  error: function() {\n    var promise = new Promise();\n    promise.reject.apply(promise, arguments);\n    return promise;\n  },\n\n  /**\n   * Returns a new promise that is fulfilled when all of the input promises\n   * are resolved. If any promise in the list fails, then the returned promise\n   * will fail with the last error. If they all succeed, then the returned\n   * promise will succeed, with the results being the results of all the input\n   * promises. For example: <pre>\n   *   var p1 = ML.Promise.as(1);\n   *   var p2 = ML.Promise.as(2);\n   *   var p3 = ML.Promise.as(3);\n   *\n   *   ML.Promise.when(p1, p2, p3).then(function(r1, r2, r3) {\n   *     console.log(r1);  // prints 1\n   *     console.log(r2);  // prints 2\n   *     console.log(r3);  // prints 3\n   *   });</pre>\n   *\n   * The input promises can also be specified as an array: <pre>\n   *   var promises = [p1, p2, p3];\n   *   ML.Promise.when(promises).then(function(r1, r2, r3) {\n   *     console.log(r1);  // prints 1\n   *     console.log(r2);  // prints 2\n   *     console.log(r3);  // prints 3\n   *   });\n   * </pre>\n   * @param {Array} promises a list of promises to wait for.\n   * @return {ML.Promise} the new promise.\n   */\n  when: function(promises) {\n    // Allow passing in Promises as separate arguments instead of an Array.\n    var objects;\n    if (promises && _isNullOrUndefined(promises.length)) {\n      objects = arguments;\n    } else {\n      objects = promises;\n    }\n    var isAll = _.last(arguments);\n    isAll = _.isBoolean(isAll) ? isAll : false;\n\n    var total = objects.length;\n    var hadError = false;\n    var results = [];\n    var errors = [];\n    results.length = objects.length;\n    errors.length = objects.length;\n\n    if (total === 0) {\n      if(isAll) {\n        return Promise.as.call(this, results);\n      } else {\n        return Promise.as.apply(this, results);\n      }\n    }\n\n    var promise = new Promise();\n\n    var resolveOne = function(i) {\n      total = total - 1;\n      if(hadError && !promise._rejected && isAll) {\n        promise.reject.call(promise, errors[i]);\n        return;\n      }\n\n      if (total === 0) {\n        if (hadError && !promise._rejected) {\n          promise.reject.call(promise, errors);\n        } else {\n          if(isAll) {\n            if(!promise._rejected) {\n              promise.resolve.call(promise, results);\n            } else {\n              //It's rejected already, so we ignore it.\n            }\n          } else {\n            promise.resolve.apply(promise, results);\n          }\n        }\n      }\n    };\n\n    _.each(objects, function(object, i) {\n      if (Promise.is(object)) {\n        object.then(function(result) {\n          results[i] = result;\n          resolveOne(i);\n        }, function(error) {\n          errors[i] = error;\n          hadError = true;\n          resolveOne(i);\n        });\n      } else {\n        results[i] = object;\n        resolveOne(i);\n      }\n    });\n\n    return promise;\n  },\n\n  /**\n   * Returns a promise that resolves or rejects as soon as one\n   * of the promises in the iterable resolves or rejects, with\n   * the value or reason from that promise.Returns a new promise\n   * that is fulfilled when one of the input promises.\n   * For example: <pre>\n   *   var p1 = ML.Promise.as(1);\n   *   var p2 = ML.Promise.as(2);\n   *   var p3 = ML.Promise.as(3);\n   *\n   *   ML.Promise.race(p1, p2, p3).then(function(result) {\n   *     console.log(result);  // prints 1\n   *   });</pre>\n   *\n   * The input promises can also be specified as an array: <pre>\n   *   var promises = [p1, p2, p3];\n   *   ML.Promise.when(promises).then(function(result) {\n   *     console.log(result);  // prints 1\n   *   });\n   * </pre>\n   * @param {Array} promises a list of promises to wait for.\n   * @return {ML.Promise} the new promise.\n   */\n  race: function(promises) {\n    // Allow passing in Promises as separate arguments instead of an Array.\n    var objects;\n    if (promises && _isNullOrUndefined(promises.length)) {\n      objects = arguments;\n    } else {\n      objects = promises;\n    }\n\n    var total = objects.length;\n    var hadError = false;\n    var results = [];\n    var errors = [];\n\n    results.length = errors.length = objects.length;\n\n    if (total === 0) {\n      return Promise.as.call(this);\n    }\n\n    var promise = new Promise();\n\n    var resolveOne = function(i) {\n      if (!promise._resolved && !promise._rejected) {\n        if (hadError) {\n          promise.reject.call(promise, errors[i]);\n        } else {\n          promise.resolve.call(promise, results[i]);\n        }\n      }\n    };\n\n    _.each(objects, function(object, i) {\n      if (Promise.is(object)) {\n        object.then(function(result) {\n          results[i] = result;\n          resolveOne(i);\n        }, function(error) {\n          errors[i] = error;\n          hadError = true;\n          resolveOne(i);\n        });\n      } else {\n        results[i] = object;\n        resolveOne(i);\n      }\n    });\n\n    return promise;\n  },\n\n  /**\n   * Runs the given asyncFunction repeatedly, as long as the predicate\n   * function returns a truthy value. Stops repeating if asyncFunction returns\n   * a rejected promise.\n   * @param {Function} predicate should return false when ready to stop.\n   * @param {Function} asyncFunction should return a Promise.\n   */\n  _continueWhile: function(predicate, asyncFunction) {\n    if (predicate()) {\n      return asyncFunction().then(function() {\n        return Promise._continueWhile(predicate, asyncFunction);\n      });\n    }\n    return Promise.as();\n  }\n});\n\n/**\n * Just like ML.Promise.when, but it calls resolveCallbck function\n * with one results array and calls rejectCallback function as soon as any one\n * of the input promises rejects.\n * @see ML.Promise.when\n */\nPromise.all = function(promises) {\n  return Promise.when(promises, true);\n};\n\n_.extend(Promise.prototype, /** @lends ML.Promise.prototype */ {\n\n  /**\n   * Marks this promise as fulfilled, firing any callbacks waiting on it.\n   * @param {Object} result the result to pass to the callbacks.\n   */\n  resolve: function(result) {\n    if (this._resolved || this._rejected) {\n      throw \"A promise was resolved even though it had already been \" +\n        (this._resolved ? \"resolved\" : \"rejected\") + \".\";\n    }\n    this._resolved = true;\n    this._result = arguments;\n    var results = arguments;\n    _.each(this._resolvedCallbacks, function(resolvedCallback) {\n      resolvedCallback.apply(this, results);\n    });\n    this._resolvedCallbacks = [];\n    this._rejectedCallbacks = [];\n  },\n\n  doResolve: function(fn){\n    if (!fn) return;\n    var done = false;\n    var self = this;\n    try {\n      fn(function (value) {\n        if (done) return;\n        done = true;\n        self.resolve.call(self, value);\n      }, function (reason) {\n           if (done) return;\n           done = true;\n           self.reject.call(self, reason);\n      });\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      self.reject.call(self, ex);\n    }\n  },\n\n  /**\n   * Marks this promise as fulfilled, firing any callbacks waiting on it.\n   * @param {Object} error the error to pass to the callbacks.\n   */\n  reject: function(error) {\n    if (this._resolved || this._rejected) {\n      throw \"A promise was rejected even though it had already been \" +\n        (this._resolved ? \"resolved\" : \"rejected\") + \".\";\n    }\n    this._rejected = true;\n    this._error = error;\n    _.each(this._rejectedCallbacks, function(rejectedCallback) {\n      rejectedCallback(error);\n    });\n    this._resolvedCallbacks = [];\n    this._rejectedCallbacks = [];\n  },\n\n  /**\n   * Adds callbacks to be called when this promise is fulfilled. Returns a new\n   * Promise that will be fulfilled when the callback is complete. It allows\n   * chaining. If the callback itself returns a Promise, then the one returned\n   * by \"then\" will not be fulfilled until that one returned by the callback\n   * is fulfilled.\n   * @param {Function} resolvedCallback Function that is called when this\n   * Promise is resolved. Once the callback is complete, then the Promise\n   * returned by \"then\" will also be fulfilled.\n   * @param {Function} rejectedCallback Function that is called when this\n   * Promise is rejected with an error. Once the callback is complete, then\n   * the promise returned by \"then\" with be resolved successfully. If\n   * rejectedCallback is null, or it returns a rejected Promise, then the\n   * Promise returned by \"then\" will be rejected with that error.\n   * @return {ML.Promise} A new Promise that will be fulfilled after this\n   * Promise is fulfilled and either callback has completed. If the callback\n   * returned a Promise, then this Promise will not be fulfilled until that\n   * one is.\n   */\n  then: function(resolvedCallback, rejectedCallback) {\n    var promise = new Promise();\n\n    var wrappedResolvedCallback = function() {\n      var result = arguments;\n      if (resolvedCallback) {\n        if (Promise._isPromisesAPlusCompliant) {\n          try {\n            result = [resolvedCallback.apply(this, result)];\n          } catch (e) {\n            if(Promise._debugError && e) {\n              console.error('Error occurred in promise resolve callback.', e.stack || e);\n            }\n            result = [Promise.error(e)];\n          }\n        } else {\n          result = [resolvedCallback.apply(this, result)];\n        }\n      }\n      if (result.length === 1 && Promise.is(result[0])) {\n        result[0].then(function() {\n          promise.resolve.apply(promise, arguments);\n        }, function(error) {\n          promise.reject(error);\n        });\n      } else {\n        promise.resolve.apply(promise, result);\n      }\n    };\n\n    var wrappedRejectedCallback = function(error) {\n      var result = [];\n      if (rejectedCallback) {\n        if (Promise._isPromisesAPlusCompliant) {\n          try {\n            result = [rejectedCallback(error)];\n          } catch (e) {\n            if(Promise._debugError && e) {\n              console.error('Error occurred in promise reject callback.', e.stack || e);\n            }\n            result = [Promise.error(e)];\n          }\n        } else {\n          result = [rejectedCallback(error)];\n        }\n        if (result.length === 1 && Promise.is(result[0])) {\n          result[0].then(function() {\n            promise.resolve.apply(promise, arguments);\n          }, function(error) {\n            promise.reject(error);\n          });\n        } else {\n          if (Promise._isPromisesAPlusCompliant) {\n            promise.resolve.apply(promise, result);\n          } else {\n            promise.reject(result[0]);\n          }\n        }\n      } else {\n        promise.reject(error);\n      }\n    };\n\n    var runLater = function(func) {\n      func.call();\n    };\n    if (Promise._isPromisesAPlusCompliant) {\n      if (typeof(window) !== 'undefined' && _.isFunction(window.setImmediate)) {\n        runLater = function(func) {\n          window.setImmediate(func);\n        };\n      } else if (typeof(process) !== 'undefined' && process.nextTick) {\n        runLater = function(func) {\n           process.nextTick(func);\n        };\n      } else if (typeof(setTimeout) !== 'undefined' && _.isFunction(setTimeout)) {\n        runLater = function(func) {\n          setTimeout(func, 0);\n        };\n      }\n    }\n\n    var self = this;\n    if (this._resolved) {\n      runLater(function() {\n        wrappedResolvedCallback.apply(self, self._result);\n      });\n    } else if (this._rejected) {\n      runLater(function() {\n        wrappedRejectedCallback.apply(self, [self._error]);\n      });\n    } else {\n      this._resolvedCallbacks.push(wrappedResolvedCallback);\n      this._rejectedCallbacks.push(wrappedRejectedCallback);\n    }\n\n    return promise;\n  },\n\n  /**\n   * Add handlers to be called when the Promise object is rejected.\n   *\n   * @param {Function} rejectedCallback Function that is called when this\n   *                   Promise is rejected with an error.\n   * @return {ML.Promise} A new Promise that will be fulfilled after this\n   *                   Promise is fulfilled and either callback has completed. If the callback\n   * returned a Promise, then this Promise will not be fulfilled until that\n   *                   one is.\n   * @function\n   */\n  catch: function(onRejected) {\n    return this.then(undefined, onRejected);\n  },\n\n  /**\n   * Add handlers to be called when the promise\n   * is either resolved or rejected\n   */\n  always: function(callback) {\n    return this.then(callback, callback);\n  },\n\n  /**\n   * Add handlers to be called when the Promise object is resolved\n   */\n  done: function(callback) {\n    return this.then(callback);\n  },\n\n  /**\n   * Add handlers to be called when the Promise object is rejected\n   */\n  fail: function(callback) {\n    return this.then(null, callback);\n  },\n\n  /**\n   * Run the given callbacks after this promise is fulfilled.\n   * @param optionsOrCallback {} A Backbone-style options callback, or a\n   * callback function. If this is an options object and contains a \"model\"\n   * attributes, that will be passed to error callbacks as the first argument.\n   * @param model {} If truthy, this will be passed as the first result of\n   * error callbacks. This is for Backbone-compatability.\n   * @return {ML.Promise} A promise that will be resolved after the\n   * callbacks are run, with the same result as this.\n   */\n  _thenRunCallbacks: function(optionsOrCallback, model) {\n    var options;\n    if (_.isFunction(optionsOrCallback)) {\n      var callback = optionsOrCallback;\n      options = {\n        success: function(result) {\n          callback(result, null);\n        },\n        error: function(error) {\n          callback(null, error);\n        }\n      };\n    } else {\n      options = _.clone(optionsOrCallback);\n    }\n    options = options || {};\n\n    return this.then(function(result) {\n      if (options.success) {\n        options.success.apply(this, arguments);\n      } else if (model) {\n        // When there's no callback, a sync event should be triggered.\n        model.trigger('sync', model, result, options);\n      }\n      return Promise.as.apply(Promise, arguments);\n    }, function(error) {\n      if (options.error) {\n        if (!_.isUndefined(model)) {\n          options.error(model, error);\n        } else {\n          options.error(error);\n        }\n      } else if (model) {\n        // When there's no error callback, an error event should be triggered.\n        model.trigger('error', model, error, options);\n      }\n      // By explicitly returning a rejected Promise, this will work with\n      // either jQuery or Promises/A semantics.\n      return Promise.error(error);\n    });\n  },\n\n  /**\n   * Adds a callback function that should be called regardless of whether\n   * this promise failed or succeeded. The callback will be given either the\n   * array of results for its first argument, or the error as its second,\n   * depending on whether this Promise was rejected or resolved. Returns a\n   * new Promise, like \"then\" would.\n   * @param {Function} continuation the callback.\n   */\n  _continueWith: function(continuation) {\n    return this.then(function() {\n      return continuation(arguments, null);\n    }, function(error) {\n      return continuation(null, error);\n    });\n  }\n\n});\n\n/**\n * Alias of ML.Promise.prototype.always\n * @function\n * @see ML.Promise#always\n */\nPromise.prototype.finally = Promise.prototype.always;\n\n/**\n * Alias of ML.Promise.prototype.done\n * @function\n * @see ML.Promise#done\n */\nPromise.prototype.try = Promise.prototype.done;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/promise.js\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\n(function () {\n    try {\n        cachedSetTimeout = setTimeout;\n    } catch (e) {\n        cachedSetTimeout = function () {\n            throw new Error('setTimeout is not defined');\n        }\n    }\n    try {\n        cachedClearTimeout = clearTimeout;\n    } catch (e) {\n        cachedClearTimeout = function () {\n            throw new Error('clearTimeout is not defined');\n        }\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 10\n ** module chunks = 0\n **/","// http://www.rajdeepd.com/articles/chrome/localstrg/LocalStorageSample.htm\n\n// NOTE:\n// this varies from actual localStorage in some subtle ways\n\n// also, there is no persistence\n// TODO persist\n(function () {\n  \"use strict\";\n\n  var db;\n\n  function LocalStorage() {\n  }\n  db = LocalStorage;\n\n  db.prototype.getItem = function (key) {\n    if (this.hasOwnProperty(key)) {\n      return String(this[key]);\n    }\n    return null;\n  };\n\n  db.prototype.setItem = function (key, val) {\n    this[key] = String(val);\n  };\n\n  db.prototype.removeItem = function (key) {\n    delete this[key];\n  };\n\n  db.prototype.clear = function () {\n    var self = this;\n    Object.keys(self).forEach(function (key) {\n      self[key] = undefined;\n      delete self[key];\n    });\n  };\n\n  db.prototype.key = function (i) {\n    i = i || 0;\n    return Object.keys(this)[i];\n  };\n\n  db.prototype.__defineGetter__('length', function () {\n    return Object.keys(this).length;\n  });\n\n  if (global.localStorage) {\n    module.exports = localStorage;\n  } else {\n    module.exports = new LocalStorage();\n  }\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/localStorage/lib/localStorage.js\n ** module id = 11\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = function(){\n\n  var cookie = require('tiny-cookie');\n\n  function set(key, value, options){\n    cookie.set(key, value, options);\n  }\n\n  function get(key){\n    return cookie.get(key);\n  }\n\n  return {\n    set: set,\n    get: get\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./lib/store.js\n **/","/*!\n * tiny-cookie - A tiny cookie manipulation plugin\n * https://github.com/Alex1990/tiny-cookie\n * Under the MIT license | (c) Alex Chao\n */\n\n!(function(root, factory) {\n\n  // Uses CommonJS, AMD or browser global to create a jQuery plugin.\n  // See: https://github.com/umdjs/umd\n  if (typeof define === 'function' && define.amd) {\n    // Expose this plugin as an AMD module. Register an anonymous module.\n    define(factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS module\n    module.exports = factory();\n  } else {\n    // Browser globals \n    root.Cookie = factory();\n  }\n\n}(this, function() {\n\n  'use strict';\n\n  // The public function which can get/set/remove cookie.\n  function Cookie(key, value, opts) {\n    if (value === void 0) {\n      return Cookie.get(key);\n    } else if (value === null) {\n      Cookie.remove(key);\n    } else {\n      Cookie.set(key, value, opts);\n    }\n  }\n\n  // Check if the cookie is enabled.\n  Cookie.enabled = function() {\n    var key = '__test_key';\n    var enabled;\n\n    document.cookie = key + '=1';\n    enabled = !!document.cookie;\n\n    if (enabled) Cookie.remove(key);\n\n    return enabled;\n  };\n\n  // Get the cookie value by the key.\n  Cookie.get = function(key, raw) {\n    if (typeof key !== 'string' || !key) return null;\n\n    key = '(?:^|; )' + escapeRe(key) + '(?:=([^;]*?))?(?:;|$)';\n\n    var reKey = new RegExp(key);\n    var res = reKey.exec(document.cookie);\n\n    return res !== null ? (raw ? res[1] : decodeURIComponent(res[1])) : null;\n  };\n\n  // Get the cookie's value without decoding.\n  Cookie.getRaw = function(key) {\n    return Cookie.get(key, true);\n  };\n\n  // Set a cookie.\n  Cookie.set = function(key, value, raw, opts) {\n    if (raw !== true) {\n      opts = raw;\n      raw = false;\n    }\n    opts = opts ? convert(opts) : convert({});\n    var cookie = key + '=' + (raw ? value : encodeURIComponent(value)) + opts;\n    document.cookie = cookie;\n  };\n\n  // Set a cookie without encoding the value.\n  Cookie.setRaw = function(key, value, opts) {\n    Cookie.set(key, value, true, opts);\n  };\n\n  // Remove a cookie by the specified key.\n  Cookie.remove = function(key) {\n    Cookie.set(key, 'a', { expires: new Date() });\n  };\n\n  // Helper function\n  // ---------------\n\n  // Escape special characters.\n  function escapeRe(str) {\n    return str.replace(/[.*+?^$|[\\](){}\\\\-]/g, '\\\\$&');\n  }\n\n  // Convert an object to a cookie option string.\n  function convert(opts) {\n    var res = '';\n\n    for (var p in opts) {\n      if (opts.hasOwnProperty(p)) {\n\n        if (p === 'expires') {\n          var expires = opts[p];\n          if (typeof expires !== 'object') {\n            expires += typeof expires === 'number' ? 'D' : '';\n            expires = computeExpires(expires);\n          }\n          opts[p] = expires.toUTCString();\n        }\n\n        res += ';' + p + '=' + opts[p];\n      }\n    }\n\n    if (!opts.hasOwnProperty('path')) {\n      res += ';path=/';\n    }\n\n    return res;\n  }\n\n  // Return a future date by the given string.\n  function computeExpires(str) {\n    var expires = new Date();\n    var lastCh = str.charAt(str.length - 1);\n    var value = parseInt(str, 10);\n\n    switch (lastCh) {\n      case 'Y': expires.setFullYear(expires.getFullYear() + value); break;\n      case 'M': expires.setMonth(expires.getMonth() + value); break;\n      case 'D': expires.setDate(expires.getDate() + value); break;\n      case 'h': expires.setHours(expires.getHours() + value); break;\n      case 'm': expires.setMinutes(expires.getMinutes() + value); break;\n      case 's': expires.setSeconds(expires.getSeconds() + value); break;\n      default: expires = new Date(str);\n    }\n\n    return expires;\n  }\n\n  return Cookie;\n\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/tiny-cookie/tiny-cookie.js\n ** module id = 13\n ** module chunks = 0\n **/","'use strict';\n\nvar _ = require('underscore');\n\nmodule.exports = function (ML) {\n\n  ML.Detector = function () {\n    this.detector = require('web-detector');\n  };\n\n  _.extend(ML.Detector.prototype, {\n    getOSName: function () {\n      return this.detector.os.name === 'na' ? 'unknown' : this.detector.os.name;\n    },\n    getOSVersion: function () {\n      //如果是windows系统,web-detector返回的是NT的版本号,需要转换成windows版本\n      if(this.detector.os.name === 'windows'){\n        if (this.detector.os.version >= 10) {\n          return '10';\n        } else if (this.detector.os.version >= 6.3) {\n          return '8.1';\n        } else if (this.detector.os.version >= 6.2) {\n          return '8';\n        } else if (this.detector.os.version >= 6.1) {\n          return '7';\n        } else if (this.detector.os.version >= 6.0) {\n          return 'vista';\n        } else if (this.detector.os.version >= 5.1) {\n          return 'xp';\n        } else if (this.detector.os.version >= 5.0) {\n          return '2000';\n        }\n      }\n      return this.detector.os.fullVersion === '-1' ? 'unknown' : this.detector.os.fullVersion;\n    },\n    getResolution: function () {\n      return screen.width + '*' + screen.height\n    },\n    getLanguage: function () {\n      return (navigator.language || navigator.userLanguage).match(/\\w+(?=-)/)[0];\n    }\n  });\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./lib/detector.js\n **/","\"use strict\";\n\nrequire('es5-shim');\n\nvar Detector = require(\"./detector.js\");\nvar WebRules = require(\"./web-rules.js\");\n\nvar userAgent = navigator.userAgent || \"\";\n//const platform = navigator.platform || \"\";\nvar appVersion = navigator.appVersion || \"\";\nvar vendor = navigator.vendor || \"\";\nvar ua = userAgent + \" \" + appVersion + \" \" + vendor;\n\nvar detector = new Detector(WebRules);\n\n// 解析使用 Trident 内核的浏览器的 `浏览器模式` 和 `文档模式` 信息。\n// @param {String} ua, userAgent string.\n// @return {Object}\nfunction IEMode(ua) {\n  if (!WebRules.re_msie.test(ua)) {\n    return null;\n  }\n\n  var m = void 0;\n  var engineMode = void 0;\n  var engineVersion = void 0;\n  var browserMode = void 0;\n  var browserVersion = void 0;\n\n  // IE8 及其以上提供有 Trident 信息，\n  // 默认的兼容模式，UA 中 Trident 版本不发生变化。\n  if (ua.indexOf(\"trident/\") !== -1) {\n    m = /\\btrident\\/([0-9.]+)/.exec(ua);\n    if (m && m.length >= 2) {\n      // 真实引擎版本。\n      engineVersion = m[1];\n      var v_version = m[1].split(\".\");\n      v_version[0] = parseInt(v_version[0], 10) + 4;\n      browserVersion = v_version.join(\".\");\n    }\n  }\n\n  m = WebRules.re_msie.exec(ua);\n  browserMode = m[1];\n  var v_mode = m[1].split(\".\");\n  if (typeof browserVersion === \"undefined\") {\n    browserVersion = browserMode;\n  }\n  v_mode[0] = parseInt(v_mode[0], 10) - 4;\n  engineMode = v_mode.join(\".\");\n  if (typeof engineVersion === \"undefined\") {\n    engineVersion = engineMode;\n  }\n\n  return {\n    browserVersion: browserVersion,\n    browserMode: browserMode,\n    engineVersion: engineVersion,\n    engineMode: engineMode,\n    compatible: engineVersion !== engineMode\n  };\n}\n\nfunction WebParse(ua) {\n  var d = detector.parse(ua);\n\n  var ieCore = IEMode(ua);\n\n  // IE 内核的浏览器，修复版本号及兼容模式。\n  if (ieCore) {\n    var engineName = d.engine.name;\n    var engineVersion = ieCore.engineVersion || ieCore.engineMode;\n    var ve = parseFloat(engineVersion);\n    var engineMode = ieCore.engineMode;\n\n    d.engine = {\n      name: engineName,\n      version: ve,\n      fullVersion: engineVersion,\n      mode: parseFloat(engineMode),\n      fullMode: engineMode,\n      compatible: ieCore ? ieCore.compatible : false\n    };\n    d.engine[d.engine.name] = ve;\n\n    var browserName = d.browser.name;\n    // IE 内核的浏览器，修复浏览器版本及兼容模式。\n    // 仅修改 IE 浏览器的版本，其他 IE 内核的版本不修改。\n    var browserVersion = d.browser.fullVersion;\n    if (browserName === \"ie\") {\n      browserVersion = ieCore.browserVersion;\n    }\n    var browserMode = ieCore.browserMode;\n    var vb = parseFloat(browserVersion);\n    d.browser = {\n      name: browserName,\n      version: vb,\n      fullVersion: browserVersion,\n      mode: parseFloat(browserMode),\n      fullMode: browserMode,\n      compatible: ieCore ? ieCore.compatible : false\n    };\n    d.browser[browserName] = vb;\n  }\n  return d;\n}\n\nvar Tan = WebParse(ua);\nTan.parse = WebParse;\nmodule.exports = Tan;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/web-detector/lib/web-detector.js\n ** module id = 15\n ** module chunks = 0\n **/","/*!\n * https://github.com/es-shims/es5-shim\n * @license es5-shim Copyright 2009-2015 by contributors, MIT License\n * see https://github.com/es-shims/es5-shim/blob/master/LICENSE\n */\n\n// vim: ts=4 sts=4 sw=4 expandtab\n\n// Add semicolon to prevent IIFE from being passed as argument to concatenated code.\n;\n\n// UMD (Universal Module Definition)\n// see https://github.com/umdjs/umd/blob/master/templates/returnExports.js\n(function (root, factory) {\n    'use strict';\n\n    /* global define, exports, module */\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory();\n    }\n}(this, function () {\n\n/**\n * Brings an environment as close to ECMAScript 5 compliance\n * as is possible with the facilities of erstwhile engines.\n *\n * Annotated ES5: http://es5.github.com/ (specific links below)\n * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf\n * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/\n */\n\n// Shortcut to an often accessed properties, in order to avoid multiple\n// dereference that costs universally. This also holds a reference to known-good\n// functions.\nvar $Array = Array;\nvar ArrayPrototype = $Array.prototype;\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\nvar $Function = Function;\nvar FunctionPrototype = $Function.prototype;\nvar $String = String;\nvar StringPrototype = $String.prototype;\nvar $Number = Number;\nvar NumberPrototype = $Number.prototype;\nvar array_slice = ArrayPrototype.slice;\nvar array_splice = ArrayPrototype.splice;\nvar array_push = ArrayPrototype.push;\nvar array_unshift = ArrayPrototype.unshift;\nvar array_concat = ArrayPrototype.concat;\nvar array_join = ArrayPrototype.join;\nvar call = FunctionPrototype.call;\nvar apply = FunctionPrototype.apply;\nvar max = Math.max;\nvar min = Math.min;\n\n// Having a toString local variable name breaks in Opera so use to_string.\nvar to_string = ObjectPrototype.toString;\n\n/* global Symbol */\n/* eslint-disable one-var-declaration-per-line, no-redeclare, max-statements-per-line */\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\nvar isCallable; /* inlined from https://npmjs.com/is-callable */ var fnToStr = Function.prototype.toString, constructorRegex = /^\\s*class /, isES6ClassFn = function isES6ClassFn(value) { try { var fnStr = fnToStr.call(value); var singleStripped = fnStr.replace(/\\/\\/.*\\n/g, ''); var multiStripped = singleStripped.replace(/\\/\\*[.\\s\\S]*\\*\\//g, ''); var spaceStripped = multiStripped.replace(/\\n/mg, ' ').replace(/ {2}/g, ' '); return constructorRegex.test(spaceStripped); } catch (e) { return false; /* not a function */ } }, tryFunctionObject = function tryFunctionObject(value) { try { if (isES6ClassFn(value)) { return false; } fnToStr.call(value); return true; } catch (e) { return false; } }, fnClass = '[object Function]', genClass = '[object GeneratorFunction]', isCallable = function isCallable(value) { if (!value) { return false; } if (typeof value !== 'function' && typeof value !== 'object') { return false; } if (hasToStringTag) { return tryFunctionObject(value); } if (isES6ClassFn(value)) { return false; } var strClass = to_string.call(value); return strClass === fnClass || strClass === genClass; };\n\nvar isRegex; /* inlined from https://npmjs.com/is-regex */ var regexExec = RegExp.prototype.exec, tryRegexExec = function tryRegexExec(value) { try { regexExec.call(value); return true; } catch (e) { return false; } }, regexClass = '[object RegExp]'; isRegex = function isRegex(value) { if (typeof value !== 'object') { return false; } return hasToStringTag ? tryRegexExec(value) : to_string.call(value) === regexClass; };\nvar isString; /* inlined from https://npmjs.com/is-string */ var strValue = String.prototype.valueOf, tryStringObject = function tryStringObject(value) { try { strValue.call(value); return true; } catch (e) { return false; } }, stringClass = '[object String]'; isString = function isString(value) { if (typeof value === 'string') { return true; } if (typeof value !== 'object') { return false; } return hasToStringTag ? tryStringObject(value) : to_string.call(value) === stringClass; };\n/* eslint-enable one-var-declaration-per-line, no-redeclare, max-statements-per-line */\n\n/* inlined from http://npmjs.com/define-properties */\nvar supportsDescriptors = $Object.defineProperty && (function () {\n    try {\n        var obj = {};\n        $Object.defineProperty(obj, 'x', { enumerable: false, value: obj });\n        for (var _ in obj) { return false; }\n        return obj.x === obj;\n    } catch (e) { /* this is ES3 */\n        return false;\n    }\n}());\nvar defineProperties = (function (has) {\n  // Define configurable, writable, and non-enumerable props\n  // if they don't exist.\n  var defineProperty;\n  if (supportsDescriptors) {\n      defineProperty = function (object, name, method, forceAssign) {\n          if (!forceAssign && (name in object)) { return; }\n          $Object.defineProperty(object, name, {\n              configurable: true,\n              enumerable: false,\n              writable: true,\n              value: method\n          });\n      };\n  } else {\n      defineProperty = function (object, name, method, forceAssign) {\n          if (!forceAssign && (name in object)) { return; }\n          object[name] = method;\n      };\n  }\n  return function defineProperties(object, map, forceAssign) {\n      for (var name in map) {\n          if (has.call(map, name)) {\n            defineProperty(object, name, map[name], forceAssign);\n          }\n      }\n  };\n}(ObjectPrototype.hasOwnProperty));\n\n//\n// Util\n// ======\n//\n\n/* replaceable with https://npmjs.com/package/es-abstract /helpers/isPrimitive */\nvar isPrimitive = function isPrimitive(input) {\n    var type = typeof input;\n    return input === null || (type !== 'object' && type !== 'function');\n};\n\nvar isActualNaN = $Number.isNaN || function (x) { return x !== x; };\n\nvar ES = {\n    // ES5 9.4\n    // http://es5.github.com/#x9.4\n    // http://jsperf.com/to-integer\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToInteger */\n    ToInteger: function ToInteger(num) {\n        var n = +num;\n        if (isActualNaN(n)) {\n            n = 0;\n        } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {\n            n = (n > 0 || -1) * Math.floor(Math.abs(n));\n        }\n        return n;\n    },\n\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToPrimitive */\n    ToPrimitive: function ToPrimitive(input) {\n        var val, valueOf, toStr;\n        if (isPrimitive(input)) {\n            return input;\n        }\n        valueOf = input.valueOf;\n        if (isCallable(valueOf)) {\n            val = valueOf.call(input);\n            if (isPrimitive(val)) {\n                return val;\n            }\n        }\n        toStr = input.toString;\n        if (isCallable(toStr)) {\n            val = toStr.call(input);\n            if (isPrimitive(val)) {\n                return val;\n            }\n        }\n        throw new TypeError();\n    },\n\n    // ES5 9.9\n    // http://es5.github.com/#x9.9\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToObject */\n    ToObject: function (o) {\n        if (o == null) { // this matches both null and undefined\n            throw new TypeError(\"can't convert \" + o + ' to object');\n        }\n        return $Object(o);\n    },\n\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToUint32 */\n    ToUint32: function ToUint32(x) {\n        return x >>> 0;\n    }\n};\n\n//\n// Function\n// ========\n//\n\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\nvar Empty = function Empty() {};\n\ndefineProperties(FunctionPrototype, {\n    bind: function bind(that) { // .length is 1\n        // 1. Let Target be the this value.\n        var target = this;\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\n        if (!isCallable(target)) {\n            throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n        }\n        // 3. Let A be a new (possibly empty) internal list of all of the\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\n        // XXX slicedArgs will stand in for \"A\" if used\n        var args = array_slice.call(arguments, 1); // for normal call\n        // 4. Let F be a new native ECMAScript object.\n        // 11. Set the [[Prototype]] internal property of F to the standard\n        //   built-in Function prototype object as specified in 15.3.3.1.\n        // 12. Set the [[Call]] internal property of F as described in\n        //   15.3.4.5.1.\n        // 13. Set the [[Construct]] internal property of F as described in\n        //   15.3.4.5.2.\n        // 14. Set the [[HasInstance]] internal property of F as described in\n        //   15.3.4.5.3.\n        var bound;\n        var binder = function () {\n\n            if (this instanceof bound) {\n                // 15.3.4.5.2 [[Construct]]\n                // When the [[Construct]] internal method of a function object,\n                // F that was created using the bind function is called with a\n                // list of arguments ExtraArgs, the following steps are taken:\n                // 1. Let target be the value of F's [[TargetFunction]]\n                //   internal property.\n                // 2. If target has no [[Construct]] internal method, a\n                //   TypeError exception is thrown.\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Construct]] internal\n                //   method of target providing args as the arguments.\n\n                var result = apply.call(\n                    target,\n                    this,\n                    array_concat.call(args, array_slice.call(arguments))\n                );\n                if ($Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                // 15.3.4.5.1 [[Call]]\n                // When the [[Call]] internal method of a function object, F,\n                // which was created using the bind function is called with a\n                // this value and a list of arguments ExtraArgs, the following\n                // steps are taken:\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\n                //   property.\n                // 3. Let target be the value of F's [[TargetFunction]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Call]] internal method\n                //   of target providing boundThis as the this value and\n                //   providing args as the arguments.\n\n                // equiv: target.call(this, ...boundArgs, ...args)\n                return apply.call(\n                    target,\n                    that,\n                    array_concat.call(args, array_slice.call(arguments))\n                );\n\n            }\n\n        };\n\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\n        //     a. Let L be the length property of Target minus the length of A.\n        //     b. Set the length own property of F to either 0 or L, whichever is\n        //       larger.\n        // 16. Else set the length own property of F to 0.\n\n        var boundLength = max(0, target.length - args.length);\n\n        // 17. Set the attributes of the length own property of F to the values\n        //   specified in 15.3.5.1.\n        var boundArgs = [];\n        for (var i = 0; i < boundLength; i++) {\n            array_push.call(boundArgs, '$' + i);\n        }\n\n        // XXX Build a dynamic function with desired amount of arguments is the only\n        // way to set the length property of a function.\n        // In environments where Content Security Policies enabled (Chrome extensions,\n        // for ex.) all use of eval or Function costructor throws an exception.\n        // However in all of these environments Function.prototype.bind exists\n        // and so this code will never be executed.\n        bound = $Function('binder', 'return function (' + array_join.call(boundArgs, ',') + '){ return binder.apply(this, arguments); }')(binder);\n\n        if (target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            // Clean up dangling references.\n            Empty.prototype = null;\n        }\n\n        // TODO\n        // 18. Set the [[Extensible]] internal property of F to true.\n\n        // TODO\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n        //   false.\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n        //   and false.\n\n        // TODO\n        // NOTE Function objects created using Function.prototype.bind do not\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\n        // [[Scope]] internal properties.\n        // XXX can't delete prototype in pure-js.\n\n        // 22. Return F.\n        return bound;\n    }\n});\n\n// _Please note: Shortcuts are defined after `Function.prototype.bind` as we\n// use it in defining shortcuts.\nvar owns = call.bind(ObjectPrototype.hasOwnProperty);\nvar toStr = call.bind(ObjectPrototype.toString);\nvar arraySlice = call.bind(array_slice);\nvar arraySliceApply = apply.bind(array_slice);\nvar strSlice = call.bind(StringPrototype.slice);\nvar strSplit = call.bind(StringPrototype.split);\nvar strIndexOf = call.bind(StringPrototype.indexOf);\nvar pushCall = call.bind(array_push);\nvar isEnum = call.bind(ObjectPrototype.propertyIsEnumerable);\nvar arraySort = call.bind(ArrayPrototype.sort);\n\n//\n// Array\n// =====\n//\n\nvar isArray = $Array.isArray || function isArray(obj) {\n    return toStr(obj) === '[object Array]';\n};\n\n// ES5 15.4.4.12\n// http://es5.github.com/#x15.4.4.13\n// Return len+argCount.\n// [bugfix, ielt8]\n// IE < 8 bug: [].unshift(0) === undefined but should be \"1\"\nvar hasUnshiftReturnValueBug = [].unshift(0) !== 1;\ndefineProperties(ArrayPrototype, {\n    unshift: function () {\n        array_unshift.apply(this, arguments);\n        return this.length;\n    }\n}, hasUnshiftReturnValueBug);\n\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\ndefineProperties($Array, { isArray: isArray });\n\n// The IsCallable() check in the Array functions\n// has been replaced with a strict check on the\n// internal class of the object to trap cases where\n// the provided function was actually a regular\n// expression literal, which in V8 and\n// JavaScriptCore is a typeof \"function\".  Only in\n// V8 are regular expression literals permitted as\n// reduce parameters, so it is desirable in the\n// general case for the shim to match the more\n// strict and common behavior of rejecting regular\n// expressions.\n\n// ES5 15.4.4.18\n// http://es5.github.com/#x15.4.4.18\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach\n\n// Check failure of by-index access of string characters (IE < 9)\n// and failure of `0 in boxedString` (Rhino)\nvar boxedString = $Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n    // Check node 0.6.21 bug where third parameter is not boxed\n    var properlyBoxesNonStrict = true;\n    var properlyBoxesStrict = true;\n    var threwException = false;\n    if (method) {\n        try {\n            method.call('foo', function (_, __, context) {\n                if (typeof context !== 'object') {\n                    properlyBoxesNonStrict = false;\n                }\n            });\n\n            method.call([1], function () {\n                'use strict';\n\n                properlyBoxesStrict = typeof this === 'string';\n            }, 'x');\n        } catch (e) {\n            threwException = true;\n        }\n    }\n    return !!method && !threwException && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n    forEach: function forEach(callbackfn/*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var i = -1;\n        var length = ES.ToUint32(self.length);\n        var T;\n        if (arguments.length > 1) {\n          T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.forEach callback must be a function');\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                // Invoke the callback function with call, passing arguments:\n                // context, property value, property key, thisArg object\n                if (typeof T === 'undefined') {\n                    callbackfn(self[i], i, object);\n                } else {\n                    callbackfn.call(T, self[i], i, object);\n                }\n            }\n        }\n    }\n}, !properlyBoxesContext(ArrayPrototype.forEach));\n\n// ES5 15.4.4.19\n// http://es5.github.com/#x15.4.4.19\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map\ndefineProperties(ArrayPrototype, {\n    map: function map(callbackfn/*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = ES.ToUint32(self.length);\n        var result = $Array(length);\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.map callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                if (typeof T === 'undefined') {\n                    result[i] = callbackfn(self[i], i, object);\n                } else {\n                    result[i] = callbackfn.call(T, self[i], i, object);\n                }\n            }\n        }\n        return result;\n    }\n}, !properlyBoxesContext(ArrayPrototype.map));\n\n// ES5 15.4.4.20\n// http://es5.github.com/#x15.4.4.20\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter\ndefineProperties(ArrayPrototype, {\n    filter: function filter(callbackfn/*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = ES.ToUint32(self.length);\n        var result = [];\n        var value;\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.filter callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                value = self[i];\n                if (typeof T === 'undefined' ? callbackfn(value, i, object) : callbackfn.call(T, value, i, object)) {\n                    pushCall(result, value);\n                }\n            }\n        }\n        return result;\n    }\n}, !properlyBoxesContext(ArrayPrototype.filter));\n\n// ES5 15.4.4.16\n// http://es5.github.com/#x15.4.4.16\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every\ndefineProperties(ArrayPrototype, {\n    every: function every(callbackfn/*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = ES.ToUint32(self.length);\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.every callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && !(typeof T === 'undefined' ? callbackfn(self[i], i, object) : callbackfn.call(T, self[i], i, object))) {\n                return false;\n            }\n        }\n        return true;\n    }\n}, !properlyBoxesContext(ArrayPrototype.every));\n\n// ES5 15.4.4.17\n// http://es5.github.com/#x15.4.4.17\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some\ndefineProperties(ArrayPrototype, {\n    some: function some(callbackfn/*, thisArg */) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = ES.ToUint32(self.length);\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.some callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && (typeof T === 'undefined' ? callbackfn(self[i], i, object) : callbackfn.call(T, self[i], i, object))) {\n                return true;\n            }\n        }\n        return false;\n    }\n}, !properlyBoxesContext(ArrayPrototype.some));\n\n// ES5 15.4.4.21\n// http://es5.github.com/#x15.4.4.21\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce\nvar reduceCoercesToObject = false;\nif (ArrayPrototype.reduce) {\n    reduceCoercesToObject = typeof ArrayPrototype.reduce.call('es5', function (_, __, ___, list) {\n        return list;\n    }) === 'object';\n}\ndefineProperties(ArrayPrototype, {\n    reduce: function reduce(callbackfn/*, initialValue*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = ES.ToUint32(self.length);\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.reduce callback must be a function');\n        }\n\n        // no value to return if no initial value and an empty array\n        if (length === 0 && arguments.length === 1) {\n            throw new TypeError('reduce of empty array with no initial value');\n        }\n\n        var i = 0;\n        var result;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i++];\n                    break;\n                }\n\n                // if array contains no values, no initial value to return\n                if (++i >= length) {\n                    throw new TypeError('reduce of empty array with no initial value');\n                }\n            } while (true);\n        }\n\n        for (; i < length; i++) {\n            if (i in self) {\n                result = callbackfn(result, self[i], i, object);\n            }\n        }\n\n        return result;\n    }\n}, !reduceCoercesToObject);\n\n// ES5 15.4.4.22\n// http://es5.github.com/#x15.4.4.22\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight\nvar reduceRightCoercesToObject = false;\nif (ArrayPrototype.reduceRight) {\n    reduceRightCoercesToObject = typeof ArrayPrototype.reduceRight.call('es5', function (_, __, ___, list) {\n        return list;\n    }) === 'object';\n}\ndefineProperties(ArrayPrototype, {\n    reduceRight: function reduceRight(callbackfn/*, initial*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = ES.ToUint32(self.length);\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.reduceRight callback must be a function');\n        }\n\n        // no value to return if no initial value, empty array\n        if (length === 0 && arguments.length === 1) {\n            throw new TypeError('reduceRight of empty array with no initial value');\n        }\n\n        var result;\n        var i = length - 1;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i--];\n                    break;\n                }\n\n                // if array contains no values, no initial value to return\n                if (--i < 0) {\n                    throw new TypeError('reduceRight of empty array with no initial value');\n                }\n            } while (true);\n        }\n\n        if (i < 0) {\n            return result;\n        }\n\n        do {\n            if (i in self) {\n                result = callbackfn(result, self[i], i, object);\n            }\n        } while (i--);\n\n        return result;\n    }\n}, !reduceRightCoercesToObject);\n\n// ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\nvar hasFirefox2IndexOfBug = ArrayPrototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n    indexOf: function indexOf(searchElement/*, fromIndex */) {\n        var self = splitString && isString(this) ? strSplit(this, '') : ES.ToObject(this);\n        var length = ES.ToUint32(self.length);\n\n        if (length === 0) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = ES.ToInteger(arguments[1]);\n        }\n\n        // handle negative indices\n        i = i >= 0 ? i : max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === searchElement) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2IndexOfBug);\n\n// ES5 15.4.4.15\n// http://es5.github.com/#x15.4.4.15\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf\nvar hasFirefox2LastIndexOfBug = ArrayPrototype.lastIndexOf && [0, 1].lastIndexOf(0, -3) !== -1;\ndefineProperties(ArrayPrototype, {\n    lastIndexOf: function lastIndexOf(searchElement/*, fromIndex */) {\n        var self = splitString && isString(this) ? strSplit(this, '') : ES.ToObject(this);\n        var length = ES.ToUint32(self.length);\n\n        if (length === 0) {\n            return -1;\n        }\n        var i = length - 1;\n        if (arguments.length > 1) {\n            i = min(i, ES.ToInteger(arguments[1]));\n        }\n        // handle negative indices\n        i = i >= 0 ? i : length - Math.abs(i);\n        for (; i >= 0; i--) {\n            if (i in self && searchElement === self[i]) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2LastIndexOfBug);\n\n// ES5 15.4.4.12\n// http://es5.github.com/#x15.4.4.12\nvar spliceNoopReturnsEmptyArray = (function () {\n    var a = [1, 2];\n    var result = a.splice();\n    return a.length === 2 && isArray(result) && result.length === 0;\n}());\ndefineProperties(ArrayPrototype, {\n    // Safari 5.0 bug where .splice() returns undefined\n    splice: function splice(start, deleteCount) {\n        if (arguments.length === 0) {\n            return [];\n        } else {\n            return array_splice.apply(this, arguments);\n        }\n    }\n}, !spliceNoopReturnsEmptyArray);\n\nvar spliceWorksWithEmptyObject = (function () {\n    var obj = {};\n    ArrayPrototype.splice.call(obj, 0, 0, 1);\n    return obj.length === 1;\n}());\ndefineProperties(ArrayPrototype, {\n    splice: function splice(start, deleteCount) {\n        if (arguments.length === 0) { return []; }\n        var args = arguments;\n        this.length = max(ES.ToInteger(this.length), 0);\n        if (arguments.length > 0 && typeof deleteCount !== 'number') {\n            args = arraySlice(arguments);\n            if (args.length < 2) {\n                pushCall(args, this.length - start);\n            } else {\n                args[1] = ES.ToInteger(deleteCount);\n            }\n        }\n        return array_splice.apply(this, args);\n    }\n}, !spliceWorksWithEmptyObject);\nvar spliceWorksWithLargeSparseArrays = (function () {\n    // Per https://github.com/es-shims/es5-shim/issues/295\n    // Safari 7/8 breaks with sparse arrays of size 1e5 or greater\n    var arr = new $Array(1e5);\n    // note: the index MUST be 8 or larger or the test will false pass\n    arr[8] = 'x';\n    arr.splice(1, 1);\n    // note: this test must be defined *after* the indexOf shim\n    // per https://github.com/es-shims/es5-shim/issues/313\n    return arr.indexOf('x') === 7;\n}());\nvar spliceWorksWithSmallSparseArrays = (function () {\n    // Per https://github.com/es-shims/es5-shim/issues/295\n    // Opera 12.15 breaks on this, no idea why.\n    var n = 256;\n    var arr = [];\n    arr[n] = 'a';\n    arr.splice(n + 1, 0, 'b');\n    return arr[n] === 'a';\n}());\ndefineProperties(ArrayPrototype, {\n    splice: function splice(start, deleteCount) {\n        var O = ES.ToObject(this);\n        var A = [];\n        var len = ES.ToUint32(O.length);\n        var relativeStart = ES.ToInteger(start);\n        var actualStart = relativeStart < 0 ? max((len + relativeStart), 0) : min(relativeStart, len);\n        var actualDeleteCount = min(max(ES.ToInteger(deleteCount), 0), len - actualStart);\n\n        var k = 0;\n        var from;\n        while (k < actualDeleteCount) {\n            from = $String(actualStart + k);\n            if (owns(O, from)) {\n                A[k] = O[from];\n            }\n            k += 1;\n        }\n\n        var items = arraySlice(arguments, 2);\n        var itemCount = items.length;\n        var to;\n        if (itemCount < actualDeleteCount) {\n            k = actualStart;\n            var maxK = len - actualDeleteCount;\n            while (k < maxK) {\n                from = $String(k + actualDeleteCount);\n                to = $String(k + itemCount);\n                if (owns(O, from)) {\n                    O[to] = O[from];\n                } else {\n                    delete O[to];\n                }\n                k += 1;\n            }\n            k = len;\n            var minK = len - actualDeleteCount + itemCount;\n            while (k > minK) {\n                delete O[k - 1];\n                k -= 1;\n            }\n        } else if (itemCount > actualDeleteCount) {\n            k = len - actualDeleteCount;\n            while (k > actualStart) {\n                from = $String(k + actualDeleteCount - 1);\n                to = $String(k + itemCount - 1);\n                if (owns(O, from)) {\n                    O[to] = O[from];\n                } else {\n                    delete O[to];\n                }\n                k -= 1;\n            }\n        }\n        k = actualStart;\n        for (var i = 0; i < items.length; ++i) {\n            O[k] = items[i];\n            k += 1;\n        }\n        O.length = len - actualDeleteCount + itemCount;\n\n        return A;\n    }\n}, !spliceWorksWithLargeSparseArrays || !spliceWorksWithSmallSparseArrays);\n\nvar originalJoin = ArrayPrototype.join;\nvar hasStringJoinBug;\ntry {\n    hasStringJoinBug = Array.prototype.join.call('123', ',') !== '1,2,3';\n} catch (e) {\n    hasStringJoinBug = true;\n}\nif (hasStringJoinBug) {\n    defineProperties(ArrayPrototype, {\n        join: function join(separator) {\n            var sep = typeof separator === 'undefined' ? ',' : separator;\n            return originalJoin.call(isString(this) ? strSplit(this, '') : this, sep);\n        }\n    }, hasStringJoinBug);\n}\n\nvar hasJoinUndefinedBug = [1, 2].join(undefined) !== '1,2';\nif (hasJoinUndefinedBug) {\n    defineProperties(ArrayPrototype, {\n        join: function join(separator) {\n            var sep = typeof separator === 'undefined' ? ',' : separator;\n            return originalJoin.call(this, sep);\n        }\n    }, hasJoinUndefinedBug);\n}\n\nvar pushShim = function push(item) {\n    var O = ES.ToObject(this);\n    var n = ES.ToUint32(O.length);\n    var i = 0;\n    while (i < arguments.length) {\n        O[n + i] = arguments[i];\n        i += 1;\n    }\n    O.length = n + i;\n    return n + i;\n};\n\nvar pushIsNotGeneric = (function () {\n    var obj = {};\n    var result = Array.prototype.push.call(obj, undefined);\n    return result !== 1 || obj.length !== 1 || typeof obj[0] !== 'undefined' || !owns(obj, 0);\n}());\ndefineProperties(ArrayPrototype, {\n    push: function push(item) {\n        if (isArray(this)) {\n            return array_push.apply(this, arguments);\n        }\n        return pushShim.apply(this, arguments);\n    }\n}, pushIsNotGeneric);\n\n// This fixes a very weird bug in Opera 10.6 when pushing `undefined\nvar pushUndefinedIsWeird = (function () {\n    var arr = [];\n    var result = arr.push(undefined);\n    return result !== 1 || arr.length !== 1 || typeof arr[0] !== 'undefined' || !owns(arr, 0);\n}());\ndefineProperties(ArrayPrototype, { push: pushShim }, pushUndefinedIsWeird);\n\n// ES5 15.2.3.14\n// http://es5.github.io/#x15.4.4.10\n// Fix boxed string bug\ndefineProperties(ArrayPrototype, {\n    slice: function (start, end) {\n        var arr = isString(this) ? strSplit(this, '') : this;\n        return arraySliceApply(arr, arguments);\n    }\n}, splitString);\n\nvar sortIgnoresNonFunctions = (function () {\n    try {\n        [1, 2].sort(null);\n        [1, 2].sort({});\n        return true;\n    } catch (e) { /**/ }\n    return false;\n}());\nvar sortThrowsOnRegex = (function () {\n    // this is a problem in Firefox 4, in which `typeof /a/ === 'function'`\n    try {\n        [1, 2].sort(/a/);\n        return false;\n    } catch (e) { /**/ }\n    return true;\n}());\nvar sortIgnoresUndefined = (function () {\n    // applies in IE 8, for one.\n    try {\n        [1, 2].sort(undefined);\n        return true;\n    } catch (e) { /**/ }\n    return false;\n}());\ndefineProperties(ArrayPrototype, {\n    sort: function sort(compareFn) {\n        if (typeof compareFn === 'undefined') {\n            return arraySort(this);\n        }\n        if (!isCallable(compareFn)) {\n            throw new TypeError('Array.prototype.sort callback must be a function');\n        }\n        return arraySort(this, compareFn);\n    }\n}, sortIgnoresNonFunctions || !sortIgnoresUndefined || !sortThrowsOnRegex);\n\n//\n// Object\n// ======\n//\n\n// ES5 15.2.3.14\n// http://es5.github.com/#x15.2.3.14\n\n// http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation\nvar hasDontEnumBug = !({ 'toString': null }).propertyIsEnumerable('toString');\nvar hasProtoEnumBug = function () {}.propertyIsEnumerable('prototype');\nvar hasStringEnumBug = !owns('x', '0');\nvar equalsConstructorPrototype = function (o) {\n    var ctor = o.constructor;\n    return ctor && ctor.prototype === o;\n};\nvar blacklistedKeys = {\n    $window: true,\n    $console: true,\n    $parent: true,\n    $self: true,\n    $frame: true,\n    $frames: true,\n    $frameElement: true,\n    $webkitIndexedDB: true,\n    $webkitStorageInfo: true,\n    $external: true\n};\nvar hasAutomationEqualityBug = (function () {\n    /* globals window */\n    if (typeof window === 'undefined') { return false; }\n    for (var k in window) {\n        try {\n            if (!blacklistedKeys['$' + k] && owns(window, k) && window[k] !== null && typeof window[k] === 'object') {\n                equalsConstructorPrototype(window[k]);\n            }\n        } catch (e) {\n            return true;\n        }\n    }\n    return false;\n}());\nvar equalsConstructorPrototypeIfNotBuggy = function (object) {\n    if (typeof window === 'undefined' || !hasAutomationEqualityBug) { return equalsConstructorPrototype(object); }\n    try {\n        return equalsConstructorPrototype(object);\n    } catch (e) {\n        return false;\n    }\n};\nvar dontEnums = [\n    'toString',\n    'toLocaleString',\n    'valueOf',\n    'hasOwnProperty',\n    'isPrototypeOf',\n    'propertyIsEnumerable',\n    'constructor'\n];\nvar dontEnumsLength = dontEnums.length;\n\n// taken directly from https://github.com/ljharb/is-arguments/blob/master/index.js\n// can be replaced with require('is-arguments') if we ever use a build process instead\nvar isStandardArguments = function isArguments(value) {\n    return toStr(value) === '[object Arguments]';\n};\nvar isLegacyArguments = function isArguments(value) {\n    return value !== null &&\n        typeof value === 'object' &&\n        typeof value.length === 'number' &&\n        value.length >= 0 &&\n        !isArray(value) &&\n        isCallable(value.callee);\n};\nvar isArguments = isStandardArguments(arguments) ? isStandardArguments : isLegacyArguments;\n\ndefineProperties($Object, {\n    keys: function keys(object) {\n        var isFn = isCallable(object);\n        var isArgs = isArguments(object);\n        var isObject = object !== null && typeof object === 'object';\n        var isStr = isObject && isString(object);\n\n        if (!isObject && !isFn && !isArgs) {\n            throw new TypeError('Object.keys called on a non-object');\n        }\n\n        var theKeys = [];\n        var skipProto = hasProtoEnumBug && isFn;\n        if ((isStr && hasStringEnumBug) || isArgs) {\n            for (var i = 0; i < object.length; ++i) {\n                pushCall(theKeys, $String(i));\n            }\n        }\n\n        if (!isArgs) {\n            for (var name in object) {\n                if (!(skipProto && name === 'prototype') && owns(object, name)) {\n                    pushCall(theKeys, $String(name));\n                }\n            }\n        }\n\n        if (hasDontEnumBug) {\n            var skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n            for (var j = 0; j < dontEnumsLength; j++) {\n                var dontEnum = dontEnums[j];\n                if (!(skipConstructor && dontEnum === 'constructor') && owns(object, dontEnum)) {\n                    pushCall(theKeys, dontEnum);\n                }\n            }\n        }\n        return theKeys;\n    }\n});\n\nvar keysWorksWithArguments = $Object.keys && (function () {\n    // Safari 5.0 bug\n    return $Object.keys(arguments).length === 2;\n}(1, 2));\nvar keysHasArgumentsLengthBug = $Object.keys && (function () {\n    var argKeys = $Object.keys(arguments);\n    return arguments.length !== 1 || argKeys.length !== 1 || argKeys[0] !== 1;\n}(1));\nvar originalKeys = $Object.keys;\ndefineProperties($Object, {\n    keys: function keys(object) {\n        if (isArguments(object)) {\n            return originalKeys(arraySlice(object));\n        } else {\n            return originalKeys(object);\n        }\n    }\n}, !keysWorksWithArguments || keysHasArgumentsLengthBug);\n\n//\n// Date\n// ====\n//\n\nvar hasNegativeMonthYearBug = new Date(-3509827329600292).getUTCMonth() !== 0;\nvar aNegativeTestDate = new Date(-1509842289600292);\nvar aPositiveTestDate = new Date(1449662400000);\nvar hasToUTCStringFormatBug = aNegativeTestDate.toUTCString() !== 'Mon, 01 Jan -45875 11:59:59 GMT';\nvar hasToDateStringFormatBug;\nvar hasToStringFormatBug;\nvar timeZoneOffset = aNegativeTestDate.getTimezoneOffset();\nif (timeZoneOffset < -720) {\n    hasToDateStringFormatBug = aNegativeTestDate.toDateString() !== 'Tue Jan 02 -45875';\n    hasToStringFormatBug = !(/^Thu Dec 10 2015 \\d\\d:\\d\\d:\\d\\d GMT[-\\+]\\d\\d\\d\\d(?: |$)/).test(aPositiveTestDate.toString());\n} else {\n    hasToDateStringFormatBug = aNegativeTestDate.toDateString() !== 'Mon Jan 01 -45875';\n    hasToStringFormatBug = !(/^Wed Dec 09 2015 \\d\\d:\\d\\d:\\d\\d GMT[-\\+]\\d\\d\\d\\d(?: |$)/).test(aPositiveTestDate.toString());\n}\n\nvar originalGetFullYear = call.bind(Date.prototype.getFullYear);\nvar originalGetMonth = call.bind(Date.prototype.getMonth);\nvar originalGetDate = call.bind(Date.prototype.getDate);\nvar originalGetUTCFullYear = call.bind(Date.prototype.getUTCFullYear);\nvar originalGetUTCMonth = call.bind(Date.prototype.getUTCMonth);\nvar originalGetUTCDate = call.bind(Date.prototype.getUTCDate);\nvar originalGetUTCDay = call.bind(Date.prototype.getUTCDay);\nvar originalGetUTCHours = call.bind(Date.prototype.getUTCHours);\nvar originalGetUTCMinutes = call.bind(Date.prototype.getUTCMinutes);\nvar originalGetUTCSeconds = call.bind(Date.prototype.getUTCSeconds);\nvar originalGetUTCMilliseconds = call.bind(Date.prototype.getUTCMilliseconds);\nvar dayName = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nvar monthName = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar daysInMonth = function daysInMonth(month, year) {\n    return originalGetDate(new Date(year, month, 0));\n};\n\ndefineProperties(Date.prototype, {\n    getFullYear: function getFullYear() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var year = originalGetFullYear(this);\n        if (year < 0 && originalGetMonth(this) > 11) {\n            return year + 1;\n        }\n        return year;\n    },\n    getMonth: function getMonth() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var year = originalGetFullYear(this);\n        var month = originalGetMonth(this);\n        if (year < 0 && month > 11) {\n            return 0;\n        }\n        return month;\n    },\n    getDate: function getDate() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var year = originalGetFullYear(this);\n        var month = originalGetMonth(this);\n        var date = originalGetDate(this);\n        if (year < 0 && month > 11) {\n            if (month === 12) {\n                return date;\n            }\n            var days = daysInMonth(0, year + 1);\n            return (days - date) + 1;\n        }\n        return date;\n    },\n    getUTCFullYear: function getUTCFullYear() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var year = originalGetUTCFullYear(this);\n        if (year < 0 && originalGetUTCMonth(this) > 11) {\n            return year + 1;\n        }\n        return year;\n    },\n    getUTCMonth: function getUTCMonth() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var year = originalGetUTCFullYear(this);\n        var month = originalGetUTCMonth(this);\n        if (year < 0 && month > 11) {\n            return 0;\n        }\n        return month;\n    },\n    getUTCDate: function getUTCDate() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var year = originalGetUTCFullYear(this);\n        var month = originalGetUTCMonth(this);\n        var date = originalGetUTCDate(this);\n        if (year < 0 && month > 11) {\n            if (month === 12) {\n                return date;\n            }\n            var days = daysInMonth(0, year + 1);\n            return (days - date) + 1;\n        }\n        return date;\n    }\n}, hasNegativeMonthYearBug);\n\ndefineProperties(Date.prototype, {\n    toUTCString: function toUTCString() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var day = originalGetUTCDay(this);\n        var date = originalGetUTCDate(this);\n        var month = originalGetUTCMonth(this);\n        var year = originalGetUTCFullYear(this);\n        var hour = originalGetUTCHours(this);\n        var minute = originalGetUTCMinutes(this);\n        var second = originalGetUTCSeconds(this);\n        return dayName[day] + ', ' +\n            (date < 10 ? '0' + date : date) + ' ' +\n            monthName[month] + ' ' +\n            year + ' ' +\n            (hour < 10 ? '0' + hour : hour) + ':' +\n            (minute < 10 ? '0' + minute : minute) + ':' +\n            (second < 10 ? '0' + second : second) + ' GMT';\n    }\n}, hasNegativeMonthYearBug || hasToUTCStringFormatBug);\n\n// Opera 12 has `,`\ndefineProperties(Date.prototype, {\n    toDateString: function toDateString() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var day = this.getDay();\n        var date = this.getDate();\n        var month = this.getMonth();\n        var year = this.getFullYear();\n        return dayName[day] + ' ' +\n            monthName[month] + ' ' +\n            (date < 10 ? '0' + date : date) + ' ' +\n            year;\n    }\n}, hasNegativeMonthYearBug || hasToDateStringFormatBug);\n\n// can't use defineProperties here because of toString enumeration issue in IE <= 8\nif (hasNegativeMonthYearBug || hasToStringFormatBug) {\n    Date.prototype.toString = function toString() {\n        if (!this || !(this instanceof Date)) {\n            throw new TypeError('this is not a Date object.');\n        }\n        var day = this.getDay();\n        var date = this.getDate();\n        var month = this.getMonth();\n        var year = this.getFullYear();\n        var hour = this.getHours();\n        var minute = this.getMinutes();\n        var second = this.getSeconds();\n        var timezoneOffset = this.getTimezoneOffset();\n        var hoursOffset = Math.floor(Math.abs(timezoneOffset) / 60);\n        var minutesOffset = Math.floor(Math.abs(timezoneOffset) % 60);\n        return dayName[day] + ' ' +\n            monthName[month] + ' ' +\n            (date < 10 ? '0' + date : date) + ' ' +\n            year + ' ' +\n            (hour < 10 ? '0' + hour : hour) + ':' +\n            (minute < 10 ? '0' + minute : minute) + ':' +\n            (second < 10 ? '0' + second : second) + ' GMT' +\n            (timezoneOffset > 0 ? '-' : '+') +\n            (hoursOffset < 10 ? '0' + hoursOffset : hoursOffset) +\n            (minutesOffset < 10 ? '0' + minutesOffset : minutesOffset);\n    };\n    if (supportsDescriptors) {\n        $Object.defineProperty(Date.prototype, 'toString', {\n            configurable: true,\n            enumerable: false,\n            writable: true\n        });\n    }\n}\n\n// ES5 15.9.5.43\n// http://es5.github.com/#x15.9.5.43\n// This function returns a String value represent the instance in time\n// represented by this Date object. The format of the String is the Date Time\n// string format defined in 15.9.1.15. All fields are present in the String.\n// The time zone is always UTC, denoted by the suffix Z. If the time value of\n// this object is not a finite Number a RangeError exception is thrown.\nvar negativeDate = -62198755200000;\nvar negativeYearString = '-000001';\nvar hasNegativeDateBug = Date.prototype.toISOString && new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1;\nvar hasSafari51DateBug = Date.prototype.toISOString && new Date(-1).toISOString() !== '1969-12-31T23:59:59.999Z';\n\nvar getTime = call.bind(Date.prototype.getTime);\n\ndefineProperties(Date.prototype, {\n    toISOString: function toISOString() {\n        if (!isFinite(this) || !isFinite(getTime(this))) {\n            // Adope Photoshop requires the second check.\n            throw new RangeError('Date.prototype.toISOString called on non-finite value.');\n        }\n\n        var year = originalGetUTCFullYear(this);\n\n        var month = originalGetUTCMonth(this);\n        // see https://github.com/es-shims/es5-shim/issues/111\n        year += Math.floor(month / 12);\n        month = (month % 12 + 12) % 12;\n\n        // the date time string format is specified in 15.9.1.15.\n        var result = [month + 1, originalGetUTCDate(this), originalGetUTCHours(this), originalGetUTCMinutes(this), originalGetUTCSeconds(this)];\n        year = (\n            (year < 0 ? '-' : (year > 9999 ? '+' : '')) +\n            strSlice('00000' + Math.abs(year), (0 <= year && year <= 9999) ? -4 : -6)\n        );\n\n        for (var i = 0; i < result.length; ++i) {\n          // pad months, days, hours, minutes, and seconds to have two digits.\n          result[i] = strSlice('00' + result[i], -2);\n        }\n        // pad milliseconds to have three digits.\n        return (\n            year + '-' + arraySlice(result, 0, 2).join('-') +\n            'T' + arraySlice(result, 2).join(':') + '.' +\n            strSlice('000' + originalGetUTCMilliseconds(this), -3) + 'Z'\n        );\n    }\n}, hasNegativeDateBug || hasSafari51DateBug);\n\n// ES5 15.9.5.44\n// http://es5.github.com/#x15.9.5.44\n// This function provides a String representation of a Date object for use by\n// JSON.stringify (15.12.3).\nvar dateToJSONIsSupported = (function () {\n    try {\n        return Date.prototype.toJSON &&\n            new Date(NaN).toJSON() === null &&\n            new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &&\n            Date.prototype.toJSON.call({ // generic\n                toISOString: function () { return true; }\n            });\n    } catch (e) {\n        return false;\n    }\n}());\nif (!dateToJSONIsSupported) {\n    Date.prototype.toJSON = function toJSON(key) {\n        // When the toJSON method is called with argument key, the following\n        // steps are taken:\n\n        // 1.  Let O be the result of calling ToObject, giving it the this\n        // value as its argument.\n        // 2. Let tv be ES.ToPrimitive(O, hint Number).\n        var O = $Object(this);\n        var tv = ES.ToPrimitive(O);\n        // 3. If tv is a Number and is not finite, return null.\n        if (typeof tv === 'number' && !isFinite(tv)) {\n            return null;\n        }\n        // 4. Let toISO be the result of calling the [[Get]] internal method of\n        // O with argument \"toISOString\".\n        var toISO = O.toISOString;\n        // 5. If IsCallable(toISO) is false, throw a TypeError exception.\n        if (!isCallable(toISO)) {\n            throw new TypeError('toISOString property is not callable');\n        }\n        // 6. Return the result of calling the [[Call]] internal method of\n        //  toISO with O as the this value and an empty argument list.\n        return toISO.call(O);\n\n        // NOTE 1 The argument is ignored.\n\n        // NOTE 2 The toJSON function is intentionally generic; it does not\n        // require that its this value be a Date object. Therefore, it can be\n        // transferred to other kinds of objects for use as a method. However,\n        // it does require that any such object have a toISOString method. An\n        // object is free to use the argument key to filter its\n        // stringification.\n    };\n}\n\n// ES5 15.9.4.2\n// http://es5.github.com/#x15.9.4.2\n// based on work shared by Daniel Friesen (dantman)\n// http://gist.github.com/303249\nvar supportsExtendedYears = Date.parse('+033658-09-27T01:46:40.000Z') === 1e15;\nvar acceptsInvalidDates = !isNaN(Date.parse('2012-04-04T24:00:00.500Z')) || !isNaN(Date.parse('2012-11-31T23:59:59.000Z')) || !isNaN(Date.parse('2012-12-31T23:59:60.000Z'));\nvar doesNotParseY2KNewYear = isNaN(Date.parse('2000-01-01T00:00:00.000Z'));\nif (doesNotParseY2KNewYear || acceptsInvalidDates || !supportsExtendedYears) {\n    // XXX global assignment won't work in embeddings that use\n    // an alternate object for the context.\n    /* global Date: true */\n    /* eslint-disable no-undef */\n    var maxSafeUnsigned32Bit = Math.pow(2, 31) - 1;\n    var hasSafariSignedIntBug = isActualNaN(new Date(1970, 0, 1, 0, 0, 0, maxSafeUnsigned32Bit + 1).getTime());\n    /* eslint-disable no-implicit-globals */\n    Date = (function (NativeDate) {\n    /* eslint-enable no-implicit-globals */\n    /* eslint-enable no-undef */\n        // Date.length === 7\n        var DateShim = function Date(Y, M, D, h, m, s, ms) {\n            var length = arguments.length;\n            var date;\n            if (this instanceof NativeDate) {\n                var seconds = s;\n                var millis = ms;\n                if (hasSafariSignedIntBug && length >= 7 && ms > maxSafeUnsigned32Bit) {\n                    // work around a Safari 8/9 bug where it treats the seconds as signed\n                    var msToShift = Math.floor(ms / maxSafeUnsigned32Bit) * maxSafeUnsigned32Bit;\n                    var sToShift = Math.floor(msToShift / 1e3);\n                    seconds += sToShift;\n                    millis -= sToShift * 1e3;\n                }\n                date = length === 1 && $String(Y) === Y ? // isString(Y)\n                    // We explicitly pass it through parse:\n                    new NativeDate(DateShim.parse(Y)) :\n                    // We have to manually make calls depending on argument\n                    // length here\n                    length >= 7 ? new NativeDate(Y, M, D, h, m, seconds, millis) :\n                    length >= 6 ? new NativeDate(Y, M, D, h, m, seconds) :\n                    length >= 5 ? new NativeDate(Y, M, D, h, m) :\n                    length >= 4 ? new NativeDate(Y, M, D, h) :\n                    length >= 3 ? new NativeDate(Y, M, D) :\n                    length >= 2 ? new NativeDate(Y, M) :\n                    length >= 1 ? new NativeDate(Y instanceof NativeDate ? +Y : Y) :\n                                  new NativeDate();\n            } else {\n                date = NativeDate.apply(this, arguments);\n            }\n            if (!isPrimitive(date)) {\n              // Prevent mixups with unfixed Date object\n              defineProperties(date, { constructor: DateShim }, true);\n            }\n            return date;\n        };\n\n        // 15.9.1.15 Date Time String Format.\n        var isoDateExpression = new RegExp('^' +\n            '(\\\\d{4}|[+-]\\\\d{6})' + // four-digit year capture or sign +\n                                      // 6-digit extended year\n            '(?:-(\\\\d{2})' + // optional month capture\n            '(?:-(\\\\d{2})' + // optional day capture\n            '(?:' + // capture hours:minutes:seconds.milliseconds\n                'T(\\\\d{2})' + // hours capture\n                ':(\\\\d{2})' + // minutes capture\n                '(?:' + // optional :seconds.milliseconds\n                    ':(\\\\d{2})' + // seconds capture\n                    '(?:(\\\\.\\\\d{1,}))?' + // milliseconds capture\n                ')?' +\n            '(' + // capture UTC offset component\n                'Z|' + // UTC capture\n                '(?:' + // offset specifier +/-hours:minutes\n                    '([-+])' + // sign capture\n                    '(\\\\d{2})' + // hours offset capture\n                    ':(\\\\d{2})' + // minutes offset capture\n                ')' +\n            ')?)?)?)?' +\n        '$');\n\n        var months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365];\n\n        var dayFromMonth = function dayFromMonth(year, month) {\n            var t = month > 1 ? 1 : 0;\n            return (\n                months[month] +\n                Math.floor((year - 1969 + t) / 4) -\n                Math.floor((year - 1901 + t) / 100) +\n                Math.floor((year - 1601 + t) / 400) +\n                365 * (year - 1970)\n            );\n        };\n\n        var toUTC = function toUTC(t) {\n            var s = 0;\n            var ms = t;\n            if (hasSafariSignedIntBug && ms > maxSafeUnsigned32Bit) {\n                // work around a Safari 8/9 bug where it treats the seconds as signed\n                var msToShift = Math.floor(ms / maxSafeUnsigned32Bit) * maxSafeUnsigned32Bit;\n                var sToShift = Math.floor(msToShift / 1e3);\n                s += sToShift;\n                ms -= sToShift * 1e3;\n            }\n            return $Number(new NativeDate(1970, 0, 1, 0, 0, s, ms));\n        };\n\n        // Copy any custom methods a 3rd party library may have added\n        for (var key in NativeDate) {\n            if (owns(NativeDate, key)) {\n                DateShim[key] = NativeDate[key];\n            }\n        }\n\n        // Copy \"native\" methods explicitly; they may be non-enumerable\n        defineProperties(DateShim, {\n            now: NativeDate.now,\n            UTC: NativeDate.UTC\n        }, true);\n        DateShim.prototype = NativeDate.prototype;\n        defineProperties(DateShim.prototype, {\n            constructor: DateShim\n        }, true);\n\n        // Upgrade Date.parse to handle simplified ISO 8601 strings\n        var parseShim = function parse(string) {\n            var match = isoDateExpression.exec(string);\n            if (match) {\n                // parse months, days, hours, minutes, seconds, and milliseconds\n                // provide default values if necessary\n                // parse the UTC offset component\n                var year = $Number(match[1]),\n                    month = $Number(match[2] || 1) - 1,\n                    day = $Number(match[3] || 1) - 1,\n                    hour = $Number(match[4] || 0),\n                    minute = $Number(match[5] || 0),\n                    second = $Number(match[6] || 0),\n                    millisecond = Math.floor($Number(match[7] || 0) * 1000),\n                    // When time zone is missed, local offset should be used\n                    // (ES 5.1 bug)\n                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112\n                    isLocalTime = Boolean(match[4] && !match[8]),\n                    signOffset = match[9] === '-' ? 1 : -1,\n                    hourOffset = $Number(match[10] || 0),\n                    minuteOffset = $Number(match[11] || 0),\n                    result;\n                var hasMinutesOrSecondsOrMilliseconds = minute > 0 || second > 0 || millisecond > 0;\n                if (\n                    hour < (hasMinutesOrSecondsOrMilliseconds ? 24 : 25) &&\n                    minute < 60 && second < 60 && millisecond < 1000 &&\n                    month > -1 && month < 12 && hourOffset < 24 &&\n                    minuteOffset < 60 && // detect invalid offsets\n                    day > -1 &&\n                    day < (dayFromMonth(year, month + 1) - dayFromMonth(year, month))\n                ) {\n                    result = (\n                        (dayFromMonth(year, month) + day) * 24 +\n                        hour +\n                        hourOffset * signOffset\n                    ) * 60;\n                    result = (\n                        (result + minute + minuteOffset * signOffset) * 60 +\n                        second\n                    ) * 1000 + millisecond;\n                    if (isLocalTime) {\n                        result = toUTC(result);\n                    }\n                    if (-8.64e15 <= result && result <= 8.64e15) {\n                        return result;\n                    }\n                }\n                return NaN;\n            }\n            return NativeDate.parse.apply(this, arguments);\n        };\n        defineProperties(DateShim, { parse: parseShim });\n\n        return DateShim;\n    }(Date));\n    /* global Date: false */\n}\n\n// ES5 15.9.4.4\n// http://es5.github.com/#x15.9.4.4\nif (!Date.now) {\n    Date.now = function now() {\n        return new Date().getTime();\n    };\n}\n\n//\n// Number\n// ======\n//\n\n// ES5.1 15.7.4.5\n// http://es5.github.com/#x15.7.4.5\nvar hasToFixedBugs = NumberPrototype.toFixed && (\n  (0.00008).toFixed(3) !== '0.000' ||\n  (0.9).toFixed(0) !== '1' ||\n  (1.255).toFixed(2) !== '1.25' ||\n  (1000000000000000128).toFixed(0) !== '1000000000000000128'\n);\n\nvar toFixedHelpers = {\n  base: 1e7,\n  size: 6,\n  data: [0, 0, 0, 0, 0, 0],\n  multiply: function multiply(n, c) {\n      var i = -1;\n      var c2 = c;\n      while (++i < toFixedHelpers.size) {\n          c2 += n * toFixedHelpers.data[i];\n          toFixedHelpers.data[i] = c2 % toFixedHelpers.base;\n          c2 = Math.floor(c2 / toFixedHelpers.base);\n      }\n  },\n  divide: function divide(n) {\n      var i = toFixedHelpers.size;\n      var c = 0;\n      while (--i >= 0) {\n          c += toFixedHelpers.data[i];\n          toFixedHelpers.data[i] = Math.floor(c / n);\n          c = (c % n) * toFixedHelpers.base;\n      }\n  },\n  numToString: function numToString() {\n      var i = toFixedHelpers.size;\n      var s = '';\n      while (--i >= 0) {\n          if (s !== '' || i === 0 || toFixedHelpers.data[i] !== 0) {\n              var t = $String(toFixedHelpers.data[i]);\n              if (s === '') {\n                  s = t;\n              } else {\n                  s += strSlice('0000000', 0, 7 - t.length) + t;\n              }\n          }\n      }\n      return s;\n  },\n  pow: function pow(x, n, acc) {\n      return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));\n  },\n  log: function log(x) {\n      var n = 0;\n      var x2 = x;\n      while (x2 >= 4096) {\n          n += 12;\n          x2 /= 4096;\n      }\n      while (x2 >= 2) {\n          n += 1;\n          x2 /= 2;\n      }\n      return n;\n  }\n};\n\nvar toFixedShim = function toFixed(fractionDigits) {\n    var f, x, s, m, e, z, j, k;\n\n    // Test for NaN and round fractionDigits down\n    f = $Number(fractionDigits);\n    f = isActualNaN(f) ? 0 : Math.floor(f);\n\n    if (f < 0 || f > 20) {\n        throw new RangeError('Number.toFixed called with invalid number of decimals');\n    }\n\n    x = $Number(this);\n\n    if (isActualNaN(x)) {\n        return 'NaN';\n    }\n\n    // If it is too big or small, return the string value of the number\n    if (x <= -1e21 || x >= 1e21) {\n        return $String(x);\n    }\n\n    s = '';\n\n    if (x < 0) {\n        s = '-';\n        x = -x;\n    }\n\n    m = '0';\n\n    if (x > 1e-21) {\n        // 1e-21 < x < 1e21\n        // -70 < log2(x) < 70\n        e = toFixedHelpers.log(x * toFixedHelpers.pow(2, 69, 1)) - 69;\n        z = (e < 0 ? x * toFixedHelpers.pow(2, -e, 1) : x / toFixedHelpers.pow(2, e, 1));\n        z *= 0x10000000000000; // Math.pow(2, 52);\n        e = 52 - e;\n\n        // -18 < e < 122\n        // x = z / 2 ^ e\n        if (e > 0) {\n            toFixedHelpers.multiply(0, z);\n            j = f;\n\n            while (j >= 7) {\n                toFixedHelpers.multiply(1e7, 0);\n                j -= 7;\n            }\n\n            toFixedHelpers.multiply(toFixedHelpers.pow(10, j, 1), 0);\n            j = e - 1;\n\n            while (j >= 23) {\n                toFixedHelpers.divide(1 << 23);\n                j -= 23;\n            }\n\n            toFixedHelpers.divide(1 << j);\n            toFixedHelpers.multiply(1, 1);\n            toFixedHelpers.divide(2);\n            m = toFixedHelpers.numToString();\n        } else {\n            toFixedHelpers.multiply(0, z);\n            toFixedHelpers.multiply(1 << (-e), 0);\n            m = toFixedHelpers.numToString() + strSlice('0.00000000000000000000', 2, 2 + f);\n        }\n    }\n\n    if (f > 0) {\n        k = m.length;\n\n        if (k <= f) {\n            m = s + strSlice('0.0000000000000000000', 0, f - k + 2) + m;\n        } else {\n            m = s + strSlice(m, 0, k - f) + '.' + strSlice(m, k - f);\n        }\n    } else {\n        m = s + m;\n    }\n\n    return m;\n};\ndefineProperties(NumberPrototype, { toFixed: toFixedShim }, hasToFixedBugs);\n\nvar hasToPrecisionUndefinedBug = (function () {\n    try {\n        return 1.0.toPrecision(undefined) === '1';\n    } catch (e) {\n        return true;\n    }\n}());\nvar originalToPrecision = NumberPrototype.toPrecision;\ndefineProperties(NumberPrototype, {\n    toPrecision: function toPrecision(precision) {\n        return typeof precision === 'undefined' ? originalToPrecision.call(this) : originalToPrecision.call(this, precision);\n    }\n}, hasToPrecisionUndefinedBug);\n\n//\n// String\n// ======\n//\n\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nif (\n    'ab'.split(/(?:ab)*/).length !== 2 ||\n    '.'.split(/(.?)(.?)/).length !== 4 ||\n    'tesst'.split(/(s)*/)[1] === 't' ||\n    'test'.split(/(?:)/, -1).length !== 4 ||\n    ''.split(/.?/).length ||\n    '.'.split(/()()/).length > 1\n) {\n    (function () {\n        var compliantExecNpcg = typeof (/()??/).exec('')[1] === 'undefined'; // NPCG: nonparticipating capturing group\n        var maxSafe32BitInt = Math.pow(2, 32) - 1;\n\n        StringPrototype.split = function (separator, limit) {\n            var string = String(this);\n            if (typeof separator === 'undefined' && limit === 0) {\n                return [];\n            }\n\n            // If `separator` is not a regex, use native split\n            if (!isRegex(separator)) {\n                return strSplit(this, separator, limit);\n            }\n\n            var output = [];\n            var flags = (separator.ignoreCase ? 'i' : '') +\n                        (separator.multiline ? 'm' : '') +\n                        (separator.unicode ? 'u' : '') + // in ES6\n                        (separator.sticky ? 'y' : ''), // Firefox 3+ and ES6\n                lastLastIndex = 0,\n                // Make `global` and avoid `lastIndex` issues by working with a copy\n                separator2, match, lastIndex, lastLength;\n            var separatorCopy = new RegExp(separator.source, flags + 'g');\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // maxSafe32BitInt\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            var splitLimit = typeof limit === 'undefined' ? maxSafe32BitInt : ES.ToUint32(limit);\n            match = separatorCopy.exec(string);\n            while (match) {\n                // `separatorCopy.lastIndex` is not reliable cross-browser\n                lastIndex = match.index + match[0].length;\n                if (lastIndex > lastLastIndex) {\n                    pushCall(output, strSlice(string, lastLastIndex, match.index));\n                    // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                    // nonparticipating capturing groups\n                    if (!compliantExecNpcg && match.length > 1) {\n                        /* eslint-disable no-loop-func */\n                        match[0].replace(separator2, function () {\n                            for (var i = 1; i < arguments.length - 2; i++) {\n                                if (typeof arguments[i] === 'undefined') {\n                                    match[i] = void 0;\n                                }\n                            }\n                        });\n                        /* eslint-enable no-loop-func */\n                    }\n                    if (match.length > 1 && match.index < string.length) {\n                        array_push.apply(output, arraySlice(match, 1));\n                    }\n                    lastLength = match[0].length;\n                    lastLastIndex = lastIndex;\n                    if (output.length >= splitLimit) {\n                        break;\n                    }\n                }\n                if (separatorCopy.lastIndex === match.index) {\n                    separatorCopy.lastIndex++; // Avoid an infinite loop\n                }\n                match = separatorCopy.exec(string);\n            }\n            if (lastLastIndex === string.length) {\n                if (lastLength || !separatorCopy.test('')) {\n                    pushCall(output, '');\n                }\n            } else {\n                pushCall(output, strSlice(string, lastLastIndex));\n            }\n            return output.length > splitLimit ? arraySlice(output, 0, splitLimit) : output;\n        };\n    }());\n\n// [bugfix, chrome]\n// If separator is undefined, then the result array contains just one String,\n// which is the this value (converted to a String). If limit is not undefined,\n// then the output array is truncated so that it contains no more than limit\n// elements.\n// \"0\".split(undefined, 0) -> []\n} else if ('0'.split(void 0, 0).length) {\n    StringPrototype.split = function split(separator, limit) {\n        if (typeof separator === 'undefined' && limit === 0) { return []; }\n        return strSplit(this, separator, limit);\n    };\n}\n\nvar str_replace = StringPrototype.replace;\nvar replaceReportsGroupsCorrectly = (function () {\n    var groups = [];\n    'x'.replace(/x(.)?/g, function (match, group) {\n        pushCall(groups, group);\n    });\n    return groups.length === 1 && typeof groups[0] === 'undefined';\n}());\n\nif (!replaceReportsGroupsCorrectly) {\n    StringPrototype.replace = function replace(searchValue, replaceValue) {\n        var isFn = isCallable(replaceValue);\n        var hasCapturingGroups = isRegex(searchValue) && (/\\)[*?]/).test(searchValue.source);\n        if (!isFn || !hasCapturingGroups) {\n            return str_replace.call(this, searchValue, replaceValue);\n        } else {\n            var wrappedReplaceValue = function (match) {\n                var length = arguments.length;\n                var originalLastIndex = searchValue.lastIndex;\n                searchValue.lastIndex = 0;\n                var args = searchValue.exec(match) || [];\n                searchValue.lastIndex = originalLastIndex;\n                pushCall(args, arguments[length - 2], arguments[length - 1]);\n                return replaceValue.apply(this, args);\n            };\n            return str_replace.call(this, searchValue, wrappedReplaceValue);\n        }\n    };\n}\n\n// ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n    substr: function substr(start, length) {\n        var normalizedStart = start;\n        if (start < 0) {\n            normalizedStart = max(this.length + start, 0);\n        }\n        return string_substr.call(this, normalizedStart, length);\n    }\n}, hasNegativeSubstrBug);\n\n// ES5 15.5.4.20\n// whitespace from: http://es5.github.io/#x15.5.4.20\nvar ws = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n    '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028' +\n    '\\u2029\\uFEFF';\nvar zeroWidth = '\\u200b';\nvar wsRegexChars = '[' + ws + ']';\nvar trimBeginRegexp = new RegExp('^' + wsRegexChars + wsRegexChars + '*');\nvar trimEndRegexp = new RegExp(wsRegexChars + wsRegexChars + '*$');\nvar hasTrimWhitespaceBug = StringPrototype.trim && (ws.trim() || !zeroWidth.trim());\ndefineProperties(StringPrototype, {\n    // http://blog.stevenlevithan.com/archives/faster-trim-javascript\n    // http://perfectionkills.com/whitespace-deviations/\n    trim: function trim() {\n        if (typeof this === 'undefined' || this === null) {\n            throw new TypeError(\"can't convert \" + this + ' to object');\n        }\n        return $String(this).replace(trimBeginRegexp, '').replace(trimEndRegexp, '');\n    }\n}, hasTrimWhitespaceBug);\nvar trim = call.bind(String.prototype.trim);\n\nvar hasLastIndexBug = StringPrototype.lastIndexOf && 'abcあい'.lastIndexOf('あい', 2) !== -1;\ndefineProperties(StringPrototype, {\n    lastIndexOf: function lastIndexOf(searchString) {\n        if (typeof this === 'undefined' || this === null) {\n            throw new TypeError(\"can't convert \" + this + ' to object');\n        }\n        var S = $String(this);\n        var searchStr = $String(searchString);\n        var numPos = arguments.length > 1 ? $Number(arguments[1]) : NaN;\n        var pos = isActualNaN(numPos) ? Infinity : ES.ToInteger(numPos);\n        var start = min(max(pos, 0), S.length);\n        var searchLen = searchStr.length;\n        var k = start + searchLen;\n        while (k > 0) {\n            k = max(0, k - searchLen);\n            var index = strIndexOf(strSlice(S, k, start + searchLen), searchStr);\n            if (index !== -1) {\n                return k + index;\n            }\n        }\n        return -1;\n    }\n}, hasLastIndexBug);\n\nvar originalLastIndexOf = StringPrototype.lastIndexOf;\ndefineProperties(StringPrototype, {\n    lastIndexOf: function lastIndexOf(searchString) {\n        return originalLastIndexOf.apply(this, arguments);\n    }\n}, StringPrototype.lastIndexOf.length !== 1);\n\n// ES-5 15.1.2.2\n/* eslint-disable radix */\nif (parseInt(ws + '08') !== 8 || parseInt(ws + '0x16') !== 22) {\n/* eslint-enable radix */\n    /* global parseInt: true */\n    parseInt = (function (origParseInt) {\n        var hexRegex = /^[\\-+]?0[xX]/;\n        return function parseInt(str, radix) {\n            var string = trim(str);\n            var defaultedRadix = $Number(radix) || (hexRegex.test(string) ? 16 : 10);\n            return origParseInt(string, defaultedRadix);\n        };\n    }(parseInt));\n}\n\n// https://es5.github.io/#x15.1.2.3\nif (1 / parseFloat('-0') !== -Infinity) {\n    /* global parseFloat: true */\n    parseFloat = (function (origParseFloat) {\n        return function parseFloat(string) {\n            var inputString = trim(string);\n            var result = origParseFloat(inputString);\n            return result === 0 && strSlice(inputString, 0, 1) === '-' ? -0 : result;\n        };\n    }(parseFloat));\n}\n\nif (String(new RangeError('test')) !== 'RangeError: test') {\n    var errorToStringShim = function toString() {\n        if (typeof this === 'undefined' || this === null) {\n            throw new TypeError(\"can't convert \" + this + ' to object');\n        }\n        var name = this.name;\n        if (typeof name === 'undefined') {\n            name = 'Error';\n        } else if (typeof name !== 'string') {\n            name = $String(name);\n        }\n        var msg = this.message;\n        if (typeof msg === 'undefined') {\n            msg = '';\n        } else if (typeof msg !== 'string') {\n            msg = $String(msg);\n        }\n        if (!name) {\n            return msg;\n        }\n        if (!msg) {\n            return name;\n        }\n        return name + ': ' + msg;\n    };\n    // can't use defineProperties here because of toString enumeration issue in IE <= 8\n    Error.prototype.toString = errorToStringShim;\n}\n\nif (supportsDescriptors) {\n    var ensureNonEnumerable = function (obj, prop) {\n        if (isEnum(obj, prop)) {\n            var desc = Object.getOwnPropertyDescriptor(obj, prop);\n            if (desc.configurable) {\n              desc.enumerable = false;\n              Object.defineProperty(obj, prop, desc);\n            }\n        }\n    };\n    ensureNonEnumerable(Error.prototype, 'message');\n    if (Error.prototype.message !== '') {\n      Error.prototype.message = '';\n    }\n    ensureNonEnumerable(Error.prototype, 'name');\n}\n\nif (String(/a/mig) !== '/a/gim') {\n    var regexToString = function toString() {\n        var str = '/' + this.source + '/';\n        if (this.global) {\n            str += 'g';\n        }\n        if (this.ignoreCase) {\n            str += 'i';\n        }\n        if (this.multiline) {\n            str += 'm';\n        }\n        return str;\n    };\n    // can't use defineProperties here because of toString enumeration issue in IE <= 8\n    RegExp.prototype.toString = regexToString;\n}\n\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/web-detector/~/es5-shim/es5-shim.js\n ** module id = 16\n ** module chunks = 0\n **/","\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NA_VERSION = \"-1\";\nvar NA = {\n  name: \"na\",\n  version: NA_VERSION\n};\n\nfunction typeOf(type) {\n  return function (object) {\n    return Object.prototype.toString.call(object) === \"[object \" + type + \"]\";\n  };\n}\nvar isString = typeOf(\"String\");\nvar isRegExp = typeOf(\"RegExp\");\nvar isObject = typeOf(\"Object\");\nvar isFunction = typeOf(\"Function\");\n\nfunction each(object, factory) {\n  for (var i = 0, l = object.length; i < l; i++) {\n    if (factory.call(object, object[i], i) === false) {\n      break;\n    }\n  }\n}\n\n// UserAgent Detector.\n// @param {String} ua, userAgent.\n// @param {Object} expression\n// @return {Object}\n//    返回 null 表示当前表达式未匹配成功。\nfunction detect(name, expression, ua) {\n  var expr = isFunction(expression) ? expression.call(null, ua) : expression;\n  if (!expr) {\n    return null;\n  }\n  var info = {\n    name: name,\n    version: NA_VERSION,\n    codename: \"\"\n  };\n  if (expr === true) {\n    return info;\n  } else if (isString(expr)) {\n    if (ua.indexOf(expr) !== -1) {\n      return info;\n    }\n  } else if (isObject(expr)) {\n    if (expr.hasOwnProperty(\"version\")) {\n      info.version = expr.version;\n    }\n    return info;\n  } else if (isRegExp(expr)) {\n    var m = expr.exec(ua);\n    if (m) {\n      if (m.length >= 2 && m[1]) {\n        info.version = m[1].replace(/_/g, \".\");\n      } else {\n        info.version = NA_VERSION;\n      }\n      return info;\n    }\n  }\n}\n\n// 初始化识别。\nfunction init(ua, patterns, factory, detector) {\n  var detected = NA;\n  each(patterns, function (pattern) {\n    var d = detect(pattern[0], pattern[1], ua);\n    if (d) {\n      detected = d;\n      return false;\n    }\n  });\n  factory.call(detector, detected.name, detected.version);\n}\n\nvar Detector = function () {\n  function Detector(rules) {\n    _classCallCheck(this, Detector);\n\n    this._rules = rules;\n  }\n\n  // 解析 UserAgent 字符串\n  // @param {String} ua, userAgent string.\n  // @return {Object}\n\n\n  _createClass(Detector, [{\n    key: \"parse\",\n    value: function parse(ua) {\n      ua = (ua || \"\").toLowerCase();\n      var d = {};\n\n      init(ua, this._rules.device, function (name, version) {\n        var v = parseFloat(version);\n        d.device = {\n          name: name,\n          version: v,\n          fullVersion: version\n        };\n        d.device[name] = v;\n      }, d);\n\n      init(ua, this._rules.os, function (name, version) {\n        var v = parseFloat(version);\n        d.os = {\n          name: name,\n          version: v,\n          fullVersion: version\n        };\n        d.os[name] = v;\n      }, d);\n\n      var ieCore = this.IEMode(ua);\n\n      init(ua, this._rules.engine, function (name, version) {\n        var mode = version;\n        // IE 内核的浏览器，修复版本号及兼容模式。\n        if (ieCore) {\n          version = ieCore.engineVersion || ieCore.engineMode;\n          mode = ieCore.engineMode;\n        }\n        var v = parseFloat(version);\n        d.engine = {\n          name: name,\n          version: v,\n          fullVersion: version,\n          mode: parseFloat(mode),\n          fullMode: mode,\n          compatible: ieCore ? ieCore.compatible : false\n        };\n        d.engine[name] = v;\n      }, d);\n\n      init(ua, this._rules.browser, function (name, version) {\n        var mode = version;\n        // IE 内核的浏览器，修复浏览器版本及兼容模式。\n        if (ieCore) {\n          // 仅修改 IE 浏览器的版本，其他 IE 内核的版本不修改。\n          if (name === \"ie\") {\n            version = ieCore.browserVersion;\n          }\n          mode = ieCore.browserMode;\n        }\n        var v = parseFloat(version);\n        d.browser = {\n          name: name,\n          version: v,\n          fullVersion: version,\n          mode: parseFloat(mode),\n          fullMode: mode,\n          compatible: ieCore ? ieCore.compatible : false\n        };\n        d.browser[name] = v;\n      }, d);\n      return d;\n    }\n\n    // 解析使用 Trident 内核的浏览器的 `浏览器模式` 和 `文档模式` 信息。\n    // @param {String} ua, userAgent string.\n    // @return {Object}\n\n  }, {\n    key: \"IEMode\",\n    value: function IEMode(ua) {\n      if (!this._rules.re_msie.test(ua)) {\n        return null;\n      }\n\n      var m = void 0;\n      var engineMode = void 0;\n      var engineVersion = void 0;\n      var browserMode = void 0;\n      var browserVersion = void 0;\n\n      // IE8 及其以上提供有 Trident 信息，\n      // 默认的兼容模式，UA 中 Trident 版本不发生变化。\n      if (ua.indexOf(\"trident/\") !== -1) {\n        m = /\\btrident\\/([0-9.]+)/.exec(ua);\n        if (m && m.length >= 2) {\n          // 真实引擎版本。\n          engineVersion = m[1];\n          var v_version = m[1].split(\".\");\n          v_version[0] = parseInt(v_version[0], 10) + 4;\n          browserVersion = v_version.join(\".\");\n        }\n      }\n\n      m = this._rules.re_msie.exec(ua);\n      browserMode = m[1];\n      var v_mode = m[1].split(\".\");\n      if (typeof browserVersion === \"undefined\") {\n        browserVersion = browserMode;\n      }\n      v_mode[0] = parseInt(v_mode[0], 10) - 4;\n      engineMode = v_mode.join(\".\");\n      if (typeof engineVersion === \"undefined\") {\n        engineVersion = engineMode;\n      }\n\n      return {\n        browserVersion: browserVersion,\n        browserMode: browserMode,\n        engineVersion: engineVersion,\n        engineMode: engineMode,\n        compatible: engineVersion !== engineMode\n      };\n    }\n  }]);\n\n  return Detector;\n}();\n\nmodule.exports = Detector;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/web-detector/lib/detector.js\n ** module id = 17\n ** module chunks = 0\n **/","\"use strict\";\n\nvar win = typeof window === \"undefined\" ? global : window;\nvar external = win.external;\nvar re_msie = /\\b(?:msie |ie |trident\\/[0-9].*rv[ :])([0-9.]+)/;\nvar re_blackberry_10 = /\\bbb10\\b.+?\\bversion\\/([\\d.]+)/;\nvar re_blackberry_6_7 = /\\bblackberry\\b.+\\bversion\\/([\\d.]+)/;\nvar re_blackberry_4_5 = /\\bblackberry\\d+\\/([\\d.]+)/;\n\nvar NA_VERSION = \"-1\";\n\n// 硬件设备信息识别表达式。\n// 使用数组可以按优先级排序。\nvar DEVICES = [[\"nokia\", function (ua) {\n  // 不能将两个表达式合并，因为可能出现 \"nokia; nokia 960\"\n  // 这种情况下会优先识别出 nokia/-1\n  if (ua.indexOf(\"nokia \") !== -1) {\n    return (/\\bnokia ([0-9]+)?/\n    );\n  } else {\n    return (/\\bnokia([a-z0-9]+)?/\n    );\n  }\n}],\n// 三星有 Android 和 WP 设备。\n[\"samsung\", function (ua) {\n  if (ua.indexOf(\"samsung\") !== -1) {\n    return (/\\bsamsung(?:[ \\-](?:sgh|gt|sm))?-([a-z0-9]+)/\n    );\n  } else {\n    return (/\\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/\n    );\n  }\n}], [\"wp\", function (ua) {\n  return ua.indexOf(\"windows phone \") !== -1 || ua.indexOf(\"xblwp\") !== -1 || ua.indexOf(\"zunewp\") !== -1 || ua.indexOf(\"windows ce\") !== -1;\n}], [\"pc\", \"windows\"], [\"ipad\", \"ipad\"],\n// ipod 规则应置于 iphone 之前。\n[\"ipod\", \"ipod\"], [\"iphone\", /\\biphone\\b|\\biph(\\d)/], [\"mac\", \"macintosh\"],\n// 小米\n[\"mi\", /\\bmi[ \\-]?([a-z0-9 ]+(?= build|\\)))/],\n// 红米\n[\"hongmi\", /\\bhm[ \\-]?([a-z0-9]+)/], [\"aliyun\", /\\baliyunos\\b(?:[\\-](\\d+))?/], [\"meizu\", function (ua) {\n  return ua.indexOf(\"meizu\") >= 0 ? /\\bmeizu[\\/ ]([a-z0-9]+)\\b/ : /\\bm([0-9cx]{1,4})\\b/;\n}], [\"nexus\", /\\bnexus ([0-9s.]+)/], [\"huawei\", function (ua) {\n  var re_mediapad = /\\bmediapad (.+?)(?= build\\/huaweimediapad\\b)/;\n  if (ua.indexOf(\"huawei-huawei\") !== -1) {\n    return (/\\bhuawei\\-huawei\\-([a-z0-9\\-]+)/\n    );\n  } else if (re_mediapad.test(ua)) {\n    return re_mediapad;\n  } else {\n    return (/\\bhuawei[ _\\-]?([a-z0-9]+)/\n    );\n  }\n}], [\"lenovo\", function (ua) {\n  if (ua.indexOf(\"lenovo-lenovo\") !== -1) {\n    return (/\\blenovo\\-lenovo[ \\-]([a-z0-9]+)/\n    );\n  } else {\n    return (/\\blenovo[ \\-]?([a-z0-9]+)/\n    );\n  }\n}],\n// 中兴\n[\"zte\", function (ua) {\n  if (/\\bzte\\-[tu]/.test(ua)) {\n    return (/\\bzte-[tu][ _\\-]?([a-su-z0-9\\+]+)/\n    );\n  } else {\n    return (/\\bzte[ _\\-]?([a-su-z0-9\\+]+)/\n    );\n  }\n}],\n// 步步高\n[\"vivo\", /\\bvivo(?: ([a-z0-9]+))?/], [\"htc\", function (ua) {\n  if (/\\bhtc[a-z0-9 _\\-]+(?= build\\b)/.test(ua)) {\n    return (/\\bhtc[ _\\-]?([a-z0-9 ]+(?= build))/\n    );\n  } else {\n    return (/\\bhtc[ _\\-]?([a-z0-9 ]+)/\n    );\n  }\n}], [\"oppo\", /\\boppo[_]([a-z0-9]+)/], [\"konka\", /\\bkonka[_\\-]([a-z0-9]+)/], [\"sonyericsson\", /\\bmt([a-z0-9]+)/], [\"coolpad\", /\\bcoolpad[_ ]?([a-z0-9]+)/], [\"lg\", /\\blg[\\-]([a-z0-9]+)/], [\"android\", /\\bandroid\\b|\\badr\\b/], [\"blackberry\", function (ua) {\n  if (ua.indexOf(\"blackberry\") >= 0) {\n    return (/\\bblackberry\\s?(\\d+)/\n    );\n  }\n  return \"bb10\";\n}]];\n\n// 操作系统信息识别表达式\nvar OS = [[\"wp\", function (ua) {\n  if (ua.indexOf(\"windows phone \") !== -1) {\n    return (/\\bwindows phone (?:os )?([0-9.]+)/\n    );\n  } else if (ua.indexOf(\"xblwp\") !== -1) {\n    return (/\\bxblwp([0-9.]+)/\n    );\n  } else if (ua.indexOf(\"zunewp\") !== -1) {\n    return (/\\bzunewp([0-9.]+)/\n    );\n  }\n  return \"windows phone\";\n}], [\"windows\", /\\bwindows nt ([0-9.]+)/], [\"macosx\", /\\bmac os x ([0-9._]+)/], [\"ios\", function (ua) {\n  if (/\\bcpu(?: iphone)? os /.test(ua)) {\n    return (/\\bcpu(?: iphone)? os ([0-9._]+)/\n    );\n  } else if (ua.indexOf(\"iph os \") !== -1) {\n    return (/\\biph os ([0-9_]+)/\n    );\n  } else {\n    return (/\\bios\\b/\n    );\n  }\n}], [\"yunos\", /\\baliyunos ([0-9.]+)/], [\"android\", function (ua) {\n  if (ua.indexOf(\"android\") >= 0) {\n    return (/\\bandroid[ \\/-]?([0-9.x]+)?/\n    );\n  } else if (ua.indexOf(\"adr\") >= 0) {\n    if (ua.indexOf(\"mqqbrowser\") >= 0) {\n      return (/\\badr[ ]\\(linux; u; ([0-9.]+)?/\n      );\n    } else {\n      return (/\\badr(?:[ ]([0-9.]+))?/\n      );\n    }\n  }\n  return \"android\";\n  //return /\\b(?:android|\\badr)(?:[\\/\\- ](?:\\(linux; u; )?)?([0-9.x]+)?/;\n}], [\"chromeos\", /\\bcros i686 ([0-9.]+)/], [\"linux\", \"linux\"], [\"windowsce\", /\\bwindows ce(?: ([0-9.]+))?/], [\"symbian\", /\\bsymbian(?:os)?\\/([0-9.]+)/], [\"blackberry\", function (ua) {\n  var m = ua.match(re_blackberry_10) || ua.match(re_blackberry_6_7) || ua.match(re_blackberry_4_5);\n  return m ? { version: m[1] } : \"blackberry\";\n}]];\n\n// 针对同源的 TheWorld 和 360 的 external 对象进行检测。\n// @param {String} key, 关键字，用于检测浏览器的安装路径中出现的关键字。\n// @return {Undefined,Boolean,Object} 返回 undefined 或 false 表示检测未命中。\nfunction checkTW360External(key) {\n  if (!external) {\n    return;\n  } // return undefined.\n  try {\n    //        360安装路径：\n    //        C:%5CPROGRA~1%5C360%5C360se3%5C360SE.exe\n    var runpath = external.twGetRunPath.toLowerCase();\n    // 360SE 3.x ~ 5.x support.\n    // 暴露的 external.twGetVersion 和 external.twGetSecurityID 均为 undefined。\n    // 因此只能用 try/catch 而无法使用特性判断。\n    var security = external.twGetSecurityID(win);\n    var version = external.twGetVersion(security);\n\n    if (runpath && runpath.indexOf(key) === -1) {\n      return false;\n    }\n    if (version) {\n      return { version: version };\n    }\n  } catch (ex) {/* */}\n}\n\nvar ENGINE = [[\"edgehtml\", /edge\\/([0-9.]+)/], [\"trident\", re_msie], [\"blink\", function () {\n  return \"chrome\" in win && \"CSS\" in win && /\\bapplewebkit[\\/]?([0-9.+]+)/;\n}], [\"webkit\", /\\bapplewebkit[\\/]?([0-9.+]+)/], [\"gecko\", function (ua) {\n  var match = ua.match(/\\brv:([\\d\\w.]+).*\\bgecko\\/(\\d+)/);\n  if (match) {\n    return {\n      version: match[1] + \".\" + match[2]\n    };\n  }\n}], [\"presto\", /\\bpresto\\/([0-9.]+)/], [\"androidwebkit\", /\\bandroidwebkit\\/([0-9.]+)/], [\"coolpadwebkit\", /\\bcoolpadwebkit\\/([0-9.]+)/], [\"u2\", /\\bu2\\/([0-9.]+)/], [\"u3\", /\\bu3\\/([0-9.]+)/]];\nvar BROWSER = [\n// Microsoft Edge Browser, Default browser in Windows 10.\n[\"edge\", /edge\\/([0-9.]+)/],\n// Sogou.\n[\"sogou\", function (ua) {\n  if (ua.indexOf(\"sogoumobilebrowser\") >= 0) {\n    return (/sogoumobilebrowser\\/([0-9.]+)/\n    );\n  } else if (ua.indexOf(\"sogoumse\") >= 0) {\n    return true;\n  }\n  return (/ se ([0-9.x]+)/\n  );\n}],\n// TheWorld (世界之窗)\n// 由于裙带关系，TheWorld API 与 360 高度重合。\n// 只能通过 UA 和程序安装路径中的应用程序名来区分。\n// TheWorld 的 UA 比 360 更靠谱，所有将 TheWorld 的规则放置到 360 之前。\n[\"theworld\", function () {\n  var x = checkTW360External(\"theworld\");\n  if (typeof x !== \"undefined\") {\n    return x;\n  }\n  return (/theworld(?: ([\\d.])+)?/\n  );\n}],\n// 360SE, 360EE.\n[\"360\", function (ua) {\n  var x = checkTW360External(\"360se\");\n  if (typeof x !== \"undefined\") {\n    return x;\n  }\n  if (ua.indexOf(\"360 aphone browser\") !== -1) {\n    return (/\\b360 aphone browser \\(([^\\)]+)\\)/\n    );\n  }\n  return (/\\b360(?:se|ee|chrome|browser)\\b/\n  );\n}],\n// Maxthon\n[\"maxthon\", function () {\n  try {\n    if (external && (external.mxVersion || external.max_version)) {\n      return {\n        version: external.mxVersion || external.max_version\n      };\n    }\n  } catch (ex) {/* */}\n  return (/\\b(?:maxthon|mxbrowser)(?:[ \\/]([0-9.]+))?/\n  );\n}], [\"micromessenger\", /\\bmicromessenger\\/([\\d.]+)/], [\"qq\", /\\bm?qqbrowser\\/([0-9.]+)/], [\"green\", \"greenbrowser\"], [\"tt\", /\\btencenttraveler ([0-9.]+)/], [\"liebao\", function (ua) {\n  if (ua.indexOf(\"liebaofast\") >= 0) {\n    return (/\\bliebaofast\\/([0-9.]+)/\n    );\n  }\n  if (ua.indexOf(\"lbbrowser\") === -1) {\n    return false;\n  }\n  var version = void 0;\n  try {\n    if (external && external.LiebaoGetVersion) {\n      version = external.LiebaoGetVersion();\n    }\n  } catch (ex) {/* */}\n  return {\n    version: version || NA_VERSION\n  };\n}], [\"tao\", /\\btaobrowser\\/([0-9.]+)/], [\"coolnovo\", /\\bcoolnovo\\/([0-9.]+)/], [\"saayaa\", \"saayaa\"],\n// 有基于 Chromniun 的急速模式和基于 IE 的兼容模式。必须在 IE 的规则之前。\n[\"baidu\", /\\b(?:ba?idubrowser|baiduhd)[ \\/]([0-9.x]+)/],\n// 后面会做修复版本号，这里只要能识别是 IE 即可。\n[\"ie\", re_msie], [\"mi\", /\\bmiuibrowser\\/([0-9.]+)/],\n// Opera 15 之后开始使用 Chromniun 内核，需要放在 Chrome 的规则之前。\n[\"opera\", function (ua) {\n  var re_opera_old = /\\bopera.+version\\/([0-9.ab]+)/;\n  var re_opera_new = /\\bopr\\/([0-9.]+)/;\n  return re_opera_old.test(ua) ? re_opera_old : re_opera_new;\n}], [\"oupeng\", /\\boupeng\\/([0-9.]+)/], [\"yandex\", /yabrowser\\/([0-9.]+)/],\n// 支付宝手机客户端\n[\"ali-ap\", function (ua) {\n  if (ua.indexOf(\"aliapp\") > 0) {\n    return (/\\baliapp\\(ap\\/([0-9.]+)\\)/\n    );\n  } else {\n    return (/\\balipayclient\\/([0-9.]+)\\b/\n    );\n  }\n}],\n// 支付宝平板客户端\n[\"ali-ap-pd\", /\\baliapp\\(ap-pd\\/([0-9.]+)\\)/],\n// 支付宝商户客户端\n[\"ali-am\", /\\baliapp\\(am\\/([0-9.]+)\\)/],\n// 淘宝手机客户端\n[\"ali-tb\", /\\baliapp\\(tb\\/([0-9.]+)\\)/],\n// 淘宝平板客户端\n[\"ali-tb-pd\", /\\baliapp\\(tb-pd\\/([0-9.]+)\\)/],\n// 天猫手机客户端\n[\"ali-tm\", /\\baliapp\\(tm\\/([0-9.]+)\\)/],\n// 天猫平板客户端\n[\"ali-tm-pd\", /\\baliapp\\(tm-pd\\/([0-9.]+)\\)/],\n// UC 浏览器，可能会被识别为 Android 浏览器，规则需要前置。\n// UC 桌面版浏览器携带 Chrome 信息，需要放在 Chrome 之前。\n[\"uc\", function (ua) {\n  if (ua.indexOf(\"ucbrowser/\") >= 0) {\n    return (/\\bucbrowser\\/([0-9.]+)/\n    );\n  } else if (ua.indexOf(\"ubrowser/\") >= 0) {\n    return (/\\bubrowser\\/([0-9.]+)/\n    );\n  } else if (/\\buc\\/[0-9]/.test(ua)) {\n    return (/\\buc\\/([0-9.]+)/\n    );\n  } else if (ua.indexOf(\"ucweb\") >= 0) {\n    // `ucweb/2.0` is compony info.\n    // `UCWEB8.7.2.214/145/800` is browser info.\n    return (/\\bucweb([0-9.]+)?/\n    );\n  } else {\n    return (/\\b(?:ucbrowser|uc)\\b/\n    );\n  }\n}], [\"chrome\", / (?:chrome|crios|crmo)\\/([0-9.]+)/],\n// Android 默认浏览器。该规则需要在 safari 之前。\n[\"android\", function (ua) {\n  if (ua.indexOf(\"android\") === -1) {\n    return;\n  }\n  return (/\\bversion\\/([0-9.]+(?: beta)?)/\n  );\n}], [\"blackberry\", function (ua) {\n  var m = ua.match(re_blackberry_10) || ua.match(re_blackberry_6_7) || ua.match(re_blackberry_4_5);\n  return m ? { version: m[1] } : \"blackberry\";\n}], [\"safari\", /\\bversion\\/([0-9.]+(?: beta)?)(?: mobile(?:\\/[a-z0-9]+)?)? safari\\//],\n// 如果不能被识别为 Safari，则猜测是 WebView。\n[\"webview\", /\\bcpu(?: iphone)? os (?:[0-9._]+).+\\bapplewebkit\\b/], [\"firefox\", /\\bfirefox\\/([0-9.ab]+)/], [\"nokia\", /\\bnokiabrowser\\/([0-9.]+)/]];\n\nmodule.exports = {\n  device: DEVICES,\n  os: OS,\n  browser: BROWSER,\n  engine: ENGINE,\n  re_msie: re_msie\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/web-detector/lib/web-rules.js\n ** module id = 18\n ** module chunks = 0\n **/","'use strict';\n\nvar _ = require('underscore');\n\n/*global _: false, $: false, localStorage: false, process: true,\n XMLHttpRequest: false, XDomainRequest: false, exports: false,\n require: false */\nmodule.exports = function (ML) {\n  /**\n   * Contains all ML API classes and functions.\n   * @name ML\n   * @namespace\n   *\n   * Contains all ML API classes and functions.\n   */\n\n  // If jQuery or Zepto has been included, grab a reference to it.\n  if (typeof($) !== \"undefined\") {\n    ML.$ = $;\n  }\n\n  // Helpers\n  // -------\n\n  // Shared empty constructor function to aid in prototype-chain creation.\n  var EmptyConstructor = function () {\n  };\n\n\n  // Helper function to correctly set up the prototype chain, for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var inherits = function (parent, protoProps, staticProps) {\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && protoProps.hasOwnProperty('constructor')) {\n      child = protoProps.constructor;\n    } else {\n      /** @ignore */\n      child = function () {\n        parent.apply(this, arguments);\n      };\n    }\n\n    // Inherit class (static) properties from parent.\n    ML._.extend(child, parent);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    EmptyConstructor.prototype = parent.prototype;\n    child.prototype = new EmptyConstructor();\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) {\n      ML._.extend(child.prototype, protoProps);\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    if (staticProps) {\n      ML._.extend(child, staticProps);\n    }\n\n    // Correctly set child's `prototype.constructor`.\n    child.prototype.constructor = child;\n\n    // Set a convenience property in case the parent's prototype is\n    // needed later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Check whether we are running in Node.js.\n  if (typeof(process) !== \"undefined\" &&\n    process.versions &&\n    process.versions.node) {\n    ML._isNode = true;\n  }\n\n  /**\n   * Call this method first to set up your authentication tokens for ML.\n   * You can get your keys from the Data Browser on maxleap.com.\n   * @param {String} applicationId Your ML Application ID.\n   * @param {String} applicationKey Your ML JavaScript Key.\n   * @param {String} masterKey (optional) Your LeapCloud Master Key. (Node.js only!).\n   */\n  ML.initialize = function (applicationId, applicationKey, masterKey) {\n    if (masterKey) {\n      throw new Error(\"ML.initialize() was passed a Master Key, which is only \" +\n        \"allowed from within Node.js.\");\n    }\n    ML._initialize(applicationId, applicationKey, masterKey);\n  };\n\n  /**\n   * Call this method first to set up authentication tokens for ML.\n   * This method is for ML's own private use.\n   * @param {String} applicationId Your ML Application ID.\n   * @param {String} applicationKey Your ML Application Key\n   */\n  ML._initialize = function (applicationId, applicationKey, masterKey) {\n    if (ML.applicationId !== undefined &&\n      applicationId !== ML.applicationId &&\n      applicationKey !== ML.applicationKey &&\n      masterKey !== ML.masterKey) {\n      console.warn('LeapCloud SDK is already initialized, please don\\'t reinitialize it.');\n    }\n    ML.applicationId = applicationId;\n    ML.applicationKey = applicationKey;\n    ML.masterKey = masterKey;\n    ML._useMasterKey = false;\n  };\n\n\n  /**\n   * Call this method to set production environment variable.\n   * @param {Boolean} production True is production environment,and\n   *  it's true by default.\n   */\n  ML.setProduction = function (production) {\n    if (!ML._isNullOrUndefined(production)) {\n      //make sure it's a number\n      production = production ? 1 : 0;\n    }\n    //default is 1\n    ML.applicationProduction = ML._isNullOrUndefined(production) ? 1 : production;\n  };\n\n  // If we're running in node.js, allow using the master key.\n  if (ML._isNode) {\n    ML.initialize = ML._initialize;\n\n    ML.Cloud = ML.Cloud || {};\n    /**\n     * Switches the LeapCloud SDK to using the Master key.  The Master key grants\n     * priveleged access to the data in LeapCloud and can be used to bypass ACLs and\n     * other restrictions that are applied to the client SDKs.\n     * <p><strong><em>Available in Cloud Code and Node.js only.</em></strong>\n     * </p>\n     */\n    ML.Cloud.useMasterKey = function () {\n      ML._useMasterKey = true;\n    };\n  }\n\n\n  /**\n   *Use china maxleap API service:https://maxleap.cn\n   */\n  ML.useLeapCloudCN = function () {\n    ML.serverURL = \"https://maxleap.cn\";\n  };\n\n  /**\n   *Use USA maxleap API service:https://maxleap.com\n   */\n  ML.useLeapCloudUS = function () {\n    ML.serverURL = \"https://maxleap.com\";\n  };\n\n  /**\n   * Returns prefix for localStorage keys used by this instance of ML.\n   * @param {String} path The relative suffix to append to it.\n   *     null or undefined is treated as the empty string.\n   * @return {String} The full key name.\n   */\n  ML._getMLPath = function (path) {\n    if (!ML.applicationId) {\n      throw \"You need to call ML.initialize before using ML.\";\n    }\n    if (!path) {\n      path = \"\";\n    }\n    if (!ML._.isString(path)) {\n      throw \"Tried to get a localStorage path that wasn't a String.\";\n    }\n    if (path[0] === \"/\") {\n      path = path.substring(1);\n    }\n    return \"ML/\" + ML.applicationId + \"/\" + path;\n  };\n\n  /**\n   * Returns the unique string for this app on this machine.\n   * Gets reset when localStorage is cleared.\n   */\n  ML._installationId = null;\n  ML._getInstallationId = function () {\n    // See if it's cached in RAM.\n    if (ML._installationId) {\n      return ML._installationId;\n    }\n\n    // Try to get it from localStorage.\n    var path = ML._getMLPath(\"installationId\");\n    ML._installationId = ML.localStorage.getItem(path);\n\n    if (!ML._installationId || ML._installationId === \"\") {\n      // It wasn't in localStorage, so create a new one.\n      var hexOctet = function () {\n        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n      };\n      ML._installationId = (\n      hexOctet() + hexOctet() + \"-\" +\n      hexOctet() + \"-\" +\n      hexOctet() + \"-\" +\n      hexOctet() + \"-\" +\n      hexOctet() + hexOctet() + hexOctet());\n      ML.localStorage.setItem(path, ML._installationId);\n    }\n\n    return ML._installationId;\n  };\n\n  ML._parseDate = function (iso8601) {\n    var regexp = new RegExp(\n      \"^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})\" + \"T\" +\n      \"([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})\" +\n      \"(.([0-9]+))?\" + \"Z$\");\n    var match = regexp.exec(iso8601);\n    if (!match) {\n      return null;\n    }\n\n    var year = match[1] || 0;\n    var month = (match[2] || 1) - 1;\n    var day = match[3] || 0;\n    var hour = match[4] || 0;\n    var minute = match[5] || 0;\n    var second = match[6] || 0;\n    var milli = match[8] || 0;\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second, milli));\n  };\n\n  ML._ajaxIE8 = function (method, url, data) {\n    var promise = new ML.Promise();\n    var xdr = new XDomainRequest();\n    xdr.onload = function () {\n      var response;\n      try {\n        response = JSON.parse(xdr.responseText);\n      } catch (e) {\n        promise.reject(e);\n      }\n      if (response) {\n        promise.resolve(response);\n      }\n    };\n    xdr.onerror = xdr.ontimeout = function () {\n      // Let's fake a real error message.\n      var fakeResponse = {\n        responseText: JSON.stringify({\n          code: ML.Error.X_DOMAIN_REQUEST,\n          error: \"IE's XDomainRequest does not supply error info.\"\n        })\n      };\n      promise.reject(xdr);\n    };\n    xdr.onprogress = function () {\n    };\n    xdr.open(method, url);\n    xdr.send(data);\n    return promise;\n  };\n\n  ML._useXDomainRequest = function () {\n    if (typeof(XDomainRequest) !== \"undefined\") {\n      // We're in IE 8+.\n      if ('withCredentials' in new XMLHttpRequest()) {\n        // We're in IE 10+.\n        return false;\n      }\n      return true;\n    }\n    return false;\n  };\n\n  ML._ajax = function (method, url, data, success, error, headers) {\n    var options = {\n      success: success,\n      error: error\n    };\n\n    if (ML._useXDomainRequest()) {\n      return ML._ajaxIE8(method, url, data)._thenRunCallbacks(options);\n    }\n\n    var promise = new ML.Promise();\n    var handled = false;\n\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        if (handled) {\n          return;\n        }\n        handled = true;\n\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.responseText);\n          } catch (e) {\n            //对于一些请求(如delete files)，服务器不返回response，只能通过xhr.status判断请求结果\n            promise.resolve(xhr.status);\n          }\n          if(xhr.status !== 204){ //204是文件删除接口的状态返回码\n            if (response && !response.errorCode) {\n              promise.resolve(response, xhr.status, xhr);\n            }else{\n              promise.reject(xhr);\n            }\n          }\n\n        } else {\n          promise.reject(xhr);\n        }\n      }\n    };\n    xhr.open(method, url, true);\n    if(!url.match('analytics/at') && !url.match('track/event')){\n      xhr.setRequestHeader(\"X-ML-AppId\", ML.applicationId);\n      xhr.setRequestHeader(\"X-ML-APIKey\", ML.applicationKey);\n    }\n    \n    for (var key in headers) {\n      xhr.setRequestHeader(key, headers[key]);\n    }\n\n    //xhr.setRequestHeader(\"X-LAS-Fid\", \"zcf-7dd01734-8272-40de-89e7-dbb199f04bf9.txt\");\n\n    if (ML._isNode) {\n      // Add a special user agent just for request from node.js.\n      xhr.setRequestHeader(\"User-Agent\",\n        \"ML/\" + ML.VERSION +\n        \" (NodeJS \" + process.versions.node + \")\");\n    }\n    xhr.send(data);\n    return promise._thenRunCallbacks(options);\n  };\n\n  // A self-propagating extend function.\n  ML._extend = function (protoProps, classProps) {\n    var child = inherits(this, protoProps, classProps);\n    child.extend = this.extend;\n    return child;\n  };\n\n  /**\n   * route is classes, users, login, etc.\n   * objectId is null if there is no associated objectId.\n   * method is the http method for the REST API.\n   * dataObject is the payload as an object, or null if there is none.\n   * headers is extra http headers.\n   * @ignore\n   */\n  ML._request = function (route, className, objectId, method, dataObject, headers) {\n    if (!ML.applicationId) {\n      throw \"You must specify your applicationId using ML.initialize\";\n    }\n\n    if (!ML.applicationKey && !ML.masterKey) {\n      throw \"You must specify a key using ML.initialize\";\n    }\n\n\n    if (route !== \"batch\" &&\n      route !== \"classes\" &&\n      route !== \"files\" &&\n      route !== \"functions\" &&\n      route !== \"login\" &&\n      route !== \"marketing/push/msg\" &&\n      route !== \"search/select\" &&\n      route !== \"requestPasswordReset\" &&\n      route !== \"requestEmailVerify\" &&\n      route !== \"requestPasswordResetBySmsCode\" &&\n      route !== \"resetPasswordBySmsCode\" &&\n      route !== \"requestMobilePhoneVerify\" &&\n      route !== \"requestLoginSmsCode\" &&\n      route !== \"loginByMobilePhone\" &&\n      route !== \"verifyMobilePhone\" &&\n      route !== \"requestSmsCode\" &&\n      route !== \"verifySmsCode\" &&\n      route !== \"users\" &&\n      route !== 'updatePassword' &&\n      route !== \"usersByMobilePhone\" &&\n      route !== \"cloudQuery\" &&\n      route !== \"statuses\" &&\n      route !== \"bigquery\" &&\n      route !== 'search/select' &&\n      route !== 'subscribe/statuses/count' &&\n      route !== 'subscribe/statuses' && !(/users\\/[^\\/]+\\/updatePassword/.test(route)) && !(/users\\/[^\\/]+\\/friendship\\/[^\\/]+/.test(route))) {\n      throw \"Bad route: '\" + route + \"'.\";\n    }\n\n\n\n    var url = ML.serverURL;\n    if (url.charAt(url.length - 1) !== \"/\") {\n      url += \"/\";\n    }\n    url += \"2.0/\" + route;\n    if (className) {\n      url += \"/\" + className;\n    }\n    if (objectId) {\n      url += \"/\" + objectId;\n    }\n    if ((route === 'users' || route === 'classes') && dataObject && dataObject._fetchWhenSave) {\n      delete dataObject._fetchWhenSave;\n      url += '?new=true';\n    }\n\n    headers = headers || {};\n    var data = dataObject;\n    var currentUser = ML.User.current();\n    if (currentUser && currentUser._sessionToken) {\n      headers['X-ML-Session-Token'] = currentUser._sessionToken;\n    }\n\n    if(!(data instanceof File)){\n      dataObject = ML._.clone(dataObject || {});\n      if (method !== \"POST\") {\n        dataObject._method = method;\n      }\n\n      dataObject._ApplicationId = ML.applicationId;\n      dataObject._ApplicationKey = ML.applicationKey;\n      if (!ML._isNullOrUndefined(ML.applicationProduction)) {\n        dataObject._ApplicationProduction = ML.applicationProduction;\n      }\n      if (ML._useMasterKey)\n        dataObject._MasterKey = ML.masterKey;\n      dataObject._ClientVersion = ML.VERSION;\n      dataObject._InstallationId = ML._getInstallationId();\n      // Pass the session token on every request.\n      var currentUser = ML.User.current();\n      if (currentUser && currentUser._sessionToken) {\n        dataObject._SessionToken = currentUser._sessionToken;\n      }\n      data = JSON.stringify(dataObject);\n\n\n      //files服务器不接受Content-Type跨域头\n      if (route !== 'files') {\n        headers['Content-Type'] = 'application/json';\n      }\n    }\n    return ML._ajax(method, url, data, null, null, headers).then(null, function (response) {\n      // Transform the error into an instance of ML.Error by trying to parse\n      // the error string as JSON.\n      var error;\n      if (response && response.responseText) {\n        try {\n          var errorJSON = JSON.parse(response.responseText);\n          if (errorJSON) {\n            error = new ML.Error(errorJSON.errorCode, errorJSON.errorMessage);\n          }\n        } catch (e) {\n          // If we fail to parse the error text, that's okay.\n        }\n      }\n      error = error || new ML.Error(-1, response.responseText);\n      // By explicitly returning a rejected Promise, this will work with\n      // either jQuery or Promises/A semantics.\n      return ML.Promise.error(error);\n    });\n  };\n\n  // Helper function to get a value from a Backbone object as a property\n  // or as a function.\n  ML._getValue = function (object, prop) {\n    if (!(object && object[prop])) {\n      return null;\n    }\n    return ML._.isFunction(object[prop]) ? object[prop]() : object[prop];\n  };\n\n  /**\n   * Converts a value in a ML Object into the appropriate representation.\n   * This is the JS equivalent of Java's ML.maybeReferenceAndEncode(Object)\n   * if seenObjects is falsey. Otherwise any ML.Objects not in\n   * seenObjects will be fully embedded rather than encoded\n   * as a pointer.  This array will be used to prevent going into an infinite\n   * loop because we have circular references.  If <seenObjects>\n   * is set, then none of the ML Objects that are serialized can be dirty.\n   */\n  ML._encode = function (value, seenObjects, disallowObjects) {\n    var _ = ML._;\n    if (value instanceof ML.Object) {\n      if (disallowObjects) {\n        throw \"ML.Objects not allowed here\";\n      }\n      if (!seenObjects || _.include(seenObjects, value) || !value._hasData) {\n        return value._toPointer();\n      }\n      if (!value.dirty()) {\n        seenObjects = seenObjects.concat(value);\n        return ML._encode(value._toFullJSON(seenObjects),\n          seenObjects,\n          disallowObjects);\n      }\n      throw \"Tried to save an object with a pointer to a new, unsaved object.\";\n    }\n    if (_.isDate(value)) {\n      return {\"__type\": \"Date\", \"iso\": value.toJSON()};\n    }\n    if (value instanceof ML.GeoPoint) {\n      return value.toJSON();\n    }\n    if (_.isArray(value)) {\n      return _.map(value, function (x) {\n        return ML._encode(x, seenObjects, disallowObjects);\n      });\n    }\n    if (_.isRegExp(value)) {\n      return value.source;\n    }\n    if (value instanceof ML.Relation) {\n      return value.toJSON();\n    }\n    if (value instanceof ML.Op) {\n      return value.toJSON();\n    }\n    if (value instanceof ML.File) {\n      if (!value.url() && !value.id) {\n        throw \"Tried to save an object containing an unsaved file.\";\n      }\n      return {\n        __type: \"File\",\n        id: value.id,\n        name: value.name(),\n        url: value.url()\n      };\n    }\n    if (_.isObject(value)) {\n      var output = {};\n      ML._objectEach(value, function (v, k) {\n        output[k] = ML._encode(v, seenObjects, disallowObjects);\n      });\n      return output;\n    }\n    return value;\n  };\n\n  /**\n   * The inverse function of ML._encode.\n   * TODO: make decode not mutate value.\n   */\n  ML._decode = function (key, value) {\n    var _ = ML._;\n    if (!_.isObject(value)) {\n      return value;\n    }\n    if (_.isArray(value)) {\n      ML._arrayEach(value, function (v, k) {\n        value[k] = ML._decode(k, v);\n      });\n      return value;\n    }\n    if (value instanceof ML.Object) {\n      return value;\n    }\n    if (value instanceof ML.File) {\n      return value;\n    }\n    if (value instanceof ML.Op) {\n      return value;\n    }\n    if (value.__op) {\n      return ML.Op._decode(value);\n    }\n    if (value.__type === \"Pointer\") {\n      var className = value.className;\n      var pointer = ML.Object._create(className);\n      if (value.createdAt) {\n        delete value.__type;\n        delete value.className;\n        pointer._finishFetch(value, true);\n      } else {\n        pointer._finishFetch({objectId: value.objectId}, false);\n      }\n      return pointer;\n    }\n    if (value.__type === \"Object\") {\n      // It's an Object included in a query result.\n      var className = value.className;\n      delete value.__type;\n      delete value.className;\n      var object = ML.Object._create(className);\n      object._finishFetch(value, true);\n      return object;\n    }\n    if (value.__type === \"Date\") {\n      return ML._parseDate(value.iso);\n    }\n    if (value.__type === \"GeoPoint\") {\n      return new ML.GeoPoint({\n        latitude: value.latitude,\n        longitude: value.longitude\n      });\n    }\n    if (value.__type === \"Relation\") {\n      var relation = new ML.Relation(null, key);\n      relation.targetClassName = value.className;\n      return relation;\n    }\n    if (value.__type === \"File\") {\n      var file = new ML.File(value.name);\n      file._metaData = value.metaData || {};\n      file._url = value.url;\n      file.id = value.objectId;\n      return file;\n    }\n    ML._objectEach(value, function (v, k) {\n      value[k] = ML._decode(k, v);\n    });\n    return value;\n  };\n\n  ML._arrayEach = ML._.each;\n\n  /**\n   * Does a deep traversal of every item in object, calling func on every one.\n   * @param {Object} object The object or array to traverse deeply.\n   * @param {Function} func The function to call for every item. It will\n   *     be passed the item as an argument. If it returns a truthy value, that\n   *     value will replace the item in its parent container.\n   * @returns {} the result of calling func on the top-level object itself.\n   */\n  ML._traverse = function (object, func, seen) {\n    if (object instanceof ML.Object) {\n      seen = seen || [];\n      if (ML._.indexOf(seen, object) >= 0) {\n        // We've already visited this object in this call.\n        return;\n      }\n      seen.push(object);\n      ML._traverse(object.attributes, func, seen);\n      return func(object);\n    }\n    if (object instanceof ML.Relation || object instanceof ML.File) {\n      // Nothing needs to be done, but we don't want to recurse into the\n      // object's parent infinitely, so we catch this case.\n      return func(object);\n    }\n    if (ML._.isArray(object)) {\n      ML._.each(object, function (child, index) {\n        var newChild = ML._traverse(child, func, seen);\n        if (newChild) {\n          object[index] = newChild;\n        }\n      });\n      return func(object);\n    }\n    if (ML._.isObject(object)) {\n      ML._each(object, function (child, key) {\n        var newChild = ML._traverse(child, func, seen);\n        if (newChild) {\n          object[key] = newChild;\n        }\n      });\n      return func(object);\n    }\n    return func(object);\n  };\n\n  /**\n   * This is like _.each, except:\n   * * it doesn't work for so-called array-like objects,\n   * * it does work for dictionaries with a \"length\" attribute.\n   */\n  ML._objectEach = ML._each = function (obj, callback) {\n    var _ = ML._;\n    if (_.isObject(obj)) {\n      _.each(_.keys(obj), function (key) {\n        callback(obj[key], key);\n      });\n    } else {\n      _.each(obj, callback);\n    }\n  };\n\n  // Helper function to check null or undefined.\n  ML._isNullOrUndefined = function (x) {\n    return ML._.isNull(x) || ML._.isUndefined(x);\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils.js\n **/","'use strict';\n\nvar _ = require('underscore');\n\nmodule.exports = function(ML) {\n\n  /**\n   * Constructs a new ML.Error object with the given code and message.\n   * @param {Number} code An error code constant from <code>ML.Error</code>.\n   * @param {String} message A detailed description of the error.\n   * @class\n   *\n   * <p>Class used for all objects passed to error callbacks.</p>\n   */\n  ML.Error = function(code, message) {\n    this.code = code;\n    this.message = message;\n  };\n\n  _.extend(ML.Error, /** @lends ML.Error */ {\n    /**\n     * Error code indicating some error other than those enumerated here.\n     * @constant\n     */\n    OTHER_CAUSE: -1,\n\n    /**\n     * Error code indicating that something has gone wrong with the server.\n     * If you get this error code, it is ML's fault. Contact us at\n     * https://maxleap.com/help\n     * @constant\n     */\n    INTERNAL_SERVER_ERROR: 1,\n\n    /**\n     * Error code indicating the connection to the ML servers failed.\n     * @constant\n     */\n    CONNECTION_FAILED: 100,\n\n    /**\n     * Error code indicating the specified object doesn't exist.\n     * @constant\n     */\n    OBJECT_NOT_FOUND: 101,\n\n    /**\n     * Error code indicating you tried to query with a datatype that doesn't\n     * support it, like exact matching an array or object.\n     * @constant\n     */\n    INVALID_QUERY: 102,\n\n    /**\n     * Error code indicating a missing or invalid classname. Classnames are\n     * case-sensitive. They must start with a letter, and a-zA-Z0-9_ are the\n     * only valid characters.\n     * @constant\n     */\n    INVALID_CLASS_NAME: 103,\n\n    /**\n     * Error code indicating an unspecified object id.\n     * @constant\n     */\n    MISSING_OBJECT_ID: 104,\n\n    /**\n     * Error code indicating an invalid key name. Keys are case-sensitive. They\n     * must start with a letter, and a-zA-Z0-9_ are the only valid characters.\n     * @constant\n     */\n    INVALID_KEY_NAME: 105,\n\n    /**\n     * Error code indicating a malformed pointer. You should not see this unless\n     * you have been mucking about changing internal ML code.\n     * @constant\n     */\n    INVALID_POINTER: 106,\n\n    /**\n     * Error code indicating that badly formed JSON was received upstream. This\n     * either indicates you have done something unusual with modifying how\n     * things encode to JSON, or the network is failing badly.\n     * @constant\n     */\n    INVALID_JSON: 107,\n\n    /**\n     * Error code indicating that the feature you tried to access is only\n     * available internally for testing purposes.\n     * @constant\n     */\n    COMMAND_UNAVAILABLE: 108,\n\n    /**\n     * You must call ML.initialize before using the ML library.\n     * @constant\n     */\n    NOT_INITIALIZED: 109,\n\n    /**\n     * Error code indicating that a field was set to an inconsistent type.\n     * @constant\n     */\n    INCORRECT_TYPE: 111,\n\n    /**\n     * Error code indicating an invalid channel name. A channel name is either\n     * an empty string (the broadcast channel) or contains only a-zA-Z0-9_\n     * characters and starts with a letter.\n     * @constant\n     */\n    INVALID_CHANNEL_NAME: 112,\n\n    /**\n     * Error code indicating that push is misconfigured.\n     * @constant\n     */\n    PUSH_MISCONFIGURED: 115,\n\n    /**\n     * Error code indicating that the object is too large.\n     * @constant\n     */\n    OBJECT_TOO_LARGE: 116,\n\n    /**\n     * Error code indicating that the operation isn't allowed for clients.\n     * @constant\n     */\n    OPERATION_FORBIDDEN: 119,\n\n    /**\n     * Error code indicating the result was not found in the cache.\n     * @constant\n     */\n    CACHE_MISS: 120,\n\n    /**\n     * Error code indicating that an invalid key was used in a nested\n     * JSONObject.\n     * @constant\n     */\n    INVALID_NESTED_KEY: 121,\n\n    /**\n     * Error code indicating that an invalid filename was used for MLFile.\n     * A valid file name contains only a-zA-Z0-9_. characters and is between 1\n     * and 128 characters.\n     * @constant\n     */\n    INVALID_FILE_NAME: 122,\n\n    /**\n     * Error code indicating that the request timed out on the server. Typically\n     * this indicates that the request is too expensive to run.\n     * @constant\n     */\n    TIMEOUT: 124,\n\n    /**\n     * Error code indicating that the email address was invalid.\n     * @constant\n     */\n    INVALID_EMAIL_ADDRESS: 125,\n\n    /**\n     * Error code indicating a missing content type.\n     * @constant\n     */\n    MISSING_CONTENT_TYPE: 126,\n\n    /**\n     * Error code indicating a missing content length.\n     * @constant\n     */\n    MISSING_CONTENT_LENGTH: 127,\n\n    /**\n     * Error code indicating an invalid content length.\n     * @constant\n     */\n    INVALID_CONTENT_LENGTH: 128,\n\n    /**\n     * Error code indicating a file that was too large.\n     * @constant\n     */\n    FILE_TOO_LARGE: 129,\n\n    /**\n     * Error code indicating an error saving a file.\n     * @constant\n     */\n    FILE_SAVE_ERROR: 130,\n\n    /**\n     * Error code indicating an error deleting a file.\n     * @constant\n     */\n    FILE_DELETE_ERROR: 153,\n\n    /**\n     * Error code indicating that a unique field was given a value that is\n     * already taken.\n     * @constant\n     */\n    DUPLICATE_VALUE: 137,\n\n    /**\n     * Error code indicating that a role's name is invalid.\n     * @constant\n     */\n    INVALID_ROLE_NAME: 139,\n\n    /**\n     * Error code indicating that an application quota was exceeded.  Upgrade to\n     * resolve.\n     * @constant\n     */\n    EXCEEDED_QUOTA: 140,\n\n    /**\n     * Error code indicating that a Cloud Code script failed.\n     * @constant\n     */\n    SCRIPT_FAILED: 141,\n\n    /**\n     * Error code indicating that a Cloud Code validation failed.\n     * @constant\n     */\n    VALIDATION_ERROR: 142,\n\n    /**\n     * Error code indicating that invalid image data was provided.\n     * @constant\n     */\n    INVALID_IMAGE_DATA: 150,\n\n    /**\n     * Error code indicating an unsaved file.\n     * @constant\n     */\n    UNSAVED_FILE_ERROR: 151,\n\n    /**\n     * Error code indicating an invalid push time.\n     */\n    INVALID_PUSH_TIME_ERROR: 152,\n\n    /**\n     * Error code indicating that the username is missing or empty.\n     * @constant\n     */\n    USERNAME_MISSING: 200,\n\n    /**\n     * Error code indicating that the password is missing or empty.\n     * @constant\n     */\n    PASSWORD_MISSING: 201,\n\n    /**\n     * Error code indicating that the username has already been taken.\n     * @constant\n     */\n    USERNAME_TAKEN: 202,\n\n    /**\n     * Error code indicating that the email has already been taken.\n     * @constant\n     */\n    EMAIL_TAKEN: 203,\n\n    /**\n     * Error code indicating that the email is missing, but must be specified.\n     * @constant\n     */\n    EMAIL_MISSING: 204,\n\n    /**\n     * Error code indicating that a user with the specified email was not found.\n     * @constant\n     */\n    EMAIL_NOT_FOUND: 205,\n\n    /**\n     * Error code indicating that a user object without a valid session could\n     * not be altered.\n     * @constant\n     */\n    SESSION_MISSING: 206,\n\n    /**\n     * Error code indicating that a user can only be created through signup.\n     * @constant\n     */\n    MUST_CREATE_USER_THROUGH_SIGNUP: 207,\n\n    /**\n     * Error code indicating that an an account being linked is already linked\n     * to another user.\n     * @constant\n     */\n    ACCOUNT_ALREADY_LINKED: 208,\n\n    /**\n     * Error code indicating that password mismatch\n     * to another user.\n     * @constant\n     */\n    PASSWORD_MISMATCH: 210,\n    /**\n     * Error code indicating that a username not found\n     * to another user.\n     * @constant\n     */\n    NOT_FIND_USER: 211,\n\n    /**\n     * Error code indicating that a user cannot be linked to an account because\n     * that account's id could not be found.\n     * @constant\n     */\n    LINKED_ID_MISSING: 250,\n\n    /**\n     * Error code indicating that a user with a linked (e.g. Facebook) account\n     * has an invalid session.\n     * @constant\n     */\n    INVALID_LINKED_SESSION: 251,\n\n    /**\n     * Error code indicating that a service being linked (e.g. Facebook or\n     * Twitter) is unsupported.\n     * @constant\n     */\n    UNSUPPORTED_SERVICE: 252,\n    /**\n     * Error code indicating a real error code is unavailable because\n     * we had to use an XDomainRequest object to allow CORS requests in\n     * Internet Explorer, which strips the body from HTTP responses that have\n     * a non-2XX status code.\n     * @constant\n     */\n    X_DOMAIN_REQUEST: 602\n  });\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/error.js\n **/","/*global _: false */\nmodule.exports = function(ML) {\n  var eventSplitter = /\\s+/;\n  var slice = Array.prototype.slice;\n\n  /**\n   * <p>ML.Events is a fork of Backbone's Events module, provided for your\n   * convenience.</p>\n   *\n   * <p>A module that can be mixed in to any object in order to provide\n   * it with custom events. You may bind callback functions to an event\n   * with `on`, or remove these functions with `off`.\n   * Triggering an event fires all callbacks in the order that `on` was\n   * called.\n   *\n   * <pre>\n   *     var object = {};\n   *     _.extend(object, ML.Events);\n   *     object.on('expand', function(){ alert('expanded'); });\n   *     object.trigger('expand');</pre></p>\n   *\n   * <p>For more information, see the\n   * <a href=\"http://documentcloud.github.com/backbone/#Events\">Backbone\n   * documentation</a>.</p>\n   */\n  ML.Events = {\n    /**\n     * Bind one or more space separated events, `events`, to a `callback`\n     * function. Passing `\"all\"` will bind the callback to all events fired.\n     */\n    on: function(events, callback, context) {\n\n      var calls, event, node, tail, list;\n      if (!callback) {\n        return this;\n      }\n      events = events.split(eventSplitter);\n      calls = this._callbacks || (this._callbacks = {});\n\n      // Create an immutable callback list, allowing traversal during\n      // modification.  The tail is an empty object that will always be used\n      // as the next node.\n      event = events.shift();\n      while (event) {\n        list = calls[event];\n        node = list ? list.tail : {};\n        node.next = tail = {};\n        node.context = context;\n        node.callback = callback;\n        calls[event] = {tail: tail, next: list ? list.next : node};\n        event = events.shift();\n      }\n\n      return this;\n    },\n\n    /**\n     * Remove one or many callbacks. If `context` is null, removes all callbacks\n     * with that function. If `callback` is null, removes all callbacks for the\n     * event. If `events` is null, removes all bound callbacks for all events.\n     */\n    off: function(events, callback, context) {\n      var event, calls, node, tail, cb, ctx;\n\n      // No events, or removing *all* events.\n      if (!(calls = this._callbacks)) {\n        return;\n      }\n      if (!(events || callback || context)) {\n        delete this._callbacks;\n        return this;\n      }\n\n      // Loop through the listed events and contexts, splicing them out of the\n      // linked list of callbacks if appropriate.\n      events = events ? events.split(eventSplitter) : _.keys(calls);\n      event = events.shift();\n      while (event) {\n        node = calls[event];\n        delete calls[event];\n        if (!node || !(callback || context)) {\n          continue;\n        }\n        // Create a new list, omitting the indicated callbacks.\n        tail = node.tail;\n        node = node.next;\n        while (node !== tail) {\n          cb = node.callback;\n          ctx = node.context;\n          if ((callback && cb !== callback) || (context && ctx !== context)) {\n            this.on(event, cb, ctx);\n          }\n          node = node.next;\n        }\n        event = events.shift();\n      }\n\n      return this;\n    },\n\n    /**\n     * Trigger one or many events, firing all bound callbacks. Callbacks are\n     * passed the same arguments as `trigger` is, apart from the event name\n     * (unless you're listening on `\"all\"`, which will cause your callback to\n     * receive the true name of the event as the first argument).\n     */\n    trigger: function(events) {\n      var event, node, calls, tail, args, all, rest;\n      if (!(calls = this._callbacks)) {\n        return this;\n      }\n      all = calls.all;\n      events = events.split(eventSplitter);\n      rest = slice.call(arguments, 1);\n\n      // For each event, walk through the linked list of callbacks twice,\n      // first to trigger the event, then to trigger any `\"all\"` callbacks.\n      event = events.shift();\n      while (event) {\n        node = calls[event];\n        if (node) {\n          tail = node.tail;\n          while ((node = node.next) !== tail) {\n            node.callback.apply(node.context || this, rest);\n          }\n        }\n        node = all;\n        if (node) {\n          tail = node.tail;\n          args = [event].concat(rest);\n          while ((node = node.next) !== tail) {\n            node.callback.apply(node.context || this, args);\n          }\n        }\n        event = events.shift();\n      }\n\n      return this;\n    }\n  };\n\n  /**\n   * @function\n   */\n  ML.Events.bind = ML.Events.on;\n\n  /**\n   * @function\n   */\n  ML.Events.unbind = ML.Events.off;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/event.js\n **/","var _ = require('underscore');\n\n/*global navigator: false */\nmodule.exports = function(ML) {\n  /**\n   * Creates a new GeoPoint with any of the following forms:<br>\n   *   <pre>\n   *   new GeoPoint(otherGeoPoint)\n   *   new GeoPoint(30, 30)\n   *   new GeoPoint([30, 30])\n   *   new GeoPoint({latitude: 30, longitude: 30})\n   *   new GeoPoint()  // defaults to (0, 0)\n   *   </pre>\n   * @class\n   *\n   * <p>Represents a latitude / longitude point that may be associated\n   * with a key in a MLObject or used as a reference point for geo queries.\n   * This allows proximity-based queries on the key.</p>\n   *\n   * <p>Only one key in a class may contain a GeoPoint.</p>\n   *\n   * <p>Example:<pre>\n   *   var point = new ML.GeoPoint(30.0, -20.0);\n   *   var object = new ML.Object(\"PlaceObject\");\n   *   object.set(\"location\", point);\n   *   object.save();</pre></p>\n   */\n  ML.GeoPoint = function(arg1, arg2) {\n    if (_.isArray(arg1)) {\n      ML.GeoPoint._validate(arg1[0], arg1[1]);\n      this.latitude = arg1[0];\n      this.longitude = arg1[1];\n    } else if (_.isObject(arg1)) {\n      ML.GeoPoint._validate(arg1.latitude, arg1.longitude);\n      this.latitude = arg1.latitude;\n      this.longitude = arg1.longitude;\n    } else if (_.isNumber(arg1) && _.isNumber(arg2)) {\n      ML.GeoPoint._validate(arg1, arg2);\n      this.latitude = arg1;\n      this.longitude = arg2;\n    } else {\n      this.latitude = 0;\n      this.longitude = 0;\n    }\n\n    // Add properties so that anyone using Webkit or Mozilla will get an error\n    // if they try to set values that are out of bounds.\n    var self = this;\n    if (this.__defineGetter__ && this.__defineSetter__) {\n      // Use _latitude and _longitude to actually store the values, and add\n      // getters and setters for latitude and longitude.\n      this._latitude = this.latitude;\n      this._longitude = this.longitude;\n      this.__defineGetter__(\"latitude\", function() {\n        return self._latitude;\n      });\n      this.__defineGetter__(\"longitude\", function() {\n        return self._longitude;\n      });\n      this.__defineSetter__(\"latitude\", function(val) {\n        ML.GeoPoint._validate(val, self.longitude);\n        self._latitude = val;\n      });\n      this.__defineSetter__(\"longitude\", function(val) {\n        ML.GeoPoint._validate(self.latitude, val);\n        self._longitude = val;\n      });\n    }\n  };\n\n  /**\n   * @lends ML.GeoPoint.prototype\n   * @property {float} latitude North-south portion of the coordinate, in range\n   *   [-90, 90].  Throws an exception if set out of range in a modern browser.\n   * @property {float} longitude East-west portion of the coordinate, in range\n   *   [-180, 180].  Throws if set out of range in a modern browser.\n   */\n\n  /**\n   * Throws an exception if the given lat-long is out of bounds.\n   */\n  ML.GeoPoint._validate = function(latitude, longitude) {\n    if (latitude < -90.0) {\n      throw \"ML.GeoPoint latitude \" + latitude + \" < -90.0.\";\n    }\n    if (latitude > 90.0) {\n      throw \"ML.GeoPoint latitude \" + latitude + \" > 90.0.\";\n    }\n    if (longitude < -180.0) {\n      throw \"ML.GeoPoint longitude \" + longitude + \" < -180.0.\";\n    }\n    if (longitude > 180.0) {\n      throw \"ML.GeoPoint longitude \" + longitude + \" > 180.0.\";\n    }\n  };\n\n  /**\n   * Creates a GeoPoint with the user's current location, if available.\n   * Calls options.success with a new GeoPoint instance or calls options.error.\n   * @param {Object} options An object with success and error callbacks.\n   */\n  ML.GeoPoint.current = function(options) {\n    var promise = new ML.Promise();\n    navigator.geolocation.getCurrentPosition(function(location) {\n      promise.resolve(new ML.GeoPoint({\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude\n      }));\n\n    }, function(error) {\n      promise.reject(error);\n    });\n\n    return promise._thenRunCallbacks(options);\n  };\n\n  ML.GeoPoint.prototype = {\n    /**\n     * Returns a JSON representation of the GeoPoint, suitable for ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      ML.GeoPoint._validate(this.latitude, this.longitude);\n      return {\n        \"__type\": \"GeoPoint\",\n        latitude: this.latitude,\n        longitude: this.longitude\n      };\n    },\n\n    /**\n     * Returns the distance from this GeoPoint to another in radians.\n     * @param {ML.GeoPoint} point the other ML.GeoPoint.\n     * @return {Number}\n     */\n    radiansTo: function(point) {\n      var d2r = Math.PI / 180.0;\n      var lat1rad = this.latitude * d2r;\n      var long1rad = this.longitude * d2r;\n      var lat2rad = point.latitude * d2r;\n      var long2rad = point.longitude * d2r;\n      var deltaLat = lat1rad - lat2rad;\n      var deltaLong = long1rad - long2rad;\n      var sinDeltaLatDiv2 = Math.sin(deltaLat / 2);\n      var sinDeltaLongDiv2 = Math.sin(deltaLong / 2);\n      // Square of half the straight line chord distance between both points.\n      var a = ((sinDeltaLatDiv2 * sinDeltaLatDiv2) +\n               (Math.cos(lat1rad) * Math.cos(lat2rad) *\n                sinDeltaLongDiv2 * sinDeltaLongDiv2));\n      a = Math.min(1.0, a);\n      return 2 * Math.asin(Math.sqrt(a));\n    },\n\n    /**\n     * Returns the distance from this GeoPoint to another in kilometers.\n     * @param {ML.GeoPoint} point the other ML.GeoPoint.\n     * @return {Number}\n     */\n    kilometersTo: function(point) {\n      return this.radiansTo(point) * 6371.0;\n    },\n\n    /**\n     * Returns the distance from this GeoPoint to another in miles.\n     * @param {ML.GeoPoint} point the other ML.GeoPoint.\n     * @return {Number}\n     */\n    milesTo: function(point) {\n      return this.radiansTo(point) * 3958.8;\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/geopoint.js\n **/","'use strict';\nvar _ = require('underscore');\n\nmodule.exports = function(ML) {\n\n  /**\n   * A ML.Op is an atomic operation that can be applied to a field in a\n   * ML.Object. For example, calling <code>object.set(\"foo\", \"bar\")</code>\n   * is an example of a ML.Op.Set. Calling <code>object.unset(\"foo\")</code>\n   * is a ML.Op.Unset. These operations are stored in a ML.Object and\n   * sent to the server as part of <code>object.save()</code> operations.\n   * Instances of ML.Op should be immutable.\n   *\n   * You should not create subclasses of ML.Op or instantiate ML.Op\n   * directly.\n   */\n  ML.Op = function() {\n    this._initialize.apply(this, arguments);\n  };\n\n  ML.Op.prototype = {\n    _initialize: function() {}\n  };\n\n  _.extend(ML.Op, {\n    /**\n     * To create a new Op, call ML.Op._extend();\n     */\n    _extend: ML._extend,\n\n    // A map of __op string to decoder function.\n    _opDecoderMap: {},\n\n    /**\n     * Registers a function to convert a json object with an __op field into an\n     * instance of a subclass of ML.Op.\n     */\n    _registerDecoder: function(opName, decoder) {\n      ML.Op._opDecoderMap[opName] = decoder;\n    },\n\n    /**\n     * Converts a json object into an instance of a subclass of ML.Op.\n     */\n    _decode: function(json) {\n      var decoder = ML.Op._opDecoderMap[json.__op];\n      if (decoder) {\n        return decoder(json);\n      } else {\n        return undefined;\n      }\n    }\n  });\n\n  /*\n   * Add a handler for Batch ops.\n   */\n  ML.Op._registerDecoder(\"Batch\", function(json) {\n    var op = null;\n    ML._arrayEach(json.ops, function(nextOp) {\n      nextOp = ML.Op._decode(nextOp);\n      op = nextOp._mergeWithPrevious(op);\n    });\n    return op;\n  });\n\n  /**\n   * A Set operation indicates that either the field was changed using\n   * ML.Object.set, or it is a mutable container that was detected as being\n   * changed.\n   */\n  ML.Op.Set = ML.Op._extend(/** @lends ML.Op.Set.prototype */ {\n    _initialize: function(value) {\n      this._value = value;\n    },\n\n    /**\n     * Returns the new value of this field after the set.\n     */\n    value: function() {\n      return this._value;\n    },\n\n    /**\n     * Returns a JSON version of the operation suitable for sending to ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      return ML._encode(this.value());\n    },\n\n    _mergeWithPrevious: function(previous) {\n      return this;\n    },\n\n    _estimate: function(oldValue) {\n      return this.value();\n    }\n  });\n\n  /**\n   * A sentinel value that is returned by ML.Op.Unset._estimate to\n   * indicate the field should be deleted. Basically, if you find _UNSET as a\n   * value in your object, you should remove that key.\n   */\n  ML.Op._UNSET = {};\n\n  /**\n   * An Unset operation indicates that this field has been deleted from the\n   * object.\n   */\n  ML.Op.Unset = ML.Op._extend(/** @lends ML.Op.Unset.prototype */ {\n    /**\n     * Returns a JSON version of the operation suitable for sending to ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      return { __op: \"Delete\" };\n    },\n\n    _mergeWithPrevious: function(previous) {\n      return this;\n    },\n\n    _estimate: function(oldValue) {\n      return ML.Op._UNSET;\n    }\n  });\n\n  ML.Op._registerDecoder(\"Delete\", function(json) {\n    return new ML.Op.Unset();\n  });\n\n  /**\n   * An Increment is an atomic operation where the numeric value for the field\n   * will be increased by a given amount.\n   */\n  ML.Op.Increment = ML.Op._extend(\n      /** @lends ML.Op.Increment.prototype */ {\n\n    _initialize: function(amount) {\n      this._amount = amount;\n    },\n\n    /**\n     * Returns the amount to increment by.\n     * @return {Number} the amount to increment by.\n     */\n    amount: function() {\n      return this._amount;\n    },\n\n    /**\n     * Returns a JSON version of the operation suitable for sending to ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      return { __op: \"Increment\", amount: this._amount };\n    },\n\n    _mergeWithPrevious: function(previous) {\n      if (!previous) {\n        return this;\n      } else if (previous instanceof ML.Op.Unset) {\n        return new ML.Op.Set(this.amount());\n      } else if (previous instanceof ML.Op.Set) {\n        return new ML.Op.Set(previous.value() + this.amount());\n      } else if (previous instanceof ML.Op.Increment) {\n        return new ML.Op.Increment(this.amount() + previous.amount());\n      } else {\n        throw \"Op is invalid after previous op.\";\n      }\n    },\n\n    _estimate: function(oldValue) {\n      if (!oldValue) {\n        return this.amount();\n      }\n      return oldValue + this.amount();\n    }\n  });\n\n  ML.Op._registerDecoder(\"Increment\", function(json) {\n    return new ML.Op.Increment(json.amount);\n  });\n\n  /**\n   * Add is an atomic operation where the given objects will be appended to the\n   * array that is stored in this field.\n   */\n  ML.Op.Add = ML.Op._extend(/** @lends ML.Op.Add.prototype */ {\n    _initialize: function(objects) {\n      this._objects = objects;\n    },\n\n    /**\n     * Returns the objects to be added to the array.\n     * @return {Array} The objects to be added to the array.\n     */\n    objects: function() {\n      return this._objects;\n    },\n\n    /**\n     * Returns a JSON version of the operation suitable for sending to ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      return ML._encode(this.objects());\n    },\n\n    _mergeWithPrevious: function(previous) {\n      if (!previous) {\n        return this;\n      } else if (previous instanceof ML.Op.Unset) {\n        return new ML.Op.Set(this.objects());\n      } else if (previous instanceof ML.Op.Set) {\n        return new ML.Op.Set(this._estimate(previous.value()));\n      } else if (previous instanceof ML.Op.Add) {\n        return new ML.Op.Add(previous.objects().concat(this.objects()));\n      } else {\n        throw \"Op is invalid after previous op.\";\n      }\n    },\n\n    _estimate: function(oldValue) {\n      if (!oldValue) {\n        return _.clone(this.objects());\n      } else {\n        return oldValue.concat(this.objects());\n      }\n    }\n  });\n\n  ML.Op._registerDecoder(\"Add\", function(json) {\n    return new ML.Op.Add(ML._decode(undefined, json.objects));\n  });\n\n  /**\n   * AddUnique is an atomic operation where the given items will be appended to\n   * the array that is stored in this field only if they were not already\n   * present in the array.\n   */\n  ML.Op.AddUnique = ML.Op._extend(\n      /** @lends ML.Op.AddUnique.prototype */ {\n\n    _initialize: function(objects) {\n      this._objects = _.uniq(objects);\n    },\n\n    /**\n     * Returns the objects to be added to the array.\n     * @return {Array} The objects to be added to the array.\n     */\n    objects: function() {\n      return this._objects;\n    },\n\n    /**\n     * Returns a JSON version of the operation suitable for sending to ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      return { __op: \"AddUnique\", objects: ML._encode(this.objects()) };\n    },\n\n    _mergeWithPrevious: function(previous) {\n      if (!previous) {\n        return this;\n      } else if (previous instanceof ML.Op.Unset) {\n        return new ML.Op.Set(this.objects());\n      } else if (previous instanceof ML.Op.Set) {\n        return new ML.Op.Set(this._estimate(previous.value()));\n      } else if (previous instanceof ML.Op.AddUnique) {\n        return new ML.Op.AddUnique(this._estimate(previous.objects()));\n      } else {\n        throw \"Op is invalid after previous op.\";\n      }\n    },\n\n    _estimate: function(oldValue) {\n      if (!oldValue) {\n        return _.clone(this.objects());\n      } else {\n        // We can't just take the _.uniq(_.union(...)) of oldValue and\n        // this.objects, because the uniqueness may not apply to oldValue\n        // (especially if the oldValue was set via .set())\n        var newValue = _.clone(oldValue);\n        ML._arrayEach(this.objects(), function(obj) {\n          if (obj instanceof ML.Object && obj.id) {\n            var matchingObj = _.find(newValue, function(anObj) {\n              return (anObj instanceof ML.Object) && (anObj.id === obj.id);\n            });\n            if (!matchingObj) {\n              newValue.push(obj);\n            } else {\n              var index = _.indexOf(newValue, matchingObj);\n              newValue[index] = obj;\n            }\n          } else if (!_.contains(newValue, obj)) {\n            newValue.push(obj);\n          }\n        });\n        return newValue;\n      }\n    }\n  });\n\n  ML.Op._registerDecoder(\"AddUnique\", function(json) {\n    return new ML.Op.AddUnique(ML._decode(undefined, json.objects));\n  });\n\n  /**\n   * Remove is an atomic operation where the given objects will be removed from\n   * the array that is stored in this field.\n   */\n  ML.Op.Remove = ML.Op._extend(/** @lends ML.Op.Remove.prototype */ {\n    _initialize: function(objects) {\n      this._objects = _.uniq(objects);\n    },\n\n    /**\n     * Returns the objects to be removed from the array.\n     * @return {Array} The objects to be removed from the array.\n     */\n    objects: function() {\n      return this._objects;\n    },\n\n    /**\n     * Returns a JSON version of the operation suitable for sending to ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      return { __op: \"Remove\", objects: ML._encode(this.objects()) };\n    },\n\n    _mergeWithPrevious: function(previous) {\n      if (!previous) {\n        return this;\n      } else if (previous instanceof ML.Op.Unset) {\n        return previous;\n      } else if (previous instanceof ML.Op.Set) {\n        return new ML.Op.Set(this._estimate(previous.value()));\n      } else if (previous instanceof ML.Op.Remove) {\n        return new ML.Op.Remove(_.union(previous.objects(), this.objects()));\n      } else {\n        throw \"Op is invalid after previous op.\";\n      }\n    },\n\n    _estimate: function(oldValue) {\n      if (!oldValue) {\n        return [];\n      } else {\n        var newValue = _.difference(oldValue, this.objects());\n        // If there are saved ML Objects being removed, also remove them.\n        ML._arrayEach(this.objects(), function(obj) {\n          if (obj instanceof ML.Object && obj.id) {\n            newValue = _.reject(newValue, function(other) {\n              return (other instanceof ML.Object) && (other.id === obj.id);\n            });\n          }\n        });\n        return newValue;\n      }\n    }\n  });\n\n  ML.Op._registerDecoder(\"Remove\", function(json) {\n    return new ML.Op.Remove(ML._decode(undefined, json.objects));\n  });\n\n  /**\n   * A Relation operation indicates that the field is an instance of\n   * ML.Relation, and objects are being added to, or removed from, that\n   * relation.\n   */\n  ML.Op.Relation = ML.Op._extend(\n      /** @lends ML.Op.Relation.prototype */ {\n\n    _initialize: function(adds, removes) {\n      this._targetClassName = null;\n\n      var self = this;\n\n      var pointerToId = function(object) {\n        if (object instanceof ML.Object) {\n          if (!object.id) {\n            throw \"You can't add an unsaved ML.Object to a relation.\";\n          }\n          if (!self._targetClassName) {\n            self._targetClassName = object.className;\n          }\n          if (self._targetClassName !== object.className) {\n            throw \"Tried to create a ML.Relation with 2 different types: \" +\n                  self._targetClassName + \" and \" + object.className + \".\";\n          }\n          return object.id;\n        }\n        return object;\n      };\n\n      this.relationsToAdd = _.uniq(_.map(adds, pointerToId));\n      this.relationsToRemove = _.uniq(_.map(removes, pointerToId));\n    },\n\n    /**\n     * Returns an array of unfetched ML.Object that are being added to the\n     * relation.\n     * @return {Array}\n     */\n    added: function() {\n      var self = this;\n      return _.map(this.relationsToAdd, function(objectId) {\n        var object = ML.Object._create(self._targetClassName);\n        object.id = objectId;\n        return object;\n      });\n    },\n\n    /**\n     * Returns an array of unfetched ML.Object that are being removed from\n     * the relation.\n     * @return {Array}\n     */\n    removed: function() {\n      var self = this;\n      return _.map(this.relationsToRemove, function(objectId) {\n        var object = ML.Object._create(self._targetClassName);\n        object.id = objectId;\n        return object;\n      });\n    },\n\n    /**\n     * Returns a JSON version of the operation suitable for sending to ML.\n     * @return {Object}\n     */\n    toJSON: function() {\n      var adds = null;\n      var removes = null;\n      var self = this;\n      var idToPointer = function(id) {\n        return { __type: 'Pointer',\n                 className: self._targetClassName,\n                 objectId: id };\n      };\n      var pointers = null;\n      if (this.relationsToAdd.length > 0) {\n        pointers = _.map(this.relationsToAdd, idToPointer);\n        adds = { \"__op\": \"AddRelation\", \"objects\": pointers };\n      }\n\n      if (this.relationsToRemove.length > 0) {\n        pointers = _.map(this.relationsToRemove, idToPointer);\n        removes = { \"__op\": \"RemoveRelation\", \"objects\": pointers };\n      }\n\n      if (adds && removes) {\n        return { \"__op\": \"Batch\", \"ops\": [adds, removes]};\n      }\n\n      return adds || removes || {};\n    },\n\n    _mergeWithPrevious: function(previous) {\n      if (!previous) {\n        return this;\n      } else if (previous instanceof ML.Op.Unset) {\n        throw \"You can't modify a relation after deleting it.\";\n      } else if (previous instanceof ML.Op.Relation) {\n        if (previous._targetClassName &&\n            previous._targetClassName !== this._targetClassName) {\n          throw \"Related object must be of class \" + previous._targetClassName +\n              \", but \" + this._targetClassName + \" was passed in.\";\n        }\n        var newAdd = _.union(_.difference(previous.relationsToAdd,\n                                          this.relationsToRemove),\n                             this.relationsToAdd);\n        var newRemove = _.union(_.difference(previous.relationsToRemove,\n                                             this.relationsToAdd),\n                                this.relationsToRemove);\n\n        var newRelation = new ML.Op.Relation(newAdd, newRemove);\n        newRelation._targetClassName = this._targetClassName;\n        return newRelation;\n      } else {\n        throw \"Op is invalid after previous op.\";\n      }\n    },\n\n    _estimate: function(oldValue, object, key) {\n      if (!oldValue) {\n        var relation = new ML.Relation(object, key);\n        relation.targetClassName = this._targetClassName;\n      } else if (oldValue instanceof ML.Relation) {\n        if (this._targetClassName) {\n          if (oldValue.targetClassName) {\n            if (oldValue.targetClassName !== this._targetClassName) {\n              throw \"Related object must be a \" + oldValue.targetClassName +\n                  \", but a \" + this._targetClassName + \" was passed in.\";\n            }\n          } else {\n            oldValue.targetClassName = this._targetClassName;\n          }\n        }\n        return oldValue;\n      } else {\n        throw \"Op is invalid after previous op.\";\n      }\n    }\n  });\n\n  ML.Op._registerDecoder(\"AddRelation\", function(json) {\n    return new ML.Op.Relation(ML._decode(undefined, json.objects), []);\n  });\n  ML.Op._registerDecoder(\"RemoveRelation\", function(json) {\n    return new ML.Op.Relation([], ML._decode(undefined, json.objects));\n  });\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/op.js\n **/","'use strict';\nvar _ = require('underscore');\n\nmodule.exports = function(ML) {\n  /**\n   * Creates a new Relation for the given parent object and key. This\n   * constructor should rarely be used directly, but rather created by\n   * ML.Object.relation.\n   * @param {ML.Object} parent The parent of this relation.\n   * @param {String} key The key for this relation on the parent.\n   * @see ML.Object#relation\n   * @class\n   *\n   * <p>\n   * A class that is used to access all of the children of a many-to-many\n   * relationship.  Each instance of ML.Relation is associated with a\n   * particular parent object and key.\n   * </p>\n   */\n  ML.Relation = function(parent, key) {\n    if (! _.isString(key)) {\n      throw new TypeError('key must be a string');\n    }\n    this.parent = parent;\n    this.key = key;\n    this.targetClassName = null;\n  };\n\n  /**\n   * Creates a query that can be used to query the parent objects in this relation.\n   * @param {String} parentClass The parent class or name.\n   * @param {String} relationKey The relation field key in parent.\n   * @param {ML.Object} child The child object.\n   * @return {ML.Query}\n   */\n  ML.Relation.reverseQuery = function(parentClass, relationKey, child){\n    var query = new ML.Query(parentClass);\n    query.equalTo(relationKey, child._toPointer());\n    return query;\n  };\n\n  ML.Relation.prototype = {\n    /**\n     * Makes sure that this relation has the right parent and key.\n     */\n    _ensureParentAndKey: function(parent, key) {\n      this.parent = this.parent || parent;\n      this.key = this.key || key;\n      if (this.parent !== parent) {\n        throw \"Internal Error. Relation retrieved from two different Objects.\";\n      }\n      if (this.key !== key) {\n        throw \"Internal Error. Relation retrieved from two different keys.\";\n      }\n    },\n\n    /**\n     * Adds a ML.Object or an array of ML.Objects to the relation.\n     * @param {} objects The item or items to add.\n     */\n    add: function(objects) {\n      if (!_.isArray(objects)) {\n        objects = [objects];\n      }\n\n      var change = new ML.Op.Relation(objects, []);\n      this.parent.set(this.key, change);\n      this.targetClassName = change._targetClassName;\n    },\n\n    /**\n     * Removes a ML.Object or an array of ML.Objects from this relation.\n     * @param {} objects The item or items to remove.\n     */\n    remove: function(objects) {\n      if (!_.isArray(objects)) {\n        objects = [objects];\n      }\n\n      var change = new ML.Op.Relation([], objects);\n      this.parent.set(this.key, change);\n      this.targetClassName = change._targetClassName;\n    },\n\n    /**\n     * Returns a JSON version of the object suitable for saving to disk.\n     * @return {Object}\n     */\n    toJSON: function() {\n      return { \"__type\": \"Relation\", \"className\": this.targetClassName };\n    },\n\n    /**\n     * Returns a ML.Query that is limited to objects in this\n     * relation.\n     * @return {ML.Query}\n     */\n    query: function() {\n      var targetClass;\n      var query;\n      if (!this.targetClassName) {\n        targetClass = ML.Object._getSubclass(this.parent.className);\n        query = new ML.Query(targetClass);\n        query._extraOptions.redirectClassNameForKey = this.key;\n      } else {\n        targetClass = ML.Object._getSubclass(this.targetClassName);\n        query = new ML.Query(targetClass);\n      }\n      query._addCondition(\"$relatedTo\", \"object\", this.parent._toPointer());\n      query._addCondition(\"$relatedTo\", \"key\", this.key);\n\n      return query;\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/relation.js\n **/","'use strict';\nvar _ = require('underscore');\nmodule.exports = function () {\n\n  /**\n   * A ML.File is a local representation of a file that is saved to the ML cloud.\n   * @param {String} name The file's name.\n   * @param {Array} data The data for the file, as either:\n   *     1. an Object like { base64: \"...\" } with a base64-encoded String.\n   *     2. an Object url.\n   * @class\n   */\n  ML.File = function (name, data) {\n    this._name = name;\n    this._source = new ML.Promise(function (resolve) {\n      resolve(data);\n    })\n  };\n\n  _.extend(ML.File.prototype, /** @lends ML.File.prototype */ {\n\n    /**\n     * Gets the name of the file. Before save is called, this is the filename\n     * given by the user. After save is called, that name gets prefixed with a\n     * unique identifier.\n     * @returns {String}\n     */\n    name: function () {\n      return this._name;\n    },\n\n    /**\n     * Gets the url of the file. It is only available after you save the file or\n     * after you get the file from a ML.Object.\n     * @return {String}\n     */\n    url: function () {\n      return this._url ? 'https://' + this._url.replace('https://', ''): '';\n    },\n\n    /**\n     * Saves the file to the ML cloud.\n     * @return {Promise} Promise that is resolved when the save finishes.\n     */\n    save: function () {\n      var self = this;\n      return this._source.then(function (source) {\n        return ML._request('files', self._name, null, 'PUT', source).then(function (res) {\n          self._name = res.name;\n          self._url = res.url;\n          return self;\n        });\n      });\n    },\n\n    /**\n     * Destroy the file from the ML cloud.\n     * @return {Promise} Promise that is resolved when the destroy finishes.\n     */\n    destroy: function () {\n      return ML._request('files', null, null, 'DELETE', null, {'X-LAS-Fid': this._name});\n    }\n  });\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./lib/file.js\n **/","'use strict';\n\nvar _ = require('underscore');\n\n// ML.Object is analogous to the Java MLObject.\n// It also implements the same interface as a Backbone model.\n\nmodule.exports = function (ML) {\n  /**\n   * Creates a new model with defined attributes. A client id (cid) is\n   * automatically generated and assigned for you.\n   *\n   * <p>You won't normally call this method directly.  It is recommended that\n   * you use a subclass of <code>ML.Object</code> instead, created by calling\n   * <code>extend</code>.</p>\n   *\n   * <p>However, if you don't want to use a subclass, or aren't sure which\n   * subclass is appropriate, you can use this form:<pre>\n   *     var object = new ML.Object(\"ClassName\");\n   * </pre>\n   * That is basically equivalent to:<pre>\n   *     var MyClass = ML.Object.extend(\"ClassName\");\n   *     var object = new MyClass();\n   * </pre></p>\n   *\n   * @param {Object} attributes The initial set of data to store in the object.\n   * @param {Object} options A set of Backbone-like options for creating the\n   *     object.  The only option currently supported is \"collection\".\n   * @see ML.Object.extend\n   *\n   * @class\n   *\n   * <p>The fundamental unit of ML data, which implements the Backbone Model\n   * interface.</p>\n   */\n  ML.Object = function (attributes, options) {\n    // Allow new ML.Object(\"ClassName\") as a shortcut to _create.\n    if (_.isString(attributes)) {\n      return ML.Object._create.apply(this, arguments);\n    }\n\n    attributes = attributes || {};\n    if (options && options.parse) {\n      attributes = this.parse(attributes);\n    }\n    var defaults = ML._getValue(this, 'defaults');\n    if (defaults) {\n      attributes = _.extend({}, defaults, attributes);\n    }\n    if (options && options.collection) {\n      this.collection = options.collection;\n    }\n\n    this._serverData = {};  // The last known data for this object from cloud.\n    this._opSetQueue = [{}];  // List of sets of changes to the data.\n    this.attributes = {};  // The best estimate of this's current data.\n\n    this._hashedJSON = {};  // Hash of values of containers at last save.\n    this._escapedAttributes = {};\n    this.cid = _.uniqueId('c');\n    this.changed = {};\n    this._silent = {};\n    this._pending = {};\n    if (!this.set(attributes, {silent: true})) {\n      throw new Error(\"Can't create an invalid ML.Object\");\n    }\n    this.changed = {};\n    this._silent = {};\n    this._pending = {};\n    this._hasData = true;\n    this._previousAttributes = _.clone(this.attributes);\n    this.initialize.apply(this, arguments);\n  };\n\n  /**\n   * @lends ML.Object.prototype\n   * @property {String} id The objectId of the ML Object.\n   */\n\n  /**\n   * Saves the given list of ML.Object.\n   * If any error is encountered, stops and calls the error handler.\n   * There are two ways you can call this function.\n   *\n   * The Backbone way:<pre>\n   *   ML.Object.saveAll([object1, object2, ...], {\n   *     success: function(list) {\n   *       // All the objects were saved.\n   *     },\n   *     error: function(error) {\n   *       // An error occurred while saving one of the objects.\n   *     },\n   *   });\n   * </pre>\n   * A simplified syntax:<pre>\n   *   ML.Object.saveAll([object1, object2, ...], function(list, error) {\n   *     if (list) {\n   *       // All the objects were saved.\n   *     } else {\n   *       // An error occurred.\n   *     }\n   *   });\n   * </pre>\n   *\n   * @param {Array} list A list of <code>ML.Object</code>.\n   * @param {Object} options A Backbone-style callback object.\n   */\n  ML.Object.saveAll = function (list, options) {\n    return ML.Object._deepSaveAsync(list)._thenRunCallbacks(options);\n  };\n\n  // Attach all inheritable methods to the ML.Object prototype.\n  _.extend(ML.Object.prototype, ML.Events,\n    /** @lends ML.Object.prototype */ {\n      _existed: false,\n      _fetchWhenSave: false,\n\n      /**\n       * Initialize is an empty function by default. Override it with your own\n       * initialization logic.\n       */\n      initialize: function () {\n      },\n\n      /**\n       * Set whether to enable fetchWhenSave option when updating object.\n       * When set true, SDK would fetch the latest object after saving.\n       * Default is false.\n       * @param {boolean} enable  true to enable fetchWhenSave option.\n       */\n      fetchWhenSave: function (enable) {\n        if (!_.isBoolean(enable)) {\n          throw \"Expect boolean value for fetchWhenSave\";\n        }\n        this._fetchWhenSave = enable;\n      },\n\n      /**\n       * Returns the object's objectId.\n       * @return {String} the objectId.\n       */\n      getObjectId: function () {\n        return this.id;\n      },\n\n      /**\n       * Returns the object's createdAt attribute.\n       * @return {Date}\n       */\n      getCreatedAt: function () {\n        return this.createdAt || this.get('createdAt');\n      },\n\n      /**\n       * Returns the object's updatedAt attribute.\n       * @return {Date}\n       */\n      getUpdatedAt: function () {\n        return this.updatedAt || this.get('updatedAt');\n      },\n\n      /**\n       * Returns a JSON version of the object suitable for saving to ML.\n       * @return {Object}\n       */\n      toJSON: function () {\n        var json = this._toFullJSON();\n        ML._arrayEach([\"__type\", \"className\"],\n          function (key) {\n            delete json[key];\n          });\n        return json;\n      },\n\n      _toFullJSON: function (seenObjects) {\n        var json = _.clone(this.attributes);\n        ML._objectEach(json, function (val, key) {\n          json[key] = ML._encode(val, seenObjects);\n        });\n        ML._objectEach(this._operations, function (val, key) {\n          json[key] = val;\n        });\n\n        if (_.has(this, \"id\")) {\n          json.objectId = this.id;\n        }\n        if (_.has(this, \"createdAt\")) {\n          if (_.isDate(this.createdAt)) {\n            json.createdAt = this.createdAt.toJSON();\n          } else {\n            json.createdAt = this.createdAt;\n          }\n        }\n\n        if (_.has(this, \"updatedAt\")) {\n          if (_.isDate(this.updatedAt)) {\n            json.updatedAt = this.updatedAt.toJSON();\n          } else {\n            json.updatedAt = this.updatedAt;\n          }\n        }\n        json.__type = \"Object\";\n        json.className = this.className;\n        return json;\n      },\n\n      /**\n       * Updates _hashedJSON to reflect the current state of this object.\n       * Adds any changed hash values to the set of pending changes.\n       */\n      _refreshCache: function () {\n        var self = this;\n        if (self._refreshingCache) {\n          return;\n        }\n        self._refreshingCache = true;\n        ML._objectEach(this.attributes, function (value, key) {\n          if (value instanceof ML.Object) {\n            value._refreshCache();\n          } else if (_.isObject(value)) {\n            if (self._resetCacheForKey(key)) {\n              self.set(key, new ML.Op.Set(value), {silent: true});\n            }\n          }\n        });\n        delete self._refreshingCache;\n      },\n\n      /**\n       * Returns true if this object has been modified since its last\n       * save/refresh.  If an attribute is specified, it returns true only if that\n       * particular attribute has been modified since the last save/refresh.\n       * @param {String} attr An attribute name (optional).\n       * @return {Boolean}\n       */\n      dirty: function (attr) {\n        this._refreshCache();\n\n        var currentChanges = _.last(this._opSetQueue);\n\n        if (attr) {\n          return (currentChanges[attr] ? true : false);\n        }\n        if (!this.id) {\n          return true;\n        }\n        if (_.keys(currentChanges).length > 0) {\n          return true;\n        }\n        return false;\n      },\n\n      /**\n       * Gets a Pointer referencing this Object.\n       */\n      _toPointer: function () {\n        // if (!this.id) {\n        //   throw new Error(\"Can't serialize an unsaved ML.Object\");\n        // }\n        return {\n          __type: \"Pointer\",\n          className: this.className,\n          objectId: this.id\n        };\n      },\n\n      /**\n       * Gets the value of an attribute.\n       * @param {String} attr The string name of an attribute.\n       */\n      get: function (attr) {\n        return this.attributes[attr];\n      },\n\n      /**\n       * Gets a relation on the given class for the attribute.\n       * @param String attr The attribute to get the relation for.\n       */\n      relation: function (attr) {\n        var value = this.get(attr);\n        if (value) {\n          if (!(value instanceof ML.Relation)) {\n            throw \"Called relation() on non-relation field \" + attr;\n          }\n          value._ensureParentAndKey(this, attr);\n          return value;\n        } else {\n          return new ML.Relation(this, attr);\n        }\n      },\n\n      /**\n       * Gets the HTML-escaped value of an attribute.\n       */\n      escape: function (attr) {\n        var html = this._escapedAttributes[attr];\n        if (html) {\n          return html;\n        }\n        var val = this.attributes[attr];\n        var escaped;\n        if (ML._isNullOrUndefined(val)) {\n          escaped = '';\n        } else {\n          escaped = _.escape(val.toString());\n        }\n        this._escapedAttributes[attr] = escaped;\n        return escaped;\n      },\n\n      /**\n       * Returns <code>true</code> if the attribute contains a value that is not\n       * null or undefined.\n       * @param {String} attr The string name of the attribute.\n       * @return {Boolean}\n       */\n      has: function (attr) {\n        return !ML._isNullOrUndefined(this.attributes[attr]);\n      },\n\n      /**\n       * Pulls \"special\" fields like objectId, createdAt, etc. out of attrs\n       * and puts them on \"this\" directly.  Removes them from attrs.\n       * @param attrs - A dictionary with the data for this ML.Object.\n       */\n      _mergeMagicFields: function (attrs) {\n        // Check for changes of magic fields.\n        var model = this;\n        var specialFields = [\"id\", \"objectId\", \"createdAt\", \"updatedAt\"];\n        ML._arrayEach(specialFields, function (attr) {\n          if (attrs[attr]) {\n            if (attr === \"objectId\") {\n              model.id = attrs[attr];\n            } else if ((attr === \"createdAt\" || attr === \"updatedAt\") && !_.isDate(attrs[attr])) {\n              model[attr] = ML._parseDate(attrs[attr]);\n            } else {\n              model[attr] = attrs[attr];\n            }\n            delete attrs[attr];\n          }\n        });\n      },\n\n      /**\n       * Returns the json to be sent to the server.\n       */\n      _startSave: function () {\n        this._opSetQueue.push({});\n      },\n\n      /**\n       * Called when a save fails because of an error. Any changes that were part\n       * of the save need to be merged with changes made after the save. This\n       * might throw an exception is you do conflicting operations. For example,\n       * if you do:\n       *   object.set(\"foo\", \"bar\");\n       *   object.set(\"invalid field name\", \"baz\");\n       *   object.save();\n       *   object.increment(\"foo\");\n       * then this will throw when the save fails and the client tries to merge\n       * \"bar\" with the +1.\n       */\n      _cancelSave: function () {\n        var self = this;\n        var failedChanges = _.first(this._opSetQueue);\n        this._opSetQueue = _.rest(this._opSetQueue);\n        var nextChanges = _.first(this._opSetQueue);\n        ML._objectEach(failedChanges, function (op, key) {\n          var op1 = failedChanges[key];\n          var op2 = nextChanges[key];\n          if (op1 && op2) {\n            nextChanges[key] = op2._mergeWithPrevious(op1);\n          } else if (op1) {\n            nextChanges[key] = op1;\n          }\n        });\n        this._saving = this._saving - 1;\n      },\n\n      /**\n       * Called when a save completes successfully. This merges the changes that\n       * were saved into the known server data, and overrides it with any data\n       * sent directly from the server.\n       */\n      _finishSave: function (serverData) {\n        // Grab a copy of any object referenced by this object. These instances\n        // may have already been fetched, and we don't want to lose their data.\n        // Note that doing it like this means we will unify separate copies of the\n        // same object, but that's a risk we have to take.\n        var fetchedObjects = {};\n        ML._traverse(this.attributes, function (object) {\n          if (object instanceof ML.Object && object.id && object._hasData) {\n            fetchedObjects[object.id] = object;\n          }\n        });\n\n        var savedChanges = _.first(this._opSetQueue);\n        this._opSetQueue = _.rest(this._opSetQueue);\n        this._applyOpSet(savedChanges, this._serverData);\n        this._mergeMagicFields(serverData);\n        var self = this;\n        ML._objectEach(serverData, function (value, key) {\n          self._serverData[key] = ML._decode(key, value);\n\n          // Look for any objects that might have become unfetched and fix them\n          // by replacing their values with the previously observed values.\n          var fetched = ML._traverse(self._serverData[key], function (object) {\n            if (object instanceof ML.Object && fetchedObjects[object.id]) {\n              return fetchedObjects[object.id];\n            }\n          });\n          if (fetched) {\n            self._serverData[key] = fetched;\n          }\n        });\n        this._rebuildAllEstimatedData();\n        this._saving = this._saving - 1;\n      },\n\n      /**\n       * Called when a fetch or login is complete to set the known server data to\n       * the given object.\n       */\n      _finishFetch: function (serverData, hasData) {\n        // Clear out any changes the user might have made previously.\n        this._opSetQueue = [{}];\n\n        // Bring in all the new server data.\n        this._mergeMagicFields(serverData);\n        var self = this;\n        ML._objectEach(serverData, function (value, key) {\n          self._serverData[key] = ML._decode(key, value);\n        });\n\n        // Refresh the attributes.\n        this._rebuildAllEstimatedData();\n\n        // Clear out the cache of mutable containers.\n        this._refreshCache();\n        this._opSetQueue = [{}];\n\n        this._hasData = hasData;\n      },\n\n      /**\n       * Applies the set of ML.Op in opSet to the object target.\n       */\n      _applyOpSet: function (opSet, target) {\n        var self = this;\n        ML._objectEach(opSet, function (change, key) {\n          target[key] = change._estimate(target[key], self, key);\n          if (target[key] === ML.Op._UNSET) {\n            delete target[key];\n          }\n        });\n      },\n\n      /**\n       * Replaces the cached value for key with the current value.\n       * Returns true if the new value is different than the old value.\n       */\n      _resetCacheForKey: function (key) {\n        var value = this.attributes[key];\n        if (_.isObject(value) && !(value instanceof ML.Object) && !(value instanceof ML.File)) {\n\n          value = value.toJSON ? value.toJSON() : value;\n          var json = JSON.stringify(value);\n          if (this._hashedJSON[key] !== json) {\n            var wasSet = !!this._hashedJSON[key];\n            this._hashedJSON[key] = json;\n            return wasSet;\n          }\n        }\n        return false;\n      },\n\n      /**\n       * Populates attributes[key] by starting with the last known data from the\n       * server, and applying all of the local changes that have been made to that\n       * key since then.\n       */\n      _rebuildEstimatedDataForKey: function (key) {\n        var self = this;\n        delete this.attributes[key];\n        if (this._serverData[key]) {\n          this.attributes[key] = this._serverData[key];\n        }\n        ML._arrayEach(this._opSetQueue, function (opSet) {\n          var op = opSet[key];\n          if (op) {\n            self.attributes[key] = op._estimate(self.attributes[key], self, key);\n            if (self.attributes[key] === ML.Op._UNSET) {\n              delete self.attributes[key];\n            } else {\n              self._resetCacheForKey(key);\n            }\n          }\n        });\n      },\n\n      /**\n       * Populates attributes by starting with the last known data from the\n       * server, and applying all of the local changes that have been made since\n       * then.\n       */\n      _rebuildAllEstimatedData: function () {\n        var self = this;\n\n        var previousAttributes = _.clone(this.attributes);\n\n        this.attributes = _.clone(this._serverData);\n        ML._arrayEach(this._opSetQueue, function (opSet) {\n          self._applyOpSet(opSet, self.attributes);\n          ML._objectEach(opSet, function (op, key) {\n            self._resetCacheForKey(key);\n          });\n        });\n\n        // Trigger change events for anything that changed because of the fetch.\n        ML._objectEach(previousAttributes, function (oldValue, key) {\n          if (self.attributes[key] !== oldValue) {\n            self.trigger('change:' + key, self, self.attributes[key], {});\n          }\n        });\n        ML._objectEach(this.attributes, function (newValue, key) {\n          if (!_.has(previousAttributes, key)) {\n            self.trigger('change:' + key, self, newValue, {});\n          }\n        });\n      },\n\n      /**\n       * Sets a hash of model attributes on the object, firing\n       * <code>\"change\"</code> unless you choose to silence it.\n       *\n       * <p>You can call it with an object containing keys and values, or with one\n       * key and value.  For example:<pre>\n       *   gameTurn.set({\n     *     player: player1,\n     *     diceRoll: 2\n     *   }, {\n     *     error: function(gameTurnAgain, error) {\n     *       // The set failed validation.\n     *     }\n     *   });\n       *\n       *   game.set(\"currentPlayer\", player2, {\n     *     error: function(gameTurnAgain, error) {\n     *       // The set failed validation.\n     *     }\n     *   });\n       *\n       *   game.set(\"finished\", true);</pre></p>\n       *\n       * @param {String} key The key to set.\n       * @param {} value The value to give it.\n       * @param {Object} options A set of Backbone-like options for the set.\n       *     The only supported options are <code>silent</code>,\n       *     <code>error</code>, and <code>promise</code>.\n       * @return {Boolean} true if the set succeeded.\n       * @see ML.Object#validate\n       * @see ML.Error\n       */\n      set: function (key, value, options) {\n        var attrs, attr;\n        if (_.isObject(key) || ML._isNullOrUndefined(key)) {\n          attrs = key;\n          ML._objectEach(attrs, function (v, k) {\n            attrs[k] = ML._decode(k, v);\n          });\n          options = value;\n        } else {\n          attrs = {};\n          attrs[key] = ML._decode(key, value);\n        }\n\n        // Extract attributes and options.\n        options = options || {};\n        if (!attrs) {\n          return this;\n        }\n        if (attrs instanceof ML.Object) {\n          attrs = attrs.attributes;\n        }\n\n        // If the unset option is used, every attribute should be a Unset.\n        if (options.unset) {\n          ML._objectEach(attrs, function (unused_value, key) {\n            attrs[key] = new ML.Op.Unset();\n          });\n        }\n\n        // Apply all the attributes to get the estimated values.\n        var dataToValidate = _.clone(attrs);\n        var self = this;\n        ML._objectEach(dataToValidate, function (value, key) {\n          if (value instanceof ML.Op) {\n            dataToValidate[key] = value._estimate(self.attributes[key],\n              self, key);\n            if (dataToValidate[key] === ML.Op._UNSET) {\n              delete dataToValidate[key];\n            }\n          }\n        });\n\n        // Run validation.\n        if (!this._validate(attrs, options)) {\n          return false;\n        }\n\n        this._mergeMagicFields(attrs);\n\n        options.changes = {};\n        var escaped = this._escapedAttributes;\n        var prev = this._previousAttributes || {};\n\n        // Update attributes.\n        ML._arrayEach(_.keys(attrs), function (attr) {\n          var val = attrs[attr];\n\n          // If this is a relation object we need to set the parent correctly,\n          // since the location where it was parsed does not have access to\n          // this object.\n          if (val instanceof ML.Relation) {\n            val.parent = self;\n          }\n\n          if (!(val instanceof ML.Op)) {\n            val = new ML.Op.Set(val);\n          }\n\n          // See if this change will actually have any effect.\n          var isRealChange = true;\n          if (val instanceof ML.Op.Set &&\n            _.isEqual(self.attributes[attr], val.value)) {\n            isRealChange = false;\n          }\n\n          if (isRealChange) {\n            delete escaped[attr];\n            if (options.silent) {\n              self._silent[attr] = true;\n            } else {\n              options.changes[attr] = true;\n            }\n          }\n\n          var currentChanges = _.last(self._opSetQueue);\n          currentChanges[attr] = val._mergeWithPrevious(currentChanges[attr]);\n          self._rebuildEstimatedDataForKey(attr);\n\n          if (isRealChange) {\n            self.changed[attr] = self.attributes[attr];\n            if (!options.silent) {\n              self._pending[attr] = true;\n            }\n          } else {\n            delete self.changed[attr];\n            delete self._pending[attr];\n          }\n        });\n\n        if (!options.silent) {\n          this.change(options);\n        }\n        return this;\n      },\n\n      /**\n       * Remove an attribute from the model, firing <code>\"change\"</code> unless\n       * you choose to silence it. This is a noop if the attribute doesn't\n       * exist.\n       */\n      unset: function (attr, options) {\n        options = options || {};\n        options.unset = true;\n        return this.set(attr, null, options);\n      },\n\n      /**\n       * Atomically increments the value of the given attribute the next time the\n       * object is saved. If no amount is specified, 1 is used by default.\n       *\n       * @param attr {String} The key.\n       * @param amount {Number} The amount to increment by.\n       */\n      increment: function (attr, amount) {\n        if (_.isUndefined(amount) || _.isNull(amount)) {\n          amount = 1;\n        }\n        return this.set(attr, new ML.Op.Increment(amount));\n      },\n\n      /**\n       * Atomically add an object to the end of the array associated with a given\n       * key.\n       * @param attr {String} The key.\n       * @param item {} The item to add.\n       */\n      add: function (attr, item) {\n        return this.set(attr, new ML.Op.Add([item]));\n      },\n\n      /**\n       * Atomically add an object to the array associated with a given key, only\n       * if it is not already present in the array. The position of the insert is\n       * not guaranteed.\n       *\n       * @param attr {String} The key.\n       * @param item {} The object to add.\n       */\n      addUnique: function (attr, item) {\n        return this.set(attr, new ML.Op.AddUnique([item]));\n      },\n\n      /**\n       * Atomically remove all instances of an object from the array associated\n       * with a given key.\n       *\n       * @param attr {String} The key.\n       * @param item {} The object to remove.\n       */\n      remove: function (attr, item) {\n        return this.set(attr, new ML.Op.Remove([item]));\n      },\n\n      /**\n       * Returns an instance of a subclass of ML.Op describing what kind of\n       * modification has been performed on this field since the last time it was\n       * saved. For example, after calling object.increment(\"x\"), calling\n       * object.op(\"x\") would return an instance of ML.Op.Increment.\n       *\n       * @param attr {String} The key.\n       * @returns {ML.Op} The operation, or undefined if none.\n       */\n      op: function (attr) {\n        return _.last(this._opSetQueue)[attr];\n      },\n\n      /**\n       * Clear all attributes on the model, firing <code>\"change\"</code> unless\n       * you choose to silence it.\n       */\n      clear: function (options) {\n        options = options || {};\n        options.unset = true;\n        var keysToClear = _.extend(this.attributes, this._operations);\n        return this.set(keysToClear, options);\n      },\n\n      /**\n       * Returns a JSON-encoded set of operations to be sent with the next save\n       * request.\n       */\n      _getSaveJSON: function () {\n        var json = _.clone(_.first(this._opSetQueue));\n        ML._objectEach(json, function (op, key) {\n          json[key] = op.toJSON();\n        });\n        return json;\n      },\n\n      /**\n       * Returns true if this object can be serialized for saving.\n       */\n      _canBeSerialized: function () {\n        return ML.Object._canBeSerializedAsValue(this.attributes);\n      },\n\n      /**\n       * Fetch the model from the server. If the server's representation of the\n       * model differs from its current attributes, they will be overriden,\n       * triggering a <code>\"change\"</code> event.\n       * @param {Object} fetchOptions Optional options to set 'keys' and\n       *      'include' option.\n       * @param {Object} options Optional Backbone-like options object to be\n       *     passed in to set.\n       * @return {ML.Promise} A promise that is fulfilled when the fetch\n       *     completes.\n       */\n      fetch: function () {\n        var options = null;\n        var fetchOptions = {};\n        if (arguments.length === 1) {\n          options = arguments[0];\n        } else if (arguments.length === 2) {\n          fetchOptions = arguments[0];\n          options = arguments[1];\n        }\n\n        var self = this;\n        var request = ML._request(\"classes\", this.className, this.id, 'GET',\n          fetchOptions);\n        return request.then(function (response, status, xhr) {\n          self._finishFetch(self.parse(response, status, xhr), true);\n          return self;\n        })._thenRunCallbacks(options, this);\n      },\n\n      /**\n       * Set a hash of model attributes, and save the model to the server.\n       * updatedAt will be updated when the request returns.\n       * You can either call it as:<pre>\n       *   object.save();</pre>\n       * or<pre>\n       *   object.save(null, options);</pre>\n       * or<pre>\n       *   object.save(attrs, options);</pre>\n       * or<pre>\n       *   object.save(key, value, options);</pre>\n       *\n       * For example, <pre>\n       *   gameTurn.save({\n     *     player: \"Jake Cutter\",\n     *     diceRoll: 2\n     *   }, {\n     *     success: function(gameTurnAgain) {\n     *       // The save was successful.\n     *     },\n     *     error: function(gameTurnAgain, error) {\n     *       // The save failed.  Error is an instance of ML.Error.\n     *     }\n     *   });</pre>\n       * or with promises:<pre>\n       *   gameTurn.save({\n     *     player: \"Jake Cutter\",\n     *     diceRoll: 2\n     *   }).then(function(gameTurnAgain) {\n     *     // The save was successful.\n     *   }, function(error) {\n     *     // The save failed.  Error is an instance of ML.Error.\n     *   });</pre>\n       *\n       * @return {ML.Promise} A promise that is fulfilled when the save\n       *     completes.\n       * @see ML.Error\n       */\n      save: function (arg1, arg2, arg3) {\n        var i, attrs, current, options, saved;\n        if (_.isObject(arg1) || ML._isNullOrUndefined(arg1)) {\n          attrs = arg1;\n          options = arg2;\n        } else {\n          attrs = {};\n          attrs[arg1] = arg2;\n          options = arg3;\n        }\n\n        // Make save({ success: function() {} }) work.\n        if (!options && attrs) {\n          var extra_keys = _.reject(attrs, function (value, key) {\n            return _.include([\"success\", \"error\", \"wait\"], key);\n          });\n          if (extra_keys.length === 0) {\n            var all_functions = true;\n            if (_.has(attrs, \"success\") && !_.isFunction(attrs.success)) {\n              all_functions = false;\n            }\n            if (_.has(attrs, \"error\") && !_.isFunction(attrs.error)) {\n              all_functions = false;\n            }\n            if (all_functions) {\n              // This attrs object looks like it's really an options object,\n              // and there's no other options object, so let's just use it.\n              return this.save(null, attrs);\n            }\n          }\n        }\n\n        options = _.clone(options) || {};\n        if (options.wait) {\n          current = _.clone(this.attributes);\n        }\n\n        var setOptions = _.clone(options) || {};\n        if (setOptions.wait) {\n          setOptions.silent = true;\n        }\n        var setError;\n        setOptions.error = function (model, error) {\n          setError = error;\n        };\n        if (attrs && !this.set(attrs, setOptions)) {\n          return ML.Promise.error(setError)._thenRunCallbacks(options, this);\n        }\n\n        var model = this;\n\n        // If there is any unsaved child, save it first.\n        model._refreshCache();\n\n\n        var unsavedChildren = [];\n        var unsavedFiles = [];\n        ML.Object._findUnsavedChildren(model.attributes,\n          unsavedChildren,\n          unsavedFiles);\n        if (unsavedChildren.length + unsavedFiles.length > 0) {\n          return ML.Object._deepSaveAsync(this.attributes, model).then(function () {\n            return model.save(null, options);\n          }, function (error) {\n            return ML.Promise.error(error)._thenRunCallbacks(options, model);\n          });\n        }\n\n        this._startSave();\n        this._saving = (this._saving || 0) + 1;\n\n        this._allPreviousSaves = this._allPreviousSaves || ML.Promise.as();\n        this._allPreviousSaves = this._allPreviousSaves._continueWith(function () {\n          var method = model.id ? 'PUT' : 'POST';\n\n          var json = model._getSaveJSON();\n\n          if (model._fetchWhenSave) {\n            //Sepcial-case fetchWhenSave when updating object.\n            json._fetchWhenSave = true;\n          }\n\n          var route = \"classes\";\n          var className = model.className;\n          if (model.className === \"_User\" && !model.id) {\n            // Special-case user sign-up.\n            route = \"users\";\n            className = null;\n          }\n          //hook makeRequest in options.\n          var makeRequest = options._makeRequest || ML._request;\n          var request = makeRequest(route, className, model.id, method, json);\n\n          request = request.then(function (resp, status, xhr) {\n            var serverAttrs = model.parse(resp, status, xhr);\n            if (options.wait) {\n              serverAttrs = _.extend(attrs || {}, serverAttrs);\n            }\n            model._finishSave(serverAttrs);\n            if (options.wait) {\n              model.set(current, setOptions);\n            }\n            return model;\n\n          }, function (error) {\n            model._cancelSave();\n            return ML.Promise.error(error);\n\n          })._thenRunCallbacks(options, model);\n\n          return request;\n        });\n        return this._allPreviousSaves;\n      },\n\n      /**\n       * Destroy this model on the server if it was already persisted.\n       * Optimistically removes the model from its collection, if it has one.\n       * If `wait: true` is passed, waits for the server to respond\n       * before removal.\n       *\n       * @return {ML.Promise} A promise that is fulfilled when the destroy\n       *     completes.\n       */\n      destroy: function (options) {\n        options = options || {};\n        var model = this;\n\n        var triggerDestroy = function () {\n          model.trigger('destroy', model, model.collection, options);\n        };\n\n        if (!this.id) {\n          return triggerDestroy();\n        }\n\n        if (!options.wait) {\n          triggerDestroy();\n        }\n\n        var request =\n          ML._request(\"classes\", this.className, this.id, 'DELETE');\n        return request.then(function () {\n          if (options.wait) {\n            triggerDestroy();\n          }\n          return model;\n        })._thenRunCallbacks(options, this);\n      },\n\n      /**\n       * Converts a response into the hash of attributes to be set on the model.\n       * @ignore\n       */\n      parse: function (resp, status, xhr) {\n        var output = _.clone(resp);\n        _([\"createdAt\", \"updatedAt\"]).each(function (key) {\n          if (output[key]) {\n            output[key] = ML._parseDate(output[key]);\n          }\n        });\n        if (!output.updatedAt) {\n          output.updatedAt = output.createdAt;\n        }\n        if (status) {\n          this._existed = (status !== 201);\n        }\n        return output;\n      },\n\n      /**\n       * Creates a new model with identical attributes to this one.\n       * @return {ML.Object}\n       */\n      clone: function () {\n        return new this.constructor(this.attributes);\n      },\n\n      /**\n       * Returns true if this object has never been saved to ML.\n       * @return {Boolean}\n       */\n      isNew: function () {\n        return !this.id;\n      },\n\n      /**\n       * Call this method to manually fire a `\"change\"` event for this model and\n       * a `\"change:attribute\"` event for each changed attribute.\n       * Calling this will cause all objects observing the model to update.\n       */\n      change: function (options) {\n        options = options || {};\n        var changing = this._changing;\n        this._changing = true;\n\n        // Silent changes become pending changes.\n        var self = this;\n        ML._objectEach(this._silent, function (attr) {\n          self._pending[attr] = true;\n        });\n\n        // Silent changes are triggered.\n        var changes = _.extend({}, options.changes, this._silent);\n        this._silent = {};\n        ML._objectEach(changes, function (unused_value, attr) {\n          self.trigger('change:' + attr, self, self.get(attr), options);\n        });\n        if (changing) {\n          return this;\n        }\n\n        // This is to get around lint not letting us make a function in a loop.\n        var deleteChanged = function (value, attr) {\n          if (!self._pending[attr] && !self._silent[attr]) {\n            delete self.changed[attr];\n          }\n        };\n\n        // Continue firing `\"change\"` events while there are pending changes.\n        while (!_.isEmpty(this._pending)) {\n          this._pending = {};\n          this.trigger('change', this, options);\n          // Pending and silent changes still remain.\n          ML._objectEach(this.changed, deleteChanged);\n          self._previousAttributes = _.clone(this.attributes);\n        }\n\n        this._changing = false;\n        return this;\n      },\n\n      /**\n       * Returns true if this object was created by the ML server when the\n       * object might have already been there (e.g. in the case of a Facebook\n       * login)\n       */\n      existed: function () {\n        return this._existed;\n      },\n\n      /**\n       * Determine if the model has changed since the last <code>\"change\"</code>\n       * event.  If you specify an attribute name, determine if that attribute\n       * has changed.\n       * @param {String} attr Optional attribute name\n       * @return {Boolean}\n       */\n      hasChanged: function (attr) {\n        if (!arguments.length) {\n          return !_.isEmpty(this.changed);\n        }\n        return this.changed && _.has(this.changed, attr);\n      },\n\n      /**\n       * Returns an object containing all the attributes that have changed, or\n       * false if there are no changed attributes. Useful for determining what\n       * parts of a view need to be updated and/or what attributes need to be\n       * persisted to the server. Unset attributes will be set to undefined.\n       * You can also pass an attributes object to diff against the model,\n       * determining if there *would be* a change.\n       */\n      changedAttributes: function (diff) {\n        if (!diff) {\n          return this.hasChanged() ? _.clone(this.changed) : false;\n        }\n        var changed = {};\n        var old = this._previousAttributes;\n        ML._objectEach(diff, function (diffVal, attr) {\n          if (!_.isEqual(old[attr], diffVal)) {\n            changed[attr] = diffVal;\n          }\n        });\n        return changed;\n      },\n\n      /**\n       * Gets the previous value of an attribute, recorded at the time the last\n       * <code>\"change\"</code> event was fired.\n       * @param {String} attr Name of the attribute to get.\n       */\n      previous: function (attr) {\n        if (!arguments.length || !this._previousAttributes) {\n          return null;\n        }\n        return this._previousAttributes[attr];\n      },\n\n      /**\n       * Gets all of the attributes of the model at the time of the previous\n       * <code>\"change\"</code> event.\n       * @return {Object}\n       */\n      previousAttributes: function () {\n        return _.clone(this._previousAttributes);\n      },\n\n      /**\n       * Checks if the model is currently in a valid state. It's only possible to\n       * get into an *invalid* state if you're using silent changes.\n       * @return {Boolean}\n       */\n      isValid: function () {\n        return !this.validate(this.attributes);\n      },\n\n      /**\n       * Run validation against a set of incoming attributes, returning `true`\n       * if all is well. If a specific `error` callback has been passed,\n       * call that instead of firing the general `\"error\"` event.\n       */\n      _validate: function (attrs, options) {\n        if (options.silent || !this.validate) {\n          return true;\n        }\n        attrs = _.extend({}, this.attributes, attrs);\n        var error = this.validate(attrs, options);\n        if (!error) {\n          return true;\n        }\n        if (options && options.error) {\n          options.error(this, error, options);\n        } else {\n          this.trigger('error', this, error, options);\n        }\n        return false;\n      },\n\n    });\n\n  /**\n   * Creates an instance of a subclass of ML.Object for the give classname\n   * and id.\n   * @param  {String} className The name of the ML class backing this model.\n   * @param {String} id The object id of this model.\n   * @return {ML.Object} A new subclass instance of ML.Object.\n   */\n  ML.Object.createWithoutData = function (className, id, hasData) {\n    var result = new ML.Object(className);\n    result.id = id;\n    result._hasData = hasData;\n    return result;\n  };\n  /**\n   * Delete objects in batch.The objects className must be the same.\n   * @param {Array} The ParseObject array to be deleted.\n   * @param {Object} options Standard options object with success and error\n   *     callbacks.\n   * @return {ML.Promise} A promise that is fulfilled when the save\n   *     completes.\n   */\n  ML.Object.destroyAll = function (objects, options) {\n    if (objects == null || objects.length == 0) {\n      return ML.Promise.as()._thenRunCallbacks(options);\n    }\n    var dataObject = {\n      requests: []\n    };\n\n    objects.forEach(function (obj) {\n      dataObject.requests.push({\n        method: 'delete',\n        path: 'classes/' + objects[0].className + '/' + obj.id\n      });\n    });\n    var request =\n      ML._request('batch', null, null, 'POST', dataObject);\n    return request._thenRunCallbacks(options);\n  };\n\n  /**\n   * Returns the appropriate subclass for making new instances of the given\n   * className string.\n   */\n  ML.Object._getSubclass = function (className) {\n    if (!_.isString(className)) {\n      throw \"ML.Object._getSubclass requires a string argument.\";\n    }\n    var ObjectClass = ML.Object._classMap[className];\n    if (!ObjectClass) {\n      ObjectClass = ML.Object.extend(className);\n      ML.Object._classMap[className] = ObjectClass;\n    }\n    return ObjectClass;\n  };\n\n  /**\n   * Creates an instance of a subclass of ML.Object for the given classname.\n   */\n  ML.Object._create = function (className, attributes, options) {\n    var ObjectClass = ML.Object._getSubclass(className);\n    return new ObjectClass(attributes, options);\n  };\n\n  // Set up a map of className to class so that we can create new instances of\n  // ML Objects from JSON automatically.\n  ML.Object._classMap = {};\n\n  ML.Object._extend = ML._extend;\n\n  /**\n   * Creates a new model with defined attributes,\n   * It's the same with\n   * <pre>\n   *   new ML.Object(attributes, options);\n   *  </pre>\n   * @param {Object} attributes The initial set of data to store in the object.\n   * @param {Object} options A set of Backbone-like options for creating the\n   *     object.  The only option currently supported is \"collection\".\n   * @return {ML.Object}\n   * @since v0.4.4\n   * @see ML.Object\n   * @see ML.Object.extend\n   */\n  ML.Object.new = function (attributes, options) {\n    return new ML.Object(attributes, options);\n  };\n\n  /**\n   * Creates a new subclass of ML.Object for the given ML class name.\n   *\n   * <p>Every extension of a ML class will inherit from the most recent\n   * previous extension of that class. When a ML.Object is automatically\n   * created by parsing JSON, it will use the most recent extension of that\n   * class.</p>\n   *\n   * <p>You should call either:<pre>\n   *     var MyClass = ML.Object.extend(\"MyClass\", {\n   *         <i>Instance properties</i>\n   *     }, {\n   *         <i>Class properties</i>\n   *     });</pre>\n   * or, for Backbone compatibility:<pre>\n   *     var MyClass = ML.Object.extend({\n   *         className: \"MyClass\",\n   *         <i>Other instance properties</i>\n   *     }, {\n   *         <i>Class properties</i>\n   *     });</pre></p>\n   *\n   * @param {String} className The name of the ML class backing this model.\n   * @param {Object} protoProps Instance properties to add to instances of the\n   *     class returned from this method.\n   * @param {Object} classProps Class properties to add the class returned from\n   *     this method.\n   * @return {Class} A new subclass of ML.Object.\n   */\n  ML.Object.extend = function (className, protoProps, classProps) {\n    // Handle the case with only two args.\n    if (!_.isString(className)) {\n      if (className && _.has(className, \"className\")) {\n        return ML.Object.extend(className.className, className, protoProps);\n      } else {\n        throw new Error(\n          \"ML.Object.extend's first argument should be the className.\");\n      }\n    }\n\n    // If someone tries to subclass \"User\", coerce it to the right type.\n    if (className === \"User\") {\n      className = \"_User\";\n    }\n\n    var NewClassObject = null;\n    if (_.has(ML.Object._classMap, className)) {\n      var OldClassObject = ML.Object._classMap[className];\n      // This new subclass has been told to extend both from \"this\" and from\n      // OldClassObject. This is multiple inheritance, which isn't supported.\n      // For now, let's just pick one.\n      NewClassObject = OldClassObject._extend(protoProps, classProps);\n    } else {\n      protoProps = protoProps || {};\n      protoProps.className = className;\n      NewClassObject = this._extend(protoProps, classProps);\n    }\n    // Extending a subclass should reuse the classname automatically.\n    NewClassObject.extend = function (arg0) {\n      if (_.isString(arg0) || (arg0 && _.has(arg0, \"className\"))) {\n        return ML.Object.extend.apply(NewClassObject, arguments);\n      }\n      var newArguments = [className].concat(ML._.toArray(arguments));\n      return ML.Object.extend.apply(NewClassObject, newArguments);\n    };\n    NewClassObject.new = function (attributes, options) {\n      return new NewClassObject(attributes, options);\n    };\n    ML.Object._classMap[className] = NewClassObject;\n    return NewClassObject;\n  };\n\n  ML.Object._findUnsavedChildren = function (object, children, files) {\n    ML._traverse(object, function (object) {\n      if (object instanceof ML.Object) {\n        object._refreshCache();\n        if (object.dirty()) {\n          children.push(object);\n        }\n        return;\n      }\n\n      if (object instanceof ML.File) {\n        if (!object.url() && !object.id) {\n          files.push(object);\n        }\n        return;\n      }\n    });\n  };\n\n  ML.Object._canBeSerializedAsValue = function (object) {\n    var canBeSerializedAsValue = true;\n\n    if (object instanceof ML.Object) {\n      canBeSerializedAsValue = !!object.id;\n\n    } else if (_.isArray(object)) {\n      ML._arrayEach(object, function (child) {\n        if (!ML.Object._canBeSerializedAsValue(child)) {\n          canBeSerializedAsValue = false;\n        }\n      });\n\n    } else if (_.isObject(object)) {\n      ML._objectEach(object, function (child) {\n        if (!ML.Object._canBeSerializedAsValue(child)) {\n          canBeSerializedAsValue = false;\n        }\n      });\n    }\n\n    return canBeSerializedAsValue;\n  };\n\n  ML.Object._deepSaveAsync = function (object, model) {\n    var unsavedChildren = [];\n    var unsavedFiles = [];\n    ML.Object._findUnsavedChildren(object, unsavedChildren, unsavedFiles);\n    if (model) {\n      unsavedChildren = _.filter(unsavedChildren, function (object) {\n        return object != model;\n      });\n    }\n\n    var promise = ML.Promise.as();\n    _.each(unsavedFiles, function (file) {\n      promise = promise.then(function () {\n        return file.save();\n      });\n    });\n\n    var objects = _.uniq(unsavedChildren);\n    var remaining = _.uniq(objects);\n\n    return promise.then(function () {\n      return ML.Promise._continueWhile(function () {\n        return remaining.length > 0;\n      }, function () {\n\n        // Gather up all the objects that can be saved in this batch.\n        var batch = [];\n        var newRemaining = [];\n        ML._arrayEach(remaining, function (object) {\n          // Limit batches to 20 objects.\n          if (batch.length > 20) {\n            newRemaining.push(object);\n            return;\n          }\n\n          if (object._canBeSerialized()) {\n            batch.push(object);\n          } else {\n            newRemaining.push(object);\n          }\n        });\n        remaining = newRemaining;\n\n        // If we can't save any objects, there must be a circular reference.\n        if (batch.length === 0) {\n          return ML.Promise.error(\n            new ML.Error(ML.Error.OTHER_CAUSE,\n              \"Tried to save a batch with a cycle.\"));\n        }\n\n        // Reserve a spot in every object's save queue.\n        var readyToStart = ML.Promise.when(_.map(batch, function (object) {\n          return object._allPreviousSaves || ML.Promise.as();\n        }));\n        var batchFinished = new ML.Promise();\n        ML._arrayEach(batch, function (object) {\n          object._allPreviousSaves = batchFinished;\n        });\n        // Save a single batch, whether previous saves succeeded or failed.\n        return readyToStart._continueWith(function () {\n          return ML._request(\"batch\", null, null, \"POST\", {\n            requests: _.map(batch, function (object) {\n              var json = object._getSaveJSON();\n              var method = \"POST\";\n\n              var path = \"/2.0/classes/\" + object.className;\n              if (object.id) {\n                path = path + \"/\" + object.id;\n                method = \"PUT\";\n              }\n\n              object._startSave();\n\n              return {\n                method: method,\n                path: path,\n                body: json\n              };\n            })\n\n          }).then(function (response, status, xhr) {\n            var error;\n            ML._arrayEach(batch, function (object, i) {\n              object._finishSave(\n                object.parse(response[i], status, xhr));\n            });\n            if (error) {\n              return ML.Promise.error(\n                new ML.Error(error.code, error.error));\n            }\n\n          }).then(function (results) {\n            batchFinished.resolve(results);\n            return results;\n          }, function (error) {\n            batchFinished.reject(error);\n            return ML.Promise.error(error);\n          });\n        });\n      });\n    }).then(function () {\n      return object;\n    });\n  };\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/object.js\n **/","'use strict';\nvar _ = require('underscore');\nrequire('whatwg-fetch');\n\nmodule.exports = function () {\n\n  /**\n   * ML.CloudCode is a management of MaxLeap Cloud Code.\n   * @class\n   */\n  ML.CloudCode = function(){\n  };\n\n  _.extend(ML.CloudCode.prototype, /** @lends ML.CloudCode.prototype */ {\n    /**\n     * Run cloud function in background.\n     * @param {String} Name of cloud function.\n     * @param {json} Params of cloud function.\n     * @returns {Promise}\n     */\n    callFunctionInBackground: function(name, data){\n      return fetch(ML.serverURL + '2.0/functions/'+name, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-ZCloud-AppId': ML.applicationId,\n          'X-ZCloud-APIKey': ML.applicationKey\n        },\n        body: JSON.stringify(data)\n      })\n        .then(function(res){\n          return res.json();\n        })\n    }\n  })\n};\n\n\n/** WEBPACK FOOTER **\n ** ./lib/cloudcode.js\n **/","'use strict';\n\nvar _ = require('underscore');\n\n/*global _: false, document: false */\nmodule.exports = function(ML) {\n  /**\n   * Creating a ML.View creates its initial element outside of the DOM,\n   * if an existing element is not provided...\n   *\n   * <p>A fork of Backbone.View, provided for your convenience.  If you use this\n   * class, you must also include jQuery, or another library that provides a\n   * jQuery-compatible $ function.  For more information, see the\n   * <a href=\"http://documentcloud.github.com/backbone/#View\">Backbone\n   * documentation</a>.</p>\n   * <p><strong><em>Available in the client SDK only.</em></strong></p>\n   */\n  ML.View = function(options) {\n    console.warn(\"ML.View is deprecated, please don't use it anymore.\");\n    this.cid = _.uniqueId('view');\n    this._configure(options || {});\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n    this.delegateEvents();\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var eventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be merged as properties.\n\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes',\n                     'className', 'tagName'];\n\n  // Set up all inheritable **ML.View** properties and methods.\n  _.extend(ML.View.prototype, ML.Events,\n           /** @lends ML.View.prototype */ {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    /**\n     * jQuery delegate for element lookup, scoped to DOM elements within the\n     * current view. This should be prefered to global lookups where possible.\n     */\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    /**\n     * Initialize is an empty function by default. Override it with your own\n     * initialization logic.\n     */\n    initialize: function(){},\n\n    /**\n     * The core function that your view should override, in order\n     * to populate its element (`this.el`), with the appropriate HTML. The\n     * convention is for **render** to always return `this`.\n     */\n    render: function() {\n      return this;\n    },\n\n    /**\n     * Remove this view from the DOM. Note that the view isn't present in the\n     * DOM by default, so calling this method may be a no-op.\n     */\n    remove: function() {\n      this.$el.remove();\n      return this;\n    },\n\n    /**\n     * For small amounts of DOM Elements, where a full-blown template isn't\n     * needed, use **make** to manufacture elements, one at a time.\n     * <pre>\n     *     var el = this.make('li', {'class': 'row'},\n     *                        this.model.escape('title'));</pre>\n     */\n    make: function(tagName, attributes, content) {\n      var el = document.createElement(tagName);\n      if (attributes) {\n        ML.$(el).attr(attributes);\n      }\n      if (content) {\n        ML.$(el).html(content);\n      }\n      return el;\n    },\n\n    /**\n     * Changes the view's element (`this.el` property), including event\n     * re-delegation.\n     */\n    setElement: function(element, delegate) {\n      this.$el = ML.$(element);\n      this.el = this.$el[0];\n      if (delegate !== false) {\n        this.delegateEvents();\n      }\n      return this;\n    },\n\n    /**\n     * Set callbacks.  <code>this.events</code> is a hash of\n     * <pre>\n     * *{\"event selector\": \"callback\"}*\n     *\n     *     {\n     *       'mousedown .title':  'edit',\n     *       'click .button':     'save'\n     *       'click .open':       function(e) { ... }\n     *     }\n     * </pre>\n     * pairs. Callbacks will be bound to the view, with `this` set properly.\n     * Uses event delegation for efficiency.\n     * Omitting the selector binds the event to `this.el`.\n     * This only works for delegate-able events: not `focus`, `blur`, and\n     * not `change`, `submit`, and `reset` in Internet Explorer.\n     */\n    delegateEvents: function(events) {\n      events = events || ML._getValue(this, 'events');\n      if (!events) {\n        return;\n      }\n      this.undelegateEvents();\n      var self = this;\n      ML._objectEach(events, function(method, key) {\n        if (!_.isFunction(method)) {\n          method = self[events[key]];\n        }\n        if (!method) {\n          throw new Error('Event \"' + events[key] + '\" does not exist');\n        }\n        var match = key.match(eventSplitter);\n        var eventName = match[1], selector = match[2];\n        method = _.bind(method, self);\n        eventName += '.delegateEvents' + self.cid;\n        if (selector === '') {\n          self.$el.bind(eventName, method);\n        } else {\n          self.$el.delegate(selector, eventName, method);\n        }\n      });\n    },\n\n    /**\n     * Clears all callbacks previously bound to the view with `delegateEvents`.\n     * You usually don't need to use this, but may wish to if you have multiple\n     * Backbone views attached to the same DOM element.\n     */\n    undelegateEvents: function() {\n      this.$el.unbind('.delegateEvents' + this.cid);\n    },\n\n    /**\n     * Performs the initial configuration of a View with a set of options.\n     * Keys with special meaning *(model, collection, id, className)*, are\n     * attached directly to the view.\n     */\n    _configure: function(options) {\n      if (this.options) {\n        options = _.extend({}, this.options, options);\n      }\n      var self = this;\n      _.each(viewOptions, function(attr) {\n        if (options[attr]) {\n          self[attr] = options[attr];\n        }\n      });\n      this.options = options;\n    },\n\n    /**\n     * Ensure that the View has a DOM element to render into.\n     * If `this.el` is a string, pass it through `$()`, take the first\n     * matching element, and re-assign it to `el`. Otherwise, create\n     * an element from the `id`, `className` and `tagName` properties.\n     */\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = ML._getValue(this, 'attributes') || {};\n        if (this.id) {\n          attrs.id = this.id;\n        }\n        if (this.className) {\n          attrs['class'] = this.className;\n        }\n        this.setElement(this.make(this.tagName, attrs), false);\n      } else {\n        this.setElement(this.el, false);\n      }\n    }\n\n  });\n\n  /**\n   * @function\n   * @param {Object} instanceProps Instance properties for the view.\n   * @param {Object} classProps Class properies for the view.\n   * @return {Class} A new subclass of <code>ML.View</code>.\n   */\n  ML.View.extend = ML._extend;\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/view.js\n **/","'use strict';\n\nvar _ = require('underscore');\n\nmodule.exports = function(ML) {\n  /**\n   * @class\n   *\n   * <p>A ML.User object is a local representation of a user persisted to the\n   * ML cloud. This class is a subclass of a ML.Object, and retains the\n   * same functionality of a ML.Object, but also extends it with various\n   * user specific methods, like authentication, signing up, and validation of\n   * uniqueness.</p>\n   */\n  ML.User = ML.Object.extend(\"_User\", /** @lends ML.User.prototype */ {\n    // Instance Variables\n    _isCurrentUser: false,\n\n\n    // Instance Methods\n\n    /**\n     * Internal method to handle special fields in a _User response.\n     */\n    _mergeMagicFields: function(attrs) {\n      if (attrs.sessionToken) {\n        this._sessionToken = attrs.sessionToken;\n        delete attrs.sessionToken;\n      }\n      ML.User.__super__._mergeMagicFields.call(this, attrs);\n    },\n\n    /**\n     * Removes null values from authData (which exist temporarily for\n     * unlinking)\n     */\n    _cleanupAuthData: function() {\n      if (!this.isCurrent()) {\n        return;\n      }\n      var authData = this.get('authData');\n      if (!authData) {\n        return;\n      }\n      ML._objectEach(this.get('authData'), function(value, key) {\n        if (!authData[key]) {\n          delete authData[key];\n        }\n      });\n    },\n\n    /**\n     * Synchronizes authData for all providers.\n     */\n    _synchronizeAllAuthData: function() {\n      var authData = this.get('authData');\n      if (!authData) {\n        return;\n      }\n\n      var self = this;\n      ML._objectEach(this.get('authData'), function(value, key) {\n        self._synchronizeAuthData(key);\n      });\n    },\n\n    /**\n     * Synchronizes auth data for a provider (e.g. puts the access token in the\n     * right place to be used by the Facebook SDK).\n     */\n    _synchronizeAuthData: function(provider) {\n      if (!this.isCurrent()) {\n        return;\n      }\n      var authType;\n      if (_.isString(provider)) {\n        authType = provider;\n        provider = ML.User._authProviders[authType];\n      } else {\n        authType = provider.getAuthType();\n      }\n      var authData = this.get('authData');\n      if (!authData || !provider) {\n        return;\n      }\n      var success = provider.restoreAuthentication(authData[authType]);\n      if (!success) {\n        this._unlinkFrom(provider);\n      }\n    },\n\n    _handleSaveResult: function(makeCurrent) {\n      // Clean up and synchronize the authData object, removing any unset values\n      if (makeCurrent) {\n        this._isCurrentUser = true;\n      }\n      this._cleanupAuthData();\n      this._synchronizeAllAuthData();\n      // Don't keep the password around.\n      delete this._serverData.password;\n      this._rebuildEstimatedDataForKey(\"password\");\n      this._refreshCache();\n      if (makeCurrent || this.isCurrent()) {\n        ML.User._saveCurrentUser(this);\n      }\n    },\n\n    /**\n     * Unlike in the Android/iOS SDKs, logInWith is unnecessary, since you can\n     * call linkWith on the user (even if it doesn't exist yet on the server).\n     */\n    _linkWith: function(provider, options) {\n      var authType;\n      if (_.isString(provider)) {\n        authType = provider;\n        provider = ML.User._authProviders[provider];\n      } else {\n        authType = provider.getAuthType();\n      }\n      if (_.has(options, 'authData')) {\n        var authData = this.get('authData') || {};\n        authData[authType] = options.authData;\n        this.set('authData', authData);\n\n        // Overridden so that the user can be made the current user.\n        var newOptions = _.clone(options) || {};\n        newOptions.success = function(model) {\n          model._handleSaveResult(true);\n          if (options.success) {\n            options.success.apply(this, arguments);\n          }\n        };\n        return this.save({'authData': authData}, newOptions);\n      } else {\n        var self = this;\n        var promise = new ML.Promise();\n        provider.authenticate({\n          success: function(provider, result) {\n            self._linkWith(provider, {\n              authData: result,\n              success: options.success,\n              error: options.error\n            }).then(function() {\n              promise.resolve(self);\n            });\n          },\n          error: function(provider, error) {\n            if (options.error) {\n              options.error(self, error);\n            }\n            promise.reject(error);\n          }\n        });\n        return promise;\n      }\n    },\n\n    /**\n     * Unlinks a user from a service.\n     */\n    _unlinkFrom: function(provider, options) {\n      var authType;\n      if (_.isString(provider)) {\n        authType = provider;\n        provider = ML.User._authProviders[provider];\n      } else {\n        authType = provider.getAuthType();\n      }\n      var newOptions = _.clone(options);\n      var self = this;\n      newOptions.authData = null;\n      newOptions.success = function(model) {\n        self._synchronizeAuthData(provider);\n        if (options.success) {\n          options.success.apply(this, arguments);\n        }\n      };\n      return this._linkWith(provider, newOptions);\n    },\n\n    /**\n     * Checks whether a user is linked to a service.\n     */\n    _isLinked: function(provider) {\n      var authType;\n      if (_.isString(provider)) {\n        authType = provider;\n      } else {\n        authType = provider.getAuthType();\n      }\n      var authData = this.get('authData') || {};\n      return !!authData[authType];\n    },\n\n    /**\n     * Deauthenticates all providers.\n     */\n    _logOutWithAll: function() {\n      var authData = this.get('authData');\n      if (!authData) {\n        return;\n      }\n      var self = this;\n      ML._objectEach(this.get('authData'), function(value, key) {\n        self._logOutWith(key);\n      });\n    },\n\n    /**\n     * Deauthenticates a single provider (e.g. removing access tokens from the\n     * Facebook SDK).\n     */\n    _logOutWith: function(provider) {\n      if (!this.isCurrent()) {\n        return;\n      }\n      if (_.isString(provider)) {\n        provider = ML.User._authProviders[provider];\n      }\n      if (provider && provider.deauthenticate) {\n        provider.deauthenticate();\n      }\n    },\n\n    /**\n     * Signs up a new user. You should call this instead of save for\n     * new ML.Users. This will create a new ML.User on the server, and\n     * also persist the session on disk so that you can access the user using\n     * <code>current</code>.\n     *\n     * <p>A username and password must be set before calling signUp.</p>\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {Object} attrs Extra fields to set on the new user, or null.\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled when the signup\n     *     finishes.\n     * @see ML.User.signUp\n     */\n    signUp: function(attrs, options) {\n      var error;\n      options = options || {};\n\n      var username = (attrs && attrs.username) || this.get(\"username\");\n      if (!username || (username === \"\")) {\n        error = new ML.Error(\n            ML.Error.OTHER_CAUSE,\n            \"Cannot sign up user with an empty name.\");\n        if (options && options.error) {\n          options.error(this, error);\n        }\n        return ML.Promise.error(error);\n      }\n\n      var password = (attrs && attrs.password) || this.get(\"password\");\n      if (!password || (password === \"\")) {\n        error = new ML.Error(\n            ML.Error.OTHER_CAUSE,\n            \"Cannot sign up user with an empty password.\");\n        if (options && options.error) {\n          options.error(this, error);\n        }\n        return ML.Promise.error(error);\n      }\n\n      // Overridden so that the user can be made the current user.\n      var newOptions = _.clone(options);\n      newOptions.success = function(model) {\n        model._handleSaveResult(true);\n        if (options.success) {\n          options.success.apply(this, arguments);\n        }\n      };\n      return this.save(attrs, newOptions);\n    },\n\n    /**\n     * Signs up a new anonymous user.\n     * @return {Promise} A promise that is resolved when the signup\n     *     finishes.\n     */\n    anonymousSignUp: function () {\n      var model = this;\n      var authData = {\n        anonymous: {\n          id: uuid.v1()\n        }\n      };\n      model.set('authData', authData);\n      return this.save().then(function (resp) {\n        model._handleSaveResult();\n        return model;\n      });\n    },\n\n    /**\n     * Signs up a new user with mobile phone and sms code.\n     * You should call this instead of save for\n     * new ML.Users. This will create a new ML.User on the server, and\n     * also persist the session on disk so that you can access the user using\n     * <code>current</code>.\n     *\n     * <p>A username and password must be set before calling signUp.</p>\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {Object} attrs Extra fields to set on the new user, or null.\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled when the signup\n     *     finishes.\n     * @see ML.User.signUpOrlogInWithMobilePhone\n     * @see ML.Cloud.requestSmsCode\n     */\n    signUpOrlogInWithMobilePhone: function(attrs, options) {\n      var error;\n      options = options || {};\n\n      var mobilePhoneNumber = (attrs && attrs.mobilePhoneNumber) ||\n                              this.get(\"mobilePhoneNumber\");\n      if (!mobilePhoneNumber || (mobilePhoneNumber === \"\")) {\n        error = new ML.Error(\n            ML.Error.OTHER_CAUSE,\n            \"Cannot sign up or login user by mobilePhoneNumber \" +\n            \"with an empty mobilePhoneNumber.\");\n        if (options && options.error) {\n          options.error(this, error);\n        }\n        return ML.Promise.error(error);\n      }\n\n      var smsCode = (attrs && attrs.smsCode) || this.get(\"smsCode\");\n      if (!smsCode || (smsCode === \"\")) {\n        error = new ML.Error(\n            ML.Error.OTHER_CAUSE,\n             \"Cannot sign up or login user by mobilePhoneNumber  \" +\n             \"with an empty smsCode.\");\n        if (options && options.error) {\n          options.error(this, error);\n        }\n        return ML.Promise.error(error);\n      }\n\n      // Overridden so that the user can be made the current user.\n      var newOptions = _.clone(options);\n      newOptions._makeRequest = function(route, className, id, method, json) {\n        return ML._request('usersByMobilePhone', null, null, \"POST\", json);\n      };\n      newOptions.success = function(model) {\n        model._handleSaveResult(true);\n        delete model.attributes.smsCode;\n        delete model._serverData.smsCode;\n        if (options.success) {\n          options.success.apply(this, arguments);\n        }\n      };\n      return this.save(attrs, newOptions);\n    },\n\n    /**\n     * Logs in a ML.User. On success, this saves the session to localStorage,\n     * so you can retrieve the currently logged in user using\n     * <code>current</code>.\n     *\n     * <p>A username and password must be set before calling logIn.</p>\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {Object} options A Backbone-style options object.\n     * @see ML.User.logIn\n     * @return {ML.Promise} A promise that is fulfilled with the user when\n     *     the login is complete.\n     */\n    logIn: function(options) {\n      options = options || {};\n      var model = this;\n      var request = ML._request(options.loginUrl || \"login\", null, null, \"POST\", this.toJSON());\n      return request.then(function(resp, status, xhr) {\n        var serverAttrs = model.parse(resp, status, xhr);\n        model._finishFetch(serverAttrs);\n        model._handleSaveResult(true);\n        if(!serverAttrs.smsCode)\n          delete model.attributes['smsCode'];\n        return model;\n      })._thenRunCallbacks(options, this);\n    },\n\n    /**\n     * @see ML.Object#save\n     */\n    save: function(arg1, arg2, arg3) {\n      var i, attrs, current, options, saved;\n      if (_.isObject(arg1) || _.isNull(arg1) || _.isUndefined(arg1)) {\n        attrs = arg1;\n        options = arg2;\n      } else {\n        attrs = {};\n        attrs[arg1] = arg2;\n        options = arg3;\n      }\n      options = options || {};\n\n      var newOptions = _.clone(options);\n      newOptions.success = function(model) {\n        model._handleSaveResult(false);\n        if (options.success) {\n          options.success.apply(this, arguments);\n        }\n      };\n      return ML.Object.prototype.save.call(this, attrs, newOptions);\n    },\n\n    /**\n     * Follow a user\n     * @since 0.3.0\n     * @param {} target The target user or user's objectId to follow.\n     * @param {Object} options An optional Backbone-like options object with\n     *     success and error callbacks that will be invoked once the iteration\n     *     has finished.\n     */\n    follow: function(target, options){\n      if(!this.id){\n          throw \"Please signin.\";\n      }\n      if(!target){\n          throw \"Invalid target user.\";\n      }\n      var userObjectId = _.isString(target) ? target: target.id;\n      if(!userObjectId){\n          throw \"Invalid target user.\";\n      }\n      var route = 'users/' + this.id + '/friendship/' + userObjectId;\n      var request = ML._request(route, null, null, 'POST', null);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     * Unfollow a user.\n     * @since 0.3.0\n     * @param {} target The target user or user's objectId to unfollow.\n     * @param options {Object} An optional Backbone-like options object with\n     *     success and error callbacks that will be invoked once the iteration\n     *     has finished.\n     */\n    unfollow: function(target, options){\n      if(!this.id){\n          throw \"Please signin.\";\n      }\n      if(!target){\n          throw \"Invalid target user.\";\n      }\n      var userObjectId = _.isString(target) ? target: target.id;\n      if(!userObjectId){\n          throw \"Invalid target user.\";\n      }\n      var route = 'users/' + this.id + '/friendship/' + userObjectId;\n      var request = ML._request(route, null, null, 'DELETE', null);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     *Create a follower query to query the user's followers.\n     * @since 0.3.0\n     * @see ML.User#followerQuery\n     */\n    followerQuery: function() {\n        return ML.User.followerQuery(this.id);\n    },\n\n    /**\n     *Create a followee query to query the user's followees.\n     * @since 0.3.0\n     * @see ML.User#followeeQuery\n     */\n    followeeQuery: function() {\n        return ML.User.followeeQuery(this.id);\n    },\n\n    /**\n     * @see ML.Object#fetch\n     */\n    fetch: function(options) {\n      var newOptions = options ? _.clone(options) : {};\n      newOptions.success = function(model) {\n        model._handleSaveResult(false);\n        if (options && options.success) {\n          options.success.apply(this, arguments);\n        }\n      };\n      return ML.Object.prototype.fetch.call(this, newOptions);\n    },\n\n    /**\n     * Update user's new password safely based on old password.\n     * @param {String} oldPassword, the old password.\n     * @param {String} newPassword, the new password.\n     * @param {Object} An optional Backbone-like options object with\n     *     success and error callbacks that will be invoked once the iteration\n     *     has finished.\n     */\n    updatePassword: function(oldPassword, newPassword, options) {\n      var route = 'updatePassword';\n      var params = {\n        password: oldPassword,\n        newPassword: newPassword\n      };\n      var request = ML._request(route, null, null, 'POST', params);\n      return request._thenRunCallbacks(options, this);\n    },\n\n    /**\n     * Returns true if <code>current</code> would return this user.\n     * @see ML.User#current\n     */\n    isCurrent: function() {\n      return this._isCurrentUser;\n    },\n\n    /**\n     * Returns get(\"username\").\n     * @return {String}\n     * @see ML.Object#get\n     */\n    getUsername: function() {\n      return this.get(\"username\");\n    },\n\n    /**\n     * Returns get(\"mobilePhoneNumber\").\n     * @return {String}\n     * @see ML.Object#get\n     */\n    getMobilePhoneNumber: function(){\n      return this.get(\"mobilePhoneNumber\");\n    },\n\n    /**\n     * Calls set(\"mobilePhoneNumber\", phoneNumber, options) and returns the result.\n     * @param {String} mobilePhoneNumber\n     * @param {Object} options A Backbone-style options object.\n     * @return {Boolean}\n     * @see ML.Object.set\n     */\n    setMobilePhoneNumber: function(phone, options) {\n      return this.set(\"mobilePhoneNumber\", phone, options);\n    },\n\n    /**\n     * Calls set(\"username\", username, options) and returns the result.\n     * @param {String} username\n     * @param {Object} options A Backbone-style options object.\n     * @return {Boolean}\n     * @see ML.Object.set\n     */\n    setUsername: function(username, options) {\n      return this.set(\"username\", username, options);\n    },\n\n    /**\n     * Calls set(\"password\", password, options) and returns the result.\n     * @param {String} password\n     * @param {Object} options A Backbone-style options object.\n     * @return {Boolean}\n     * @see ML.Object.set\n     */\n    setPassword: function(password, options) {\n      return this.set(\"password\", password, options);\n    },\n\n    /**\n     * Returns get(\"email\").\n     * @return {String}\n     * @see ML.Object#get\n     */\n    getEmail: function() {\n      return this.get(\"email\");\n    },\n\n    /**\n     * Calls set(\"email\", email, options) and returns the result.\n     * @param {String} email\n     * @param {Object} options A Backbone-style options object.\n     * @return {Boolean}\n     * @see ML.Object.set\n     */\n    setEmail: function(email, options) {\n      return this.set(\"email\", email, options);\n    },\n\n    /**\n     * Checks whether this user is the current user and has been authenticated.\n     * @return (Boolean) whether this user is the current user and is logged in.\n     */\n    authenticated: function() {\n      return !!this._sessionToken &&\n          (ML.User.current() && ML.User.current().id === this.id);\n    }\n\n  }, /** @lends ML.User */ {\n    // Class Variables\n\n    // The currently logged-in user.\n    _currentUser: null,\n\n    // Whether currentUser is known to match the serialized version on disk.\n    // This is useful for saving a localstorage check if you try to load\n    // _currentUser frequently while there is none stored.\n    _currentUserMatchesDisk: false,\n\n    // The localStorage key suffix that the current user is stored under.\n    _CURRENT_USER_KEY: \"currentUser\",\n\n    // The mapping of auth provider names to actual providers\n    _authProviders: {},\n\n\n    // Class Methods\n\n    /**\n     * Signs up a new user with a username (or email) and password.\n     * This will create a new ML.User on the server, and also persist the\n     * session in localStorage so that you can access the user using\n     * {@link #current}.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} username The username (or email) to sign up with.\n     * @param {String} password The password to sign up with.\n     * @param {Object} attrs Extra fields to set on the new user.\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled with the user when\n     *     the signup completes.\n     * @see ML.User#signUp\n     */\n    signUp: function(username, password, attrs, options) {\n      attrs = attrs || {};\n      attrs.username = username;\n      attrs.password = password;\n      var user = ML.Object._create(\"_User\");\n      return user.signUp(attrs, options);\n    },\n\n    /**\n     * Logs in a user with a username (or email) and password. On success, this\n     * saves the session to disk, so you can retrieve the currently logged in\n     * user using <code>current</code>.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} username The username (or email) to log in with.\n     * @param {String} password The password to log in with.\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled with the user when\n     *     the login completes.\n     * @see ML.User#logIn\n     */\n    logIn: function(username, password, options) {\n      var user = ML.Object._create(\"_User\");\n      user._finishFetch({ username: username, password: password });\n      return user.logIn(options);\n    },\n\n    /**\n     * Logs in a user with a session token. On success, this saves the session\n     * to disk, so you can retrieve the currently logged in user using\n     * <code>current</code>.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} sessionToken The sessionToken to log in with.\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled with the user when\n     *     the login completes.\n     */\n    become: function(sessionToken, options) {\n      options = options || {};\n\n      var user = ML.Object._create(\"_User\");\n      return ML._request(\n          \"users\",\n          \"me\",\n          null,\n          \"GET\",\n          {\n            useMasterKey: options.useMasterKey,\n            session_token: sessionToken\n          }\n      ).then(function(resp, status, xhr) {\n          var serverAttrs = user.parse(resp, status, xhr);\n          user._finishFetch(serverAttrs);\n          user._handleSaveResult(true);\n          return user;\n\n      })._thenRunCallbacks(options, user);\n    },\n\n    /**\n     * Logs in a user with a mobile phone number and sms code sent by\n     * ML.User.requestLoginSmsCode.On success, this\n     * saves the session to disk, so you can retrieve the currently logged in\n     * user using <code>current</code>.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} mobilePhone The user's mobilePhoneNumber\n     * @param {String} smsCode The sms code sent by ML.User.requestLoginSmsCode\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled with the user when\n     *     the login completes.\n     * @see ML.User#logIn\n     */\n   logInWithMobilePhoneSmsCode: function(mobilePhone, smsCode, options){\n      var options = _.extend({}, options, {\n        loginUrl: 'loginByMobilePhone'\n      });\n      var user = ML.Object._create(\"_User\");\n      user._finishFetch({ mobilePhone: mobilePhone, smsCode: smsCode });\n      return user.logIn(options);\n   },\n\n    /**\n     * Sign up or logs in a user with a mobilePhoneNumber and smsCode.\n     * On success, this saves the session to disk, so you can retrieve the currently\n     * logged in user using <code>current</code>.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} mobilePhoneNumber The user's mobilePhoneNumber.\n     * @param {String} smsCode The sms code sent by ML.Cloud.requestSmsCode\n     * @param {Object} attributes  The user's other attributes such as username etc.\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled with the user when\n     *     the login completes.\n     * @see ML.User#signUpOrlogInWithMobilePhone\n     * @see ML.Cloud.requestSmsCode\n     */\n    signUpOrlogInWithMobilePhone: function(mobilePhoneNumber, smsCode, attrs, options) {\n      attrs = attrs || {};\n      attrs.mobilePhoneNumber = mobilePhoneNumber;\n      attrs.smsCode = smsCode;\n      var user = ML.Object._create(\"_User\");\n      return user.signUpOrlogInWithMobilePhone(attrs, options);\n    },\n\n\n    /**\n     * Logs in a user with a mobile phone number and password. On success, this\n     * saves the session to disk, so you can retrieve the currently logged in\n     * user using <code>current</code>.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} mobilePhone The user's mobilePhoneNumber\n     * @param {String} password The password to log in with.\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is fulfilled with the user when\n     *     the login completes.\n     * @see ML.User#logIn\n     */\n   logInWithMobilePhone: function(mobilePhone, password, options){\n      var user = ML.Object._create(\"_User\");\n      user._finishFetch({ mobilePhoneNumber: mobilePhone, password: password });\n      return user.logIn(options);\n   },\n\n    /**\n     * Logs out the currently logged in user session. This will remove the\n     * session from disk, log out of linked services, and future calls to\n     * <code>current</code> will return <code>null</code>.\n     */\n    logOut: function() {\n      if (ML.User._currentUser !== null) {\n        ML.User._currentUser._logOutWithAll();\n        ML.User._currentUser._isCurrentUser = false;\n      }\n      ML.User._currentUserMatchesDisk = true;\n      ML.User._currentUser = null;\n      ML.localStorage.removeItem(\n          ML._getMLPath(ML.User._CURRENT_USER_KEY));\n    },\n\n    /**\n     *Create a follower query for special user to query the user's followers.\n     * @param userObjectId {String} The user object id.\n     * @since 0.3.0\n     */\n    followerQuery: function(userObjectId) {\n        if(!userObjectId || !_.isString(userObjectId)) {\n          throw \"Invalid user object id.\";\n        }\n        var query = new ML.FriendShipQuery('_Follower');\n        query._friendshipTag ='follower';\n        query.equalTo('user', ML.Object.createWithoutData('_User', userObjectId));\n        return query;\n    },\n\n    /**\n     *Create a followee query for special user to query the user's followees.\n     * @param userObjectId {String} The user object id.\n     * @since 0.3.0\n     */\n    followeeQuery: function(userObjectId) {\n        if(!userObjectId || !_.isString(userObjectId)) {\n          throw \"Invalid user object id.\";\n        }\n        var query = new ML.FriendShipQuery('_Followee');\n        query._friendshipTag ='followee';\n        query.equalTo('user', ML.Object.createWithoutData('_User', userObjectId));\n        return query;\n    },\n\n    /**\n     * Requests a password reset email to be sent to the specified email address\n     * associated with the user account. This email allows the user to securely\n     * reset their password on the ML site.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} email The email address associated with the user that\n     *     forgot their password.\n     * @param {Object} options A Backbone-style options object.\n     */\n    requestPasswordReset: function(email, options) {\n      var json = { email: email };\n      var request = ML._request(\"requestPasswordReset\", null, null, \"POST\",\n                                   json);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     * Requests a verify email to be sent to the specified email address\n     * associated with the user account. This email allows the user to securely\n     * verify their email address on the ML site.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} email The email address associated with the user that\n     *     doesn't verify their email address.\n     * @param {Object} options A Backbone-style options object.\n     */\n    requestEmailVerify: function(email, options) {\n      var json = { email: email };\n      var request = ML._request(\"requestEmailVerify\", null, null, \"POST\",\n                                   json);\n      return request._thenRunCallbacks(options);\n    },\n\n   /**\n    * @Deprecated typo error, please use requestEmailVerify\n    */\n    requestEmailVerfiy: function(email, options) {\n      var json = { email: email };\n      var request = ML._request(\"requestEmailVerify\", null, null, \"POST\",\n                                   json);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     * Requests a verify sms code to be sent to the specified mobile phone\n     * number associated with the user account. This sms code allows the user to\n     * verify their mobile phone number by calling ML.User.verifyMobilePhone\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} mobilePhone The mobile phone number  associated with the\n     *                  user that doesn't verify their mobile phone number.\n     * @param {Object} options A Backbone-style options object.\n     */\n    requestMobilePhoneVerify: function(mobilePhone, options){\n      var json = { mobilePhoneNumber: mobilePhone };\n      var request = ML._request(\"requestMobilePhoneVerify\", null, null, \"POST\",\n                                   json);\n      return request._thenRunCallbacks(options);\n    },\n\n\n    /**\n     * Requests a reset password sms code to be sent to the specified mobile phone\n     * number associated with the user account. This sms code allows the user to\n     * reset their account's password by calling ML.User.resetPasswordBySmsCode\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} mobilePhone The mobile phone number  associated with the\n     *                  user that doesn't verify their mobile phone number.\n     * @param {Object} options A Backbone-style options object.\n     */\n    requestPasswordResetBySmsCode: function(mobilePhone, options){\n      var json = { mobilePhoneNumber: mobilePhone };\n      var request = ML._request(\"requestPasswordResetBySmsCode\", null, null, \"POST\",\n                                   json);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     * Makes a call to reset user's account password by sms code and new password.\n    * The sms code is sent by ML.User.requestPasswordResetBySmsCode.\n     * @param {String} code The sms code sent by ML.User.Cloud.requestSmsCode\n     * @param {String} password The new password.\n     * @param {Object} options A Backbone-style options object\n     * @return {ML.Promise} A promise that will be resolved with the result\n     * of the function.\n     */\n    resetPasswordBySmsCode: function(code, password, options){\n      var json = { password: password};\n      var request = ML._request(\"resetPasswordBySmsCode\", null, code, \"PUT\",\n                                json);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     * Makes a call to verify sms code that sent by ML.User.Cloud.requestSmsCode\n     * If verify successfully,the user mobilePhoneVerified attribute will be true.\n     * @param {String} code The sms code sent by ML.User.Cloud.requestSmsCode\n     * @param {Object} options A Backbone-style options object\n     * @return {ML.Promise} A promise that will be resolved with the result\n     * of the function.\n     */\n    verifyMobilePhone: function(code, options){\n      var request = ML._request(\"verifyMobilePhone\", null, code, \"POST\",\n                                null);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     * Requests a logIn sms code to be sent to the specified mobile phone\n     * number associated with the user account. This sms code allows the user to\n     * login by ML.User.logInWithMobilePhoneSmsCode function.\n     *\n     * <p>Calls options.success or options.error on completion.</p>\n     *\n     * @param {String} mobilePhone The mobile phone number  associated with the\n     *           user that want to login by ML.User.logInWithMobilePhoneSmsCode\n     * @param {Object} options A Backbone-style options object.\n     */\n    requestLoginSmsCode: function(mobilePhone, options){\n      var json = { mobilePhone: mobilePhone };\n      var request = ML._request(\"requestLoginSmsCode\", null, null, \"POST\",\n                                   json);\n      return request._thenRunCallbacks(options);\n    },\n\n    /**\n     * Retrieves the currently logged in MLUser with a valid session,\n     * either from memory or localStorage, if necessary.\n     * @return {ML.Object} The currently logged in ML.User.\n     */\n    current: function() {\n      if (ML.User._currentUser) {\n        return ML.User._currentUser;\n      }\n\n      if (ML.User._currentUserMatchesDisk) {\n\n        return ML.User._currentUser;\n      }\n\n      // Load the user from local storage.\n      ML.User._currentUserMatchesDisk = true;\n\n      var userData = ML.localStorage.getItem(ML._getMLPath(\n          ML.User._CURRENT_USER_KEY));\n      if (!userData) {\n\n        return null;\n      }\n      ML.User._currentUser = ML.Object._create(\"_User\");\n      ML.User._currentUser._isCurrentUser = true;\n\n      var json = JSON.parse(userData);\n      ML.User._currentUser.id = json._id;\n      delete json._id;\n      ML.User._currentUser._sessionToken = json._sessionToken;\n      delete json._sessionToken;\n      ML.User._currentUser._finishFetch(json);\n      //ML.User._currentUser.set(json);\n\n      ML.User._currentUser._synchronizeAllAuthData();\n      ML.User._currentUser._refreshCache();\n      ML.User._currentUser._opSetQueue = [{}];\n      return ML.User._currentUser;\n    },\n\n    /**\n     * Persists a user as currentUser to localStorage, and into the singleton.\n     */\n    _saveCurrentUser: function(user) {\n      if (ML.User._currentUser !== user) {\n        ML.User.logOut();\n      }\n      user._isCurrentUser = true;\n      ML.User._currentUser = user;\n      ML.User._currentUserMatchesDisk = true;\n\n      var json = user.toJSON();\n      json._id = user.id;\n      json._sessionToken = user._sessionToken;\n      ML.localStorage.setItem(\n          ML._getMLPath(ML.User._CURRENT_USER_KEY),\n          JSON.stringify(json));\n    },\n\n    _registerAuthenticationProvider: function(provider) {\n      ML.User._authProviders[provider.getAuthType()] = provider;\n      // Synchronize the current user with the auth provider.\n      if (ML.User.current()) {\n        ML.User.current()._synchronizeAuthData(provider.getAuthType());\n      }\n    },\n\n    _logInWith: function(provider, options) {\n      var user = ML.Object._create(\"_User\");\n      return user._linkWith(provider, options);\n    }\n\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/user.js\n **/","'use strict';\n\nvar _ = require('underscore');\n\n// ML.Query is a way to create a list of ML.Objects.\nmodule.exports = function(ML) {\n  /**\n   * Creates a new maxleap ML.Query for the given ML.Object subclass.\n   * @param objectClass -\n   *   An instance of a subclass of ML.Object, or a ML className string.\n   * @class\n   *\n   * <p>ML.Query defines a query that is used to fetch ML.Objects. The\n   * most common use case is finding all objects that match a query through the\n   * <code>find</code> method. For example, this sample code fetches all objects\n   * of class <code>MyClass</code>. It calls a different function depending on\n   * whether the fetch succeeded or not.\n   *\n   * <pre>\n   * var query = new ML.Query(MyClass);\n   * query.find({\n   *   success: function(results) {\n   *     // results is an array of ML.Object.\n   *   },\n   *\n   *   error: function(error) {\n   *     // error is an instance of ML.Error.\n   *   }\n   * });</pre></p>\n   *\n   * <p>A ML.Query can also be used to retrieve a single object whose id is\n   * known, through the get method. For example, this sample code fetches an\n   * object of class <code>MyClass</code> and id <code>myId</code>. It calls a\n   * different function depending on whether the fetch succeeded or not.\n   *\n   * <pre>\n   * var query = new ML.Query(MyClass);\n   * query.get(myId, {\n   *   success: function(object) {\n   *     // object is an instance of ML.Object.\n   *   },\n   *\n   *   error: function(object, error) {\n   *     // error is an instance of ML.Error.\n   *   }\n   * });</pre></p>\n   *\n   * <p>A ML.Query can also be used to count the number of objects that match\n   * the query without retrieving all of those objects. For example, this\n   * sample code counts the number of objects of the class <code>MyClass</code>\n   * <pre>\n   * var query = new ML.Query(MyClass);\n   * query.count({\n   *   success: function(number) {\n   *     // There are number instances of MyClass.\n   *   },\n   *\n   *   error: function(error) {\n   *     // error is an instance of ML.Error.\n   *   }\n   * });</pre></p>\n   */\n  ML.Query = function(objectClass) {\n    if (_.isString(objectClass)) {\n      objectClass = ML.Object._getSubclass(objectClass);\n    }\n\n    this.objectClass = objectClass;\n\n    this.className = objectClass.prototype.className;\n\n    this._where = {};\n    this._include = [];\n    this._limit = -1; // negative limit means, do not send a limit\n    this._skip = 0;\n    this._extraOptions = {};\n  };\n\n  /**\n   * Constructs a ML.Query that is the OR of the passed in queries.  For\n   * example:\n   * <pre>var compoundQuery = ML.Query.or(query1, query2, query3);</pre>\n   *\n   * will create a compoundQuery that is an or of the query1, query2, and\n   * query3.\n   * @param {...ML.Query} var_args The list of queries to OR.\n   * @return {ML.Query} The query that is the OR of the passed in queries.\n   */\n  ML.Query.or = function() {\n    var queries = _.toArray(arguments);\n    var className = null;\n    ML._arrayEach(queries, function(q) {\n      if (_.isNull(className)) {\n        className = q.className;\n      }\n\n      if (className !== q.className) {\n        throw \"All queries must be for the same class\";\n      }\n    });\n    var query = new ML.Query(className);\n    query._orQuery(queries);\n    return query;\n  };\n\n  /**\n   * Constructs a ML.Query that is the AND of the passed in queries.  For\n   * example:\n   * <pre>var compoundQuery = ML.Query.and(query1, query2, query3);</pre>\n   *\n   * will create a compoundQuery that is an 'and' of the query1, query2, and\n   * query3.\n   * @param {...ML.Query} var_args The list of queries to AND.\n   * @return {ML.Query} The query that is the AND of the passed in queries.\n   */\n  ML.Query.and = function() {\n    var queries = _.toArray(arguments);\n    var className = null;\n    ML._arrayEach(queries, function(q) {\n      if (_.isNull(className)) {\n        className = q.className;\n      }\n\n      if (className !== q.className) {\n        throw \"All queries must be for the same class\";\n      }\n    });\n    var query = new ML.Query(className);\n    query._andQuery(queries);\n    return query;\n  };\n\n  /**\n   * Retrieves a list of MLObjects that satisfy the CQL.\n   * CQL syntax please see <a href='https://cn.maxleap.com/docs/cql_guide.html'>CQL Guide.</a>\n   * Either options.success or options.error is called when the find\n   * completes.\n   *\n   * @param {String} cql,  A CQL string, see <a href='https://cn.maxleap.com/docs/cql_guide.html'>CQL Guide.</a>\n   * @param {Array} pvalues, An array contains placeholder values.\n   * @param {Object} options A Backbone-style options object,it's optional.\n   * @return {ML.Promise} A promise that is resolved with the results when\n   * the query completes,it's optional.\n   */\n  ML.Query.doCloudQuery = function(cql, pvalues, options) {\n    var params = { cql: cql };\n    if(_.isArray(pvalues)){\n      params.pvalues = pvalues;\n    } else {\n      options = pvalues;\n    }\n\n    var request = ML._request(\"cloudQuery\", null, null, 'GET', params);\n    return request.then(function(response) {\n      //query to process results.\n      var query = new ML.Query(response.className);\n      var results = _.map(response.results, function(json) {\n        var obj = query._newObject(response);\n        obj._finishFetch(query._processResult(json), true);\n          return obj;\n      });\n      return {\n        results: results,\n        count:  response.count,\n        className: response.className\n      };\n    })._thenRunCallbacks(options);\n  };\n\n  ML.Query._extend = ML._extend;\n\n  ML.Query.prototype = {\n     //hook to iterate result. Added by dennis<xzhuang@maxleap.com>.\n     _processResult: function(obj){\n        return obj;\n    },\n\n    /**\n     * Constructs a ML.Object whose id is already known by fetching data from\n     * the server.  Either options.success or options.error is called when the\n     * find completes.\n     *\n     * @param {} objectId The id of the object to be fetched.\n     * @param {Object} options A Backbone-style options object.\n     */\n    get: function(objectId, options) {\n      if(!objectId) {\n        var errorObject = new ML.Error(ML.Error.OBJECT_NOT_FOUND,\n                                          \"Object not found.\");\n        return ML.Promise.error(errorObject);\n      }\n\n      var self = this;\n      self.equalTo('objectId', objectId);\n\n      return self.first().then(function(response) {\n        if (!ML._.isEmpty(response)) {\n          return response;\n        }\n\n        var errorObject = new ML.Error(ML.Error.OBJECT_NOT_FOUND,\n                                          \"Object not found.\");\n        return ML.Promise.error(errorObject);\n\n      })._thenRunCallbacks(options, null);\n    },\n\n    /**\n     * Returns a JSON representation of this query.\n     * @return {Object}\n     */\n    toJSON: function() {\n      var params = {\n        where: this._where\n      };\n\n      if (this._include.length > 0) {\n        params.include = this._include.join(\",\");\n      }\n      if (this._select) {\n        params.keys = this._select.join(\",\");\n      }\n      if (this._limit >= 0) {\n        params.limit = this._limit;\n      }\n      if (this._skip > 0) {\n        params.skip = this._skip;\n      }\n      if (this._order !== undefined) {\n        params.order = this._order;\n      }\n\n      ML._objectEach(this._extraOptions, function(v, k) {\n        params[k] = v;\n      });\n\n      return params;\n    },\n\n    _newObject: function(response){\n      var obj;\n      if (response && response.className) {\n        obj = new ML.Object(response.className);\n      } else {\n        obj = new this.objectClass();\n      }\n      return obj;\n    },\n    _createRequest: function(params){\n      //后端接收的api是 /2.0/classes/{{classname}}/query\n      return ML._request(\"classes\", this.className + '/query', null, \"POST\",\n                                   params || this.toJSON());\n    },\n\n    /**\n     * Retrieves a list of MLObjects that satisfy this query.\n     * Either options.success or options.error is called when the find\n     * completes.\n     *\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is resolved with the results when\n     * the query completes.\n     */\n    find: function(options) {\n      var self = this;\n\n      var request = this._createRequest();\n\n      return request.then(function(response) {\n        return _.map(response.results, function(json) {\n          var obj = self._newObject(response);\n          obj._finishFetch(self._processResult(json), true);\n          return obj;\n        });\n      })._thenRunCallbacks(options);\n    },\n\n   /**\n    * Delete objects retrieved by this query.\n    * @param {Object} options Standard options object with success and error\n    *     callbacks.\n    * @return {ML.Promise} A promise that is fulfilled when the save\n    *     completes.\n    */\n     destroyAll: function(options){\n       var self = this;\n       return self.find().then(function(objects){\n           return ML.Object.destroyAll(objects);\n       })._thenRunCallbacks(options);\n     },\n\n    /**\n     * Counts the number of objects that match this query.\n     * Either options.success or options.error is called when the count\n     * completes.\n     *\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is resolved with the count when\n     * the query completes.\n     */\n    count: function(options) {\n      var params = this.toJSON();\n      params.limit = 0;\n      params.count = 1;\n      var request = this._createRequest(params);\n      return request.then(function(response) {\n        return response.count;\n      })._thenRunCallbacks(options);\n    },\n\n    /**\n     * Retrieves at most one ML.Object that satisfies this query.\n     *\n     * Either options.success or options.error is called when it completes.\n     * success is passed the object if there is one. otherwise, undefined.\n     *\n     * @param {Object} options A Backbone-style options object.\n     * @return {ML.Promise} A promise that is resolved with the object when\n     * the query completes.\n     */\n    first: function(options) {\n      var self = this;\n\n      var params = this.toJSON();\n      params.limit = 1;\n      var request = this._createRequest(params);\n\n      return request.then(function(response) {\n        return _.map(response.results, function(json) {\n          var obj = self._newObject();\n          obj._finishFetch(self._processResult(json), true);\n          return obj;\n        })[0];\n      })._thenRunCallbacks(options);\n    },\n\n    /**\n     * Returns a new instance of ML.Collection backed by this query.\n     * @return {ML.Collection}\n     */\n    collection: function(items, options) {\n      options = options || {};\n      return new ML.Collection(items, _.extend(options, {\n        model: this._objectClass || this.objectClass,\n        query: this\n      }));\n    },\n\n    /**\n     * Sets the number of results to skip before returning any results.\n     * This is useful for pagination.\n     * Default is to skip zero results.\n     * @param {Number} n the number of results to skip.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    skip: function(n) {\n      this._skip = n;\n      return this;\n    },\n\n    /**\n     * Sets the limit of the number of results to return. The default limit is\n     * 100, with a maximum of 1000 results being returned at a time.\n     * @param {Number} n the number of results to limit to.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    limit: function(n) {\n      this._limit = n;\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * be equal to the provided value.\n     * @param {String} key The key to check.\n     * @param value The value that the ML.Object must contain.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    equalTo: function(key, value) {\n      this._where[key] = ML._encode(value);\n      return this;\n    },\n\n    /**\n     * Helper for condition queries\n     */\n    _addCondition: function(key, condition, value) {\n      // Check if we already have a condition\n      if (!this._where[key]) {\n        this._where[key] = {};\n      }\n      this._where[key][condition] = ML._encode(value);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular\n     * <strong>array</strong> key's length to be equal to the provided value.\n     * @param {String} key The array key to check.\n     * @param value The length value.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    sizeEqualTo: function(key, value) {\n      this._addCondition(key, \"$size\", value);\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * be not equal to the provided value.\n     * @param {String} key The key to check.\n     * @param value The value that must not be equalled.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    notEqualTo: function(key, value) {\n      this._addCondition(key, \"$ne\", value);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * be less than the provided value.\n     * @param {String} key The key to check.\n     * @param value The value that provides an upper bound.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    lessThan: function(key, value) {\n      this._addCondition(key, \"$lt\", value);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * be greater than the provided value.\n     * @param {String} key The key to check.\n     * @param value The value that provides an lower bound.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    greaterThan: function(key, value) {\n      this._addCondition(key, \"$gt\", value);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * be less than or equal to the provided value.\n     * @param {String} key The key to check.\n     * @param value The value that provides an upper bound.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    lessThanOrEqualTo: function(key, value) {\n      this._addCondition(key, \"$lte\", value);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * be greater than or equal to the provided value.\n     * @param {String} key The key to check.\n     * @param value The value that provides an lower bound.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    greaterThanOrEqualTo: function(key, value) {\n      this._addCondition(key, \"$gte\", value);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * be contained in the provided list of values.\n     * @param {String} key The key to check.\n     * @param {Array} values The values that will match.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    containedIn: function(key, values) {\n      this._addCondition(key, \"$in\", values);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * not be contained in the provided list of values.\n     * @param {String} key The key to check.\n     * @param {Array} values The values that will not match.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    notContainedIn: function(key, values) {\n      this._addCondition(key, \"$nin\", values);\n      return this;\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's value to\n     * contain each one of the provided list of values.\n     * @param {String} key The key to check.  This key's value must be an array.\n     * @param {Array} values The values that will match.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    containsAll: function(key, values) {\n      this._addCondition(key, \"$all\", values);\n      return this;\n    },\n\n\n    /**\n     * Add a constraint for finding objects that contain the given key.\n     * @param {String} key The key that should exist.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    exists: function(key) {\n      this._addCondition(key, \"$exists\", true);\n      return this;\n    },\n\n    /**\n     * Add a constraint for finding objects that do not contain a given key.\n     * @param {String} key The key that should not exist\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    doesNotExist: function(key) {\n      this._addCondition(key, \"$exists\", false);\n      return this;\n    },\n\n    /**\n     * Add a regular expression constraint for finding string values that match\n     * the provided regular expression.\n     * This may be slow for large datasets.\n     * @param {String} key The key that the string to match is stored in.\n     * @param {RegExp} regex The regular expression pattern to match.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    matches: function(key, regex, modifiers) {\n      this._addCondition(key, \"$regex\", regex);\n      if (!modifiers) { modifiers = \"\"; }\n      // Javascript regex options support mig as inline options but store them\n      // as properties of the object. We support mi & should migrate them to\n      // modifiers\n      if (regex.ignoreCase) { modifiers += 'i'; }\n      if (regex.multiline) { modifiers += 'm'; }\n\n      if (modifiers && modifiers.length) {\n        this._addCondition(key, \"$options\", modifiers);\n      }\n      return this;\n    },\n\n    /**\n     * Add a constraint that requires that a key's value matches a ML.Query\n     * constraint.\n     * @param {String} key The key that the contains the object to match the\n     *                     query.\n     * @param {ML.Query} query The query that should match.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    matchesQuery: function(key, query) {\n      var queryJSON = query.toJSON();\n      queryJSON.className = query.className;\n      this._addCondition(key, \"$inQuery\", queryJSON);\n      return this;\n    },\n\n   /**\n     * Add a constraint that requires that a key's value not matches a\n     * ML.Query constraint.\n     * @param {String} key The key that the contains the object to match the\n     *                     query.\n     * @param {ML.Query} query The query that should not match.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    doesNotMatchQuery: function(key, query) {\n      var queryJSON = query.toJSON();\n      queryJSON.className = query.className;\n      this._addCondition(key, \"$notInQuery\", queryJSON);\n      return this;\n    },\n\n\n    /**\n     * Add a constraint that requires that a key's value matches a value in\n     * an object returned by a different ML.Query.\n     * @param {String} key The key that contains the value that is being\n     *                     matched.\n     * @param {String} queryKey The key in the objects returned by the query to\n     *                          match against.\n     * @param {ML.Query} query The query to run.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    matchesKeyInQuery: function(key, queryKey, query) {\n      var queryJSON = query.toJSON();\n      queryJSON.className = query.className;\n      this._addCondition(key, \"$select\",\n                         { key: queryKey, query: queryJSON });\n      return this;\n    },\n\n    /**\n     * Add a constraint that requires that a key's value not match a value in\n     * an object returned by a different ML.Query.\n     * @param {String} key The key that contains the value that is being\n     *                     excluded.\n     * @param {String} queryKey The key in the objects returned by the query to\n     *                          match against.\n     * @param {ML.Query} query The query to run.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    doesNotMatchKeyInQuery: function(key, queryKey, query) {\n      var queryJSON = query.toJSON();\n      queryJSON.className = query.className;\n      this._addCondition(key, \"$dontSelect\",\n                         { key: queryKey, query: queryJSON });\n      return this;\n    },\n\n    /**\n     * Add constraint that at least one of the passed in queries matches.\n     * @param {Array} queries\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    _orQuery: function(queries) {\n      var queryJSON = _.map(queries, function(q) {\n        return q.toJSON().where;\n      });\n\n      this._where.$or = queryJSON;\n      return this;\n    },\n\n    /**\n     * Add constraint that both of the passed in queries matches.\n     * @param {Array} queries\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    _andQuery: function(queries) {\n      var queryJSON = _.map(queries, function(q) {\n        return q.toJSON().where;\n      });\n\n      this._where.$and = queryJSON;\n      return this;\n    },\n\n\n    /**\n     * Converts a string into a regex that matches it.\n     * Surrounding with \\Q .. \\E does this, we just need to escape \\E's in\n     * the text separately.\n     */\n    _quote: function(s) {\n      return \"\\\\Q\" + s.replace(\"\\\\E\", \"\\\\E\\\\\\\\E\\\\Q\") + \"\\\\E\";\n    },\n\n    /**\n     * Add a constraint for finding string values that contain a provided\n     * string.  This may be slow for large datasets.\n     * @param {String} key The key that the string to match is stored in.\n     * @param {String} substring The substring that the value must contain.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    contains: function(key, value) {\n      this._addCondition(key, \"$regex\", this._quote(value));\n      return this;\n    },\n\n    /**\n     * Add a constraint for finding string values that start with a provided\n     * string.  This query will use the backend index, so it will be fast even\n     * for large datasets.\n     * @param {String} key The key that the string to match is stored in.\n     * @param {String} prefix The substring that the value must start with.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    startsWith: function(key, value) {\n      this._addCondition(key, \"$regex\", \"^\" + this._quote(value));\n      return this;\n    },\n\n    /**\n     * Add a constraint for finding string values that end with a provided\n     * string.  This will be slow for large datasets.\n     * @param {String} key The key that the string to match is stored in.\n     * @param {String} suffix The substring that the value must end with.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    endsWith: function(key, value) {\n      this._addCondition(key, \"$regex\", this._quote(value) + \"$\");\n      return this;\n    },\n\n    /**\n     * Sorts the results in ascending order by the given key.\n     *\n     * @param {String} key The key to order by.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    ascending: function(key) {\n      this._order = key;\n      return this;\n    },\n\n  /**\n   * Also sorts the results in ascending order by the given key. The previous sort keys have\n   * precedence over this key.\n   *\n   * @param {String} key The key to order by\n   * @return {ML.Query} Returns the query so you can chain this call.\n   */\n   addAscending: function(key){\n     if(this._order)\n       this._order +=  ','  + key;\n    else\n       this._order = key;\n    return this;\n   },\n\n    /**\n     * Sorts the results in descending order by the given key.\n     *\n     * @param {String} key The key to order by.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    descending: function(key) {\n      this._order = \"-\" + key;\n      return this;\n    },\n\n     /**\n   * Also sorts the results in descending order by the given key. The previous sort keys have\n   * precedence over this key.\n   *\n   * @param {String} key The key to order by\n   * @return {ML.Query} Returns the query so you can chain this call.\n   */\n   addDescending: function(key){\n     if(this._order)\n       this._order += ',-' + key;\n     else\n       this._order = '-' + key;\n     return key;\n   },\n\n    /**\n     * Add a proximity based constraint for finding objects with key point\n     * values near the point given.\n     * @param {String} key The key that the ML.GeoPoint is stored in.\n     * @param {ML.GeoPoint} point The reference ML.GeoPoint that is used.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    near: function(key, point) {\n      if (!(point instanceof ML.GeoPoint)) {\n        // Try to cast it to a GeoPoint, so that near(\"loc\", [20,30]) works.\n        point = new ML.GeoPoint(point);\n      }\n      this._addCondition(key, \"$nearSphere\", point);\n      return this;\n    },\n\n    /**\n     * Add a proximity based constraint for finding objects with key point\n     * values near the point given and within the maximum distance given.\n     * @param {String} key The key that the ML.GeoPoint is stored in.\n     * @param {ML.GeoPoint} point The reference ML.GeoPoint that is used.\n     * @param maxDistance Maximum distance (in radians) of results to return.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    withinRadians: function(key, point, distance) {\n      this.near(key, point);\n      this._addCondition(key, \"$maxDistance\", distance);\n      return this;\n    },\n\n    /**\n     * Add a proximity based constraint for finding objects with key point\n     * values near the point given and within the maximum distance given.\n     * Radius of earth used is 3958.8 miles.\n     * @param {String} key The key that the ML.GeoPoint is stored in.\n     * @param {ML.GeoPoint} point The reference ML.GeoPoint that is used.\n     * @param {Number} maxDistance Maximum distance (in miles) of results to\n     *     return.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    withinMiles: function(key, point, distance) {\n      return this.withinRadians(key, point, distance / 3958.8);\n    },\n\n    /**\n     * Add a proximity based constraint for finding objects with key point\n     * values near the point given and within the maximum distance given.\n     * Radius of earth used is 6371.0 kilometers.\n     * @param {String} key The key that the ML.GeoPoint is stored in.\n     * @param {ML.GeoPoint} point The reference ML.GeoPoint that is used.\n     * @param {Number} maxDistance Maximum distance (in kilometers) of results\n     *     to return.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    withinKilometers: function(key, point, distance) {\n      return this.withinRadians(key, point, distance / 6371.0);\n    },\n\n    /**\n     * Add a constraint to the query that requires a particular key's\n     * coordinates be contained within a given rectangular geographic bounding\n     * box.\n     * @param {String} key The key to be constrained.\n     * @param {ML.GeoPoint} southwest\n     *     The lower-left inclusive corner of the box.\n     * @param {ML.GeoPoint} northeast\n     *     The upper-right inclusive corner of the box.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    withinGeoBox: function(key, southwest, northeast) {\n      if (!(southwest instanceof ML.GeoPoint)) {\n        southwest = new ML.GeoPoint(southwest);\n      }\n      if (!(northeast instanceof ML.GeoPoint)) {\n        northeast = new ML.GeoPoint(northeast);\n      }\n      this._addCondition(key, '$within', { '$box': [southwest, northeast] });\n      return this;\n    },\n\n    /**\n     * Include nested ML.Objects for the provided key.  You can use dot\n     * notation to specify which fields in the included object are also fetch.\n     * @param {String} key The name of the key to include.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    include: function() {\n      var self = this;\n      ML._arrayEach(arguments, function(key) {\n        if (_.isArray(key)) {\n          self._include = self._include.concat(key);\n        } else {\n          self._include.push(key);\n        }\n      });\n      return this;\n    },\n\n    /**\n     * Restrict the fields of the returned ML.Objects to include only the\n     * provided keys.  If this is called multiple times, then all of the keys\n     * specified in each of the calls will be included.\n     * @param {Array} keys The names of the keys to include.\n     * @return {ML.Query} Returns the query, so you can chain this call.\n     */\n    select: function() {\n      var self = this;\n      this._select = this._select || [];\n      ML._arrayEach(arguments, function(key) {\n        if (_.isArray(key)) {\n          self._select = self._select.concat(key);\n        } else {\n          self._select.push(key);\n        }\n      });\n      return this;\n    },\n\n    /**\n     * Iterates over each result of a query, calling a callback for each one. If\n     * the callback returns a promise, the iteration will not continue until\n     * that promise has been fulfilled. If the callback returns a rejected\n     * promise, then iteration will stop with that error. The items are\n     * processed in an unspecified order. The query may not have any sort order,\n     * and may not use limit or skip.\n     * @param callback {Function} Callback that will be called with each result\n     *     of the query.\n     * @param options {Object} An optional Backbone-like options object with\n     *     success and error callbacks that will be invoked once the iteration\n     *     has finished.\n     * @return {ML.Promise} A promise that will be fulfilled once the\n     *     iteration has completed.\n     */\n    each: function(callback, options) {\n      options = options || {};\n\n      if (this._order || this._skip || (this._limit >= 0)) {\n        var error =\n          \"Cannot iterate on a query with sort, skip, or limit.\";\n        return ML.Promise.error(error)._thenRunCallbacks(options);\n      }\n\n      var promise = new ML.Promise();\n\n      var query = new ML.Query(this.objectClass);\n      // We can override the batch size from the options.\n      // This is undocumented, but useful for testing.\n      query._limit = options.batchSize || 100;\n      query._where = _.clone(this._where);\n      query._include = _.clone(this._include);\n\n      query.ascending('objectId');\n\n      var finished = false;\n      return ML.Promise._continueWhile(function() {\n        return !finished;\n\n      }, function() {\n        return query.find().then(function(results) {\n          var callbacksDone = ML.Promise.as();\n          ML._.each(results, function(result) {\n            callbacksDone = callbacksDone.then(function() {\n              return callback(result);\n            });\n          });\n\n          return callbacksDone.then(function() {\n            if (results.length >= query._limit) {\n              query.greaterThan(\"objectId\", results[results.length - 1].id);\n            } else {\n              finished = true;\n            }\n          });\n        });\n      })._thenRunCallbacks(options);\n    }\n  };\n\n   ML.FriendShipQuery = ML.Query._extend({\n     _objectClass: ML.User,\n     _newObject: function(){\n      return new ML.User();\n    },\n     _processResult: function(json){\n      var user = json[this._friendshipTag];\n      if(user.__type === 'Pointer' && user.className === '_User'){\n        delete user.__type;\n        delete user.className;\n      }\n      return user;\n    },\n   });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/query.js\n **/","'use strict';\nvar _ = require('underscore');\nmodule.exports = function (ML) {\n  /**\n   * ML.Analytics collects data of user actions and analytics it in MaxLeap.\n   * @param {Object} options The initial configuration\n   * @constructor\n   */\n  ML.Analytics = function(options){\n    var UUID = uuid.v4();\n    var UNKNOWN = this.UNKNOWN = '0,0';\n    var INSTALLATION_FLAG = 'ml_installation_flag';\n    var REFERRER_START = '8cf1f64d97224f6eba3867b57822f528';\n    var detector = new ML.Detector();\n\n    var installation = ML.store.get(INSTALLATION_FLAG);\n    if(!installation){\n      installation = uuid.v4();\n    }\n    this.options = _.extend({\n      sdkVersion: ML.VERSION,\n      appUserId: installation,\n      sessionId: UUID,\n      deviceId: installation,\n      duration: 0,\n      push: false,\n      upgrade: false,\n      url: window.location.href,\n      referer: document.referrer || REFERRER_START,\n      userAgent: window.navigator.userAgent,\n      os: 'web',\n      osVersion: detector.getOSName() + ' ' + detector.getOSVersion(),\n      resolution: detector.getResolution(),\n      language: detector.getLanguage(),\n      userCreateTime: new Date().getTime(),\n      startTime: new Date().getTime(),\n      ctimestamp: new Date().getTime(),\n      channel: UNKNOWN,\n      network: UNKNOWN,\n      carrier: UNKNOWN,\n      national: UNKNOWN,\n      deviceModel: UNKNOWN\n    }, options);\n\n    this.trackPageBegin();\n    //Track new user only one time.\n    if(!ML.store.get(INSTALLATION_FLAG)){\n      this._trackNewUser();\n    }\n    \n    if(!ML.store.get(INSTALLATION_FLAG)){\n      ML.store.set(INSTALLATION_FLAG, installation, { expires: '1Y' });\n    }\n  };\n\n  _.extend(ML.Analytics.prototype, /** @lends ML.Analytics.prototype */{\n    /**\n     * Track data when an user open a page.\n     * @returns {Promise}\n     */\n    trackPageBegin: function(){\n      var data = {\n        PageView: [\n          _.extend({}, this.options, {\n            uuid: uuid.v4()\n          })\n        ]\n      };\n\n      this._trackSessionBegin();\n      this._trackTimelineSession();\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    },\n    /**\n     * Track custom event.\n     * @param {String} eventId Id of the custom event.\n     * @param {Object} attrs Key-value map of the custom event.\n     * @returns {Promise}\n     */\n    trackEvent: function(eventId, attrs){\n      var data = {\n        Event: [\n          _.extend({}, this.options, {\n            eventId: eventId,\n            attrs: attrs,\n            uuid: uuid.v4()\n          })\n        ]\n      };\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    },\n\n    /**\n     * Track data when an user login.\n     * @param {Object} data Event data of user login.\n     * @returns {Promise}\n     */\n    trackUserlogin: function(data){\n      var data = {\n        TimeLineEvent: [\n          _.extend({}, this.options, {\n            eventId: data.eventId,\n            eventName: this.UNKNOWN,\n            eventNickName: this.UNKNOWN,\n            eventType: 1,\n            uuid: uuid.v4()\n          })\n        ]\n      };\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    },\n\n    /**\n     * Track data when an user register.\n     * @param {Object} Event data of user register.\n     * @returns {Promise}\n     */\n    trackUserRegister: function(data){\n      var data = {\n        TimeLineEvent: [\n          _.extend({}, this.options, {\n            eventId: data.eventId,\n            eventName: this.UNKNOWN,\n            eventNickName: this.UNKNOWN,\n            eventType: 0,\n            uuid: uuid.v4()\n          })\n        ]\n      };\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    },\n\n    /**\n     * Track data when an user logout.\n     * @param {Object} Event data of user logout.\n     * @returns {Promise}\n     */\n    trackUserLogout: function(data){\n      var data = {\n        TimeLineEvent: [\n          _.extend({}, this.options, {\n            eventId: data.eventId,\n            eventName: this.UNKNOWN,\n            eventNickName: this.UNKNOWN,\n            eventType: 2,\n            uuid: uuid.v4()\n          })\n        ]\n      };\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    },\n\n    /**\n     * Track data when an user open a page.\n     * @param {Object} Event data of session start.\n     * @returns {Promise}\n     */\n    trackSessionStart: function(data){\n      var data = {\n        TimeLineEvent: [\n          _.extend({}, this.options, {\n            eventId: data.eventId,\n            eventName: this.UNKNOWN,\n            eventNickName: this.UNKNOWN,\n            eventType: 3,\n            uuid: uuid.v4()\n          })\n        ]\n      };\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    },\n\n    /**\n     * Track origin event.\n     * @param data\n     * @returns {*|Promise}\n     */\n    trackOriginEvent: function (data) {\n      return ML.Analytics._request(data, {appId: this.options.appId}, {\n        url: '2.0/track/event'\n      });\n    },\n\n    /**\n     * Track data when an user open a page.\n     * @returns {Promise}\n     */\n    _trackSessionBegin: function(){\n      var data = {\n        Session: [\n          _.extend({}, this.options, {\n            uuid: uuid.v4()\n          })\n        ]\n      };\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    },\n\n    /**\n     * Track timeline 2.0.\n     * @returns {Promise}\n     */\n    _trackTimelineSession: function(){\n      var data = [\n        {\n          properties: _.extend({}, this.options, {\n            uuid: uuid.v4(),\n            _eventType: 3\n          }),\n\n          time: new Date().getTime(),\n          event: 'Session',\n          type: 'track',\n          distinct_id: uuid.v4()\n        }\n      ];\n\n      return ML.Analytics._request(data, {appId: this.options.appId}, {\n        url: '2.0/track/event'\n      });\n    },\n\n    /**\n     * Track data when an user open a website first time.\n     * @returns {Promise}\n     */\n    _trackNewUser: function(){\n      var data = {\n        NewUser: [\n          _.extend({}, this.options, {\n            uuid: uuid.v4()\n          })\n        ]\n      };\n      return ML.Analytics._request(data, {appId: this.options.appId});\n    }\n  });\n\n  _.extend(ML.Analytics, /** @lends ML.Analytics */{\n    /**\n     * Post data to server, and retry when fail.\n     * @param {Object} data\n     * @param {i} i Retry time, by default undefined.\n     * @returns {Promise}\n     * @private\n     */\n    _request: function(data, headers, options, i){\n      options = options || {};\n      if(!ML.analyticsEnable){\n        return;\n      }\n\n      var url = options.url || '2.0/analytics/at';\n      var method = options.method || 'POST';\n\n      return ML._ajax(method, ML.serverURL + url, JSON.stringify(data), null, null, {\n        'Content-Type': 'application/json',\n        'X-ML-Appid': headers.appId\n      }).then(function(res){\n        return res;\n      }, function(res){\n        i = i || 0;\n        if(i < 2){\n          ML.Analytics._request(data, headers, options, ++i);\n        }\n        return res;\n      });\n    }\n  })\n};\n\n\n/** WEBPACK FOOTER **\n ** ./lib/analytics.js\n **/"],"sourceRoot":""}